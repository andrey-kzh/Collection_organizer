"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcollection"] = self["webpackChunkcollection"] || []).push([[179],{

/***/ "lTEZica8":
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

eval("\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tIBJhx\");\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(\"i8i4LrFt\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"zThLd8G0\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"/0+J+gjc\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"o0o1ebC6\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n// EXTERNAL MODULE: ./node_modules/mobx/dist/mobx.esm.js\nvar mobx_esm = __webpack_require__(\"aFzQ4EZ/\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(\"k6DiKGfl\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(\"79Ja/Yn4\");\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(\"vDqi2OZM\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n;// CONCATENATED MODULE: ./src/libs/localStorage.ts\n/* harmony default export */ const libs_localStorage = ({\n  saveTokenToStorage: function saveTokenToStorage(token) {\n    localStorage.setItem('token', token);\n  },\n  clearTokenFromStorage: function clearTokenFromStorage() {\n    localStorage.removeItem('token');\n  },\n  getTokenFromStorage: function getTokenFromStorage() {\n    if (!localStorage.token) return null;\n    return localStorage.token;\n  }\n});\n;// CONCATENATED MODULE: ./src/api/index.ts\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,defineProperty/* default */.Z)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\nvar Api = /*#__PURE__*/function () {\n  function Api(backendHost) {\n    (0,classCallCheck/* default */.Z)(this, Api);\n\n    (0,defineProperty/* default */.Z)(this, \"urlRoot\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"optionsDefault\", {});\n\n    axios_default().interceptors.response.use(function (response) {\n      return response;\n    }, function (error) {\n      return Promise.reject(error.response);\n    }); //set api url root for dev and prod\n\n    this.urlRoot = \"\".concat(backendHost, \"/api\");\n  }\n\n  (0,createClass/* default */.Z)(Api, [{\n    key: \"requestWithToken\",\n    value: function () {\n      var _requestWithToken = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee(options) {\n        var accessToken;\n        return regenerator_default().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                options.url = \"\".concat(this.urlRoot).concat(options.url);\n                accessToken = libs_localStorage.getTokenFromStorage();\n\n                if (!options.headers) {\n                  options.headers = {};\n                  options.headers = {\n                    'Content-Type': 'application/json'\n                  };\n                }\n\n                if (accessToken) options.headers.Authorization = \"Bearer \".concat(accessToken);\n                _context.next = 7;\n                return axios_default()(_objectSpread(_objectSpread({}, this.optionsDefault), options))[\"catch\"](function (error) {\n                  return error;\n                });\n\n              case 7:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                if (_context.t0 instanceof Error) console.log(_context.t0.message);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      function requestWithToken(_x3) {\n        return _requestWithToken.apply(this, arguments);\n      }\n\n      return requestWithToken;\n    }()\n  }, {\n    key: \"login\",\n    value: function (_login) {\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      login.toString = function () {\n        return _login.toString();\n      };\n\n      return login;\n    }( /*#__PURE__*/function () {\n      var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2(login, password) {\n        var options, res;\n        return regenerator_default().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = {\n                  url: \"\".concat(this.urlRoot, \"/users/login/\"),\n                  method: 'POST',\n                  data: {\n                    login: login,\n                    password: password\n                  }\n                };\n                _context2.next = 3;\n                return axios_default()(_objectSpread(_objectSpread({}, this.optionsDefault), options))[\"catch\"](function (error) {\n                  return error;\n                });\n\n              case 3:\n                res = _context2.sent;\n                return _context2.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x4, _x5) {\n        return _ref.apply(this, arguments);\n      };\n    }())\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n        var options, res;\n        return regenerator_default().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = {\n                  url: \"/users/logout/\",\n                  method: 'POST',\n                  data: {}\n                };\n                _context3.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context3.sent;\n                return _context3.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"userCheckAuth\",\n    value: function () {\n      var _userCheckAuth = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee4() {\n        var options, res;\n        return regenerator_default().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                options = {\n                  url: \"/users/auth/\",\n                  method: 'GET'\n                };\n                _context4.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context4.sent;\n\n                if (!(res !== undefined)) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", res);\n\n              case 6:\n                return _context4.abrupt(\"return\", false);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function userCheckAuth() {\n        return _userCheckAuth.apply(this, arguments);\n      }\n\n      return userCheckAuth;\n    }()\n  }, {\n    key: \"findCatalogItems\",\n    value: function () {\n      var _findCatalogItems = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee5(query, categories, page) {\n        var options, res;\n        return regenerator_default().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                options = {\n                  url: \"/search?search=\".concat(query, \"&categories=\").concat(categories, \"&page=\").concat(page),\n                  method: 'GET'\n                };\n                _context5.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context5.sent;\n                return _context5.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function findCatalogItems(_x6, _x7, _x8) {\n        return _findCatalogItems.apply(this, arguments);\n      }\n\n      return findCatalogItems;\n    }()\n  }, {\n    key: \"findTotalPages\",\n    value: function () {\n      var _findTotalPages = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee6(query, categories) {\n        var options, res;\n        return regenerator_default().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = {\n                  url: \"/search/total-pages/?search=\".concat(query, \"&categories=\").concat(categories),\n                  method: 'GET'\n                };\n                _context6.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context6.sent;\n                return _context6.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function findTotalPages(_x9, _x10) {\n        return _findTotalPages.apply(this, arguments);\n      }\n\n      return findTotalPages;\n    }()\n  }, {\n    key: \"addCategoryItem\",\n    value: function () {\n      var _addCategoryItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee7(title) {\n        var options, res;\n        return regenerator_default().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                options = {\n                  url: \"/category/\",\n                  method: 'POST',\n                  data: {\n                    title: title\n                  }\n                };\n                _context7.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context7.sent;\n                return _context7.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function addCategoryItem(_x11) {\n        return _addCategoryItem.apply(this, arguments);\n      }\n\n      return addCategoryItem;\n    }()\n  }, {\n    key: \"getAllCategories\",\n    value: function () {\n      var _getAllCategories = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee8() {\n        var options, res;\n        return regenerator_default().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                options = {\n                  url: \"/category/\",\n                  method: 'GET'\n                };\n                _context8.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context8.sent;\n                return _context8.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function getAllCategories() {\n        return _getAllCategories.apply(this, arguments);\n      }\n\n      return getAllCategories;\n    }()\n  }, {\n    key: \"updateCategoryItem\",\n    value: function () {\n      var _updateCategoryItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee9(id, title) {\n        var options, res;\n        return regenerator_default().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                options = {\n                  url: \"/category/\",\n                  method: 'PUT',\n                  data: {\n                    id: id,\n                    title: title\n                  }\n                };\n                _context9.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context9.sent;\n                return _context9.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function updateCategoryItem(_x12, _x13) {\n        return _updateCategoryItem.apply(this, arguments);\n      }\n\n      return updateCategoryItem;\n    }()\n  }, {\n    key: \"deleteCategoryItem\",\n    value: function () {\n      var _deleteCategoryItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee10(id) {\n        var options, res;\n        return regenerator_default().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                options = {\n                  url: \"/category/\",\n                  method: 'DELETE',\n                  data: {\n                    id: id\n                  }\n                };\n                _context10.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context10.sent;\n                return _context10.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function deleteCategoryItem(_x14) {\n        return _deleteCategoryItem.apply(this, arguments);\n      }\n\n      return deleteCategoryItem;\n    }()\n  }, {\n    key: \"addCatalogItem\",\n    value: function () {\n      var _addCatalogItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee11(title, anons, img, relatedCategories) {\n        var url, resFile, options, res;\n        return regenerator_default().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                url = '';\n\n                if (!(typeof img !== 'string' && img.type)) {\n                  _context11.next = 6;\n                  break;\n                }\n\n                _context11.next = 4;\n                return this.uploadOneFile(img, \"catalog-image\", \"/catalog/upload/\");\n\n              case 4:\n                resFile = _context11.sent;\n                if (!(resFile instanceof Error)) url = resFile.data.url;\n\n              case 6:\n                if (typeof img === 'string') url = img;\n                options = {\n                  url: \"/catalog/\",\n                  method: 'POST',\n                  data: {\n                    title: title,\n                    anons: anons,\n                    image: url,\n                    categoriesId: relatedCategories\n                  }\n                };\n                _context11.next = 10;\n                return this.requestWithToken(options);\n\n              case 10:\n                res = _context11.sent;\n                return _context11.abrupt(\"return\", res);\n\n              case 12:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function addCatalogItem(_x15, _x16, _x17, _x18) {\n        return _addCatalogItem.apply(this, arguments);\n      }\n\n      return addCatalogItem;\n    }()\n  }, {\n    key: \"updCatalogItem\",\n    value: function () {\n      var _updCatalogItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee12(id, title, anons, img, relatedCategories) {\n        var url, resFile, options, res;\n        return regenerator_default().wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                url = '';\n\n                if (!(typeof img !== 'string' && img.type)) {\n                  _context12.next = 6;\n                  break;\n                }\n\n                _context12.next = 4;\n                return this.uploadOneFile(img, \"catalog-image\", \"/catalog/upload/\");\n\n              case 4:\n                resFile = _context12.sent;\n                if (!(resFile instanceof Error)) url = resFile.data.url;\n\n              case 6:\n                if (typeof img === 'string') url = img;\n                options = {\n                  url: \"/catalog/\",\n                  method: 'PUT',\n                  data: {\n                    id: id,\n                    title: title,\n                    anons: anons,\n                    image: url,\n                    categoriesId: relatedCategories\n                  }\n                };\n                _context12.next = 10;\n                return this.requestWithToken(options);\n\n              case 10:\n                res = _context12.sent;\n                return _context12.abrupt(\"return\", res);\n\n              case 12:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function updCatalogItem(_x19, _x20, _x21, _x22, _x23) {\n        return _updCatalogItem.apply(this, arguments);\n      }\n\n      return updCatalogItem;\n    }()\n  }, {\n    key: \"delCatalogItem\",\n    value: function () {\n      var _delCatalogItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee13(id) {\n        var options, res;\n        return regenerator_default().wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                options = {\n                  url: \"/catalog/\",\n                  method: 'DELETE',\n                  data: {\n                    id: id\n                  }\n                };\n                _context13.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context13.sent;\n                return _context13.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function delCatalogItem(_x24) {\n        return _delCatalogItem.apply(this, arguments);\n      }\n\n      return delCatalogItem;\n    }()\n  }, {\n    key: \"uploadOneFile\",\n    value: function () {\n      var _uploadOneFile = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee14(file, field, url) {\n        var data, options, res;\n        return regenerator_default().wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                data = new FormData();\n                data.append(field, file);\n                options = {\n                  url: url,\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'multipart/form-data'\n                  },\n                  data: data\n                };\n                _context14.next = 5;\n                return this.requestWithToken(options);\n\n              case 5:\n                res = _context14.sent;\n                return _context14.abrupt(\"return\", res);\n\n              case 7:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function uploadOneFile(_x25, _x26, _x27) {\n        return _uploadOneFile.apply(this, arguments);\n      }\n\n      return uploadOneFile;\n    }()\n  }, {\n    key: \"getCatalogItem\",\n    value: function () {\n      var _getCatalogItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee15(id) {\n        var options, res;\n        return regenerator_default().wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                options = {\n                  url: \"/catalog/?id=\".concat(id),\n                  method: 'GET'\n                };\n                _context15.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context15.sent;\n                return _context15.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function getCatalogItem(_x28) {\n        return _getCatalogItem.apply(this, arguments);\n      }\n\n      return getCatalogItem;\n    }()\n  }]);\n\n  return Api;\n}();\n\nvar api = new Api(\"\");\n;// CONCATENATED MODULE: ./src/store/catalogStore.ts\n\n\n\n\nvar catalogStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  catalog: null,\n  editWindow: {\n    isOpen: false,\n    catalogId: null,\n    img: '',\n    previewImg: '',\n    title: '',\n    anons: '',\n    relatedCategories: []\n  },\n  setEditWindow: function setEditWindow(_ref) {\n    var isOpen = _ref.isOpen,\n        catalogId = _ref.catalogId,\n        img = _ref.img,\n        previewImg = _ref.previewImg,\n        title = _ref.title,\n        anons = _ref.anons,\n        relatedCategories = _ref.relatedCategories;\n    if (isOpen === undefined) isOpen = catalogStore.editWindow.isOpen;\n    if (catalogId === undefined) catalogId = catalogStore.editWindow.catalogId;\n    if (img === undefined) img = catalogStore.editWindow.img;\n    if (previewImg === undefined) previewImg = catalogStore.editWindow.previewImg;\n    if (title === undefined) title = catalogStore.editWindow.title;\n    if (anons === undefined) anons = catalogStore.editWindow.anons;\n    if (relatedCategories === undefined) relatedCategories = catalogStore.editWindow.relatedCategories;\n\n    if (isOpen === false) {\n      catalogId = null;\n      img = '';\n      previewImg = '';\n      title = '';\n      anons = '';\n      relatedCategories = [];\n    }\n\n    (0,mobx_esm/* runInAction */.z)(function () {\n      catalogStore.editWindow.isOpen = isOpen;\n      catalogStore.editWindow.catalogId = catalogId;\n      catalogStore.editWindow.img = img;\n      catalogStore.editWindow.previewImg = previewImg;\n      catalogStore.editWindow.title = title;\n      catalogStore.editWindow.anons = anons;\n      catalogStore.editWindow.relatedCategories = relatedCategories;\n    });\n  },\n  addRelatedCategories: function addRelatedCategories(categoryId) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return catalogStore.editWindow.relatedCategories.push(categoryId);\n    });\n  },\n  delRelatedCategories: function delRelatedCategories(categoryId) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return catalogStore.editWindow.relatedCategories.splice(catalogStore.editWindow.relatedCategories.indexOf(categoryId), 1);\n    });\n  },\n  saveCatalogItem: function saveCatalogItem() {\n    if (!catalogStore.editWindow.catalogId) {\n      catalogStore.addCatalogItem();\n    } else catalogStore.updateCatalogItem();\n  },\n  updateCatalogItem: function updateCatalogItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res, catalogItem;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.updCatalogItem(catalogStore.editWindow.catalogId, catalogStore.editWindow.title, catalogStore.editWindow.anons, catalogStore.editWindow.img, catalogStore.editWindow.relatedCategories);\n\n            case 2:\n              res = _context.sent;\n\n              if (res instanceof Error) {\n                _context.next = 10;\n                break;\n              }\n\n              if (!(res.status === 200)) {\n                _context.next = 10;\n                break;\n              }\n\n              catalogStore.setEditWindow({\n                isOpen: false\n              });\n              _context.next = 8;\n              return api.getCatalogItem(res.data.id);\n\n            case 8:\n              catalogItem = _context.sent;\n\n              if (!(catalogItem instanceof Error)) {\n                if (catalogItem.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    catalogStore.catalog.items[catalogItem.data.id] = catalogItem.data;\n                  });\n                }\n              }\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  addCatalogItem: function addCatalogItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2() {\n      var res, catalogItem;\n      return regenerator_default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.addCatalogItem(catalogStore.editWindow.title, catalogStore.editWindow.anons, catalogStore.editWindow.img, catalogStore.editWindow.relatedCategories);\n\n            case 2:\n              res = _context2.sent;\n\n              if (res instanceof Error) {\n                _context2.next = 10;\n                break;\n              }\n\n              if (!(res.status === 200)) {\n                _context2.next = 10;\n                break;\n              }\n\n              catalogStore.setEditWindow({\n                isOpen: false\n              });\n              _context2.next = 8;\n              return api.getCatalogItem(res.data.id);\n\n            case 8:\n              catalogItem = _context2.sent;\n\n              if (!(catalogItem instanceof Error)) {\n                if (catalogItem.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    catalogStore.catalog.items[catalogItem.data.id] = catalogItem.data;\n                    catalogStore.catalog.list.unshift(catalogItem.data.id);\n                  });\n                }\n              }\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  deleteId: null,\n  setDeleteId: function setDeleteId(id) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      catalogStore.deleteId = id;\n    });\n  },\n  delCatalogItem: function delCatalogItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n      var res;\n      return regenerator_default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.delCatalogItem(catalogStore.deleteId);\n\n            case 2:\n              res = _context3.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200 && res.data.id) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    var i = catalogStore.catalog.list.indexOf(res.data.id);\n                    catalogStore.catalog.list.splice(i, 1);\n                    delete catalogStore.catalog.items[res.data.id];\n                    catalogStore.deleteId = null;\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n});\n;// CONCATENATED MODULE: ./src/libs/mapCatalog.ts\nfunction mapCatalog(catalog) {\n  var normalized = {\n    items: {},\n    list: []\n  };\n  catalog.forEach(function (catalog) {\n    normalized.items[catalog.id] = {\n      id: catalog.id,\n      title: catalog.title,\n      anons: catalog.anons,\n      image: catalog.image,\n      categories: catalog.categories\n    };\n    normalized.list.push(catalog.id);\n  });\n  return normalized;\n}\n;// CONCATENATED MODULE: ./src/store/searchStore.ts\n\n\n\nfunction searchStore_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction searchStore_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? searchStore_ownKeys(Object(source), !0).forEach(function (key) { (0,defineProperty/* default */.Z)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : searchStore_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\n\n\nvar searchStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  form: {\n    searchString: '',\n    setSearchString: function setSearchString(searchString) {\n      searchStore.form.searchString = searchString;\n    },\n    selectdedCategories: [],\n    addSelectdedCategories: function addSelectdedCategories(categoryId) {\n      (0,mobx_esm/* runInAction */.z)(function () {\n        return searchStore.form.selectdedCategories.push(categoryId);\n      });\n    },\n    delSelectdedCategories: function delSelectdedCategories(categoryId) {\n      (0,mobx_esm/* runInAction */.z)(function () {\n        return searchStore.form.selectdedCategories.splice(searchStore.form.selectdedCategories.indexOf(categoryId), 1);\n      });\n    }\n  },\n  request: {\n    searchString: '',\n    selectdedCategories: []\n  },\n  setRequestParams: function setRequestParams() {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      searchStore.request.searchString = searchStore.form.searchString;\n      searchStore.request.selectdedCategories = searchStore.form.selectdedCategories;\n    });\n  },\n  setRequestParamsFromBowserSearchString: function setRequestParamsFromBowserSearchString(searchString, categories) {\n    searchStore.request.searchString = searchString;\n    searchStore.request.selectdedCategories = categories;\n  },\n  totalPages: null,\n  setTotalPages: function setTotalPages() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.findTotalPages(searchStore.form.searchString, searchStore.form.selectdedCategories);\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    searchStore.totalPages = res.data.totalPages;\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  currentPage: 1,\n  find: function find() {\n    var currentPage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2() {\n      var res;\n      return regenerator_default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.findCatalogItems(searchStore.request.searchString, searchStore.request.selectdedCategories, currentPage);\n\n            case 2:\n              res = _context2.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200 && res.data.result) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    catalogStore.catalog = mapCatalog(res.data.result);\n                    searchStore.currentPage = currentPage;\n                  });\n                } else {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return catalogStore.catalog = {\n                      items: {},\n                      list: []\n                    };\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  findNextPage: function findNextPage() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n      var nextPage, res, mapedCatalog;\n      return regenerator_default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              nextPage = searchStore.currentPage + 1;\n              _context3.next = 3;\n              return api.findCatalogItems(searchStore.request.searchString, searchStore.request.selectdedCategories, nextPage);\n\n            case 3:\n              res = _context3.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200 && res.data.result) {\n                  mapedCatalog = mapCatalog(res.data.result);\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    catalogStore.catalog.items = searchStore_objectSpread(searchStore_objectSpread({}, catalogStore.catalog.items), mapedCatalog.items);\n                    catalogStore.catalog.list = catalogStore.catalog.list.concat(mapedCatalog.list);\n                    searchStore.currentPage = nextPage;\n                  });\n                } else {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return catalogStore.catalog = {\n                      items: {},\n                      list: []\n                    };\n                  });\n                }\n              }\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n});\n;// CONCATENATED MODULE: ./src/store/authStore.ts\n\n\n\n\n\nvar authStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  login: 'demo',\n  password: 'demo123',\n  errorLogin: '',\n  isAuth: null,\n  setLogin: function setLogin(login) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return authStore.login = login;\n    });\n  },\n  setPassword: function setPassword(password) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return authStore.password = password;\n    });\n  },\n  loginRequest: function loginRequest() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.login(authStore.login, authStore.password);\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status !== 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.errorLogin = res.data.error.message;\n                  });\n                }\n\n                if (res.data.token) {\n                  libs_localStorage.saveTokenToStorage(res.data.token);\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.isAuth = true;\n                  });\n                } else libs_localStorage.clearTokenFromStorage();\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  logoutRequest: function logoutRequest() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2() {\n      var res;\n      return regenerator_default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.logout();\n\n            case 2:\n              res = _context2.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.data.isLogout) {\n                  libs_localStorage.clearTokenFromStorage();\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.isAuth = false;\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  authRequest: function authRequest() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n      var res;\n      return regenerator_default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.userCheckAuth();\n\n            case 2:\n              res = _context3.sent;\n\n              if (!(res instanceof Error) && res !== false) {\n                if (res.data.isAuth) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.isAuth = true;\n                  });\n                } else {\n                  libs_localStorage.clearTokenFromStorage();\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.isAuth = false;\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n});\n;// CONCATENATED MODULE: ./src/libs/mapCategories.ts\nfunction mapCategories(categories) {\n  var normalized = {\n    items: {},\n    list: []\n  };\n  categories.forEach(function (category) {\n    normalized.items[category.id] = {\n      id: category.id,\n      title: category.title\n    };\n    normalized.list.push(category.id);\n  });\n  return normalized;\n}\n;// CONCATENATED MODULE: ./src/store/categoriesStore.ts\n\n\n\n\n\nvar categoriesStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  categories: null,\n  getAllCategories: function getAllCategories() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.getAllCategories();\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return categoriesStore.categories = mapCategories(res.data);\n                  });\n                } else {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return categoriesStore.categories = {\n                      items: {},\n                      list: []\n                    };\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }\n});\n;// CONCATENATED MODULE: ./src/store/setupStore.ts\n\n\n\n\n\nvar setupStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  categoryTitle: '',\n  setCategoryTitle: function setCategoryTitle(title) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return setupStore.categoryTitle = title;\n    });\n  },\n  addCategoryItem: function addCategoryItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.addCategoryItem(setupStore.categoryTitle);\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    categoriesStore.categories.items[res.data.id] = {\n                      id: res.data.id,\n                      title: setupStore.categoryTitle\n                    };\n                    categoriesStore.categories.list.push(res.data.id);\n                    setupStore.categoryTitle = '';\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  updateCategoryItem: function updateCategoryItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2() {\n      var res;\n      return regenerator_default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.updateCategoryItem(setupStore.editWindow.id, setupStore.editWindow.title);\n\n            case 2:\n              res = _context2.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    categoriesStore.categories.items[res.data.id].title = setupStore.editWindow.title;\n                    setupStore.setEditWindow({\n                      isOpen: false,\n                      id: null,\n                      title: ''\n                    });\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  deleteCategoryItem: function deleteCategoryItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n      var res;\n      return regenerator_default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.deleteCategoryItem(setupStore.editWindow.id);\n\n            case 2:\n              res = _context3.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200 && res.data.id !== null) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    var i = categoriesStore.categories.list.indexOf(res.data.id);\n                    categoriesStore.categories.list.splice(i, 1);\n                    delete categoriesStore.categories.items[res.data.id];\n                    setupStore.setEditWindow({\n                      isOpen: false,\n                      id: null,\n                      title: ''\n                    });\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  },\n  editWindow: {\n    isOpen: false,\n    id: null,\n    title: ''\n  },\n  setEditWindow: function setEditWindow(_ref4) {\n    var isOpen = _ref4.isOpen,\n        id = _ref4.id,\n        title = _ref4.title;\n    if (isOpen === undefined) isOpen = setupStore.editWindow.isOpen;\n    if (id === undefined) id = setupStore.editWindow.id;\n    if (title === undefined) title = setupStore.editWindow.title;\n    (0,mobx_esm/* runInAction */.z)(function () {\n      setupStore.editWindow = {\n        isOpen: isOpen,\n        id: id,\n        title: title\n      };\n    });\n  }\n});\n;// CONCATENATED MODULE: ./src/store/index.tsx\n\n\n\n\n\n\nvar state = {\n  searchStore: searchStore,\n  authStore: authStore,\n  setupStore: setupStore,\n  categoriesStore: categoriesStore,\n  catalogStore: catalogStore\n};\nvar store = /*#__PURE__*/react.createContext(state);\nvar MobXProvider = function MobXProvider(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/react.createElement(store.Provider, {\n    value: state\n  }, \" \", children, \" \");\n};\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(\"55IpiCAJ\");\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js + 1 modules\nvar react_router = __webpack_require__(\"4qXz/kfb\");\n// EXTERNAL MODULE: ./node_modules/mobx-react/dist/mobxreact.esm.js + 17 modules\nvar mobxreact_esm = __webpack_require__(\"gdJlUBDx\");\n;// CONCATENATED MODULE: ./src/components/navButton/index.tsx\n\n\nvar NavButton = function NavButton(_ref) {\n  var name = _ref.name,\n      callback = _ref.callback;\n  return /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return callback();\n    },\n    className: \"nav-button\"\n  }, name);\n};\n;// CONCATENATED MODULE: ./src/components/navButtonSearch/index.tsx\n\n\nvar NavButtonSearch = function NavButtonSearch() {\n  return /*#__PURE__*/react.createElement(\"button\", {\n    className: \"nav-button-search\"\n  }, \"\\u041F\\u043E\\u0438\\u0441\\u043A\");\n};\n;// CONCATENATED MODULE: ./src/components/nav/index.tsx\n\n\n\n\n\n\n\n\nvar Nav = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$aut = _React$useContext.authStore,\n      isAuth = _React$useContext$aut.isAuth,\n      logoutRequest = _React$useContext$aut.logoutRequest,\n      setEditWindow = _React$useContext.catalogStore.setEditWindow;\n\n  var location = (0,react_router/* useLocation */.TH)().pathname;\n\n  var renderMenu = function renderMenu() {\n    if (isAuth) {\n      return /*#__PURE__*/react.createElement(react.Fragment, null, location === '/' && /*#__PURE__*/react.createElement(NavButton, {\n        callback: function callback() {\n          return setEditWindow({\n            isOpen: true\n          });\n        },\n        name: 'Добавить'\n      }), /*#__PURE__*/react.createElement(react_router_dom/* NavLink */.OL, {\n        activeClassName: \"nav-link_active\",\n        className: \"nav-link\",\n        to: '/setup/'\n      }, \"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\"), /*#__PURE__*/react.createElement(NavButton, {\n        callback: logoutRequest,\n        name: 'Выход'\n      }));\n    }\n\n    return /*#__PURE__*/react.createElement(react_router_dom/* NavLink */.OL, {\n      activeClassName: \"nav-link_active\",\n      className: \"nav-link\",\n      to: '/auth/'\n    }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\");\n  };\n\n  return /*#__PURE__*/react.createElement(\"nav\", {\n    className: \"nav\"\n  }, location === '/' ? /*#__PURE__*/react.createElement(NavButtonSearch, null) : /*#__PURE__*/react.createElement(react_router_dom/* NavLink */.OL, {\n    className: \"nav-link-search\",\n    to: '/'\n  }, \"\\u041F\\u043E\\u0438\\u0441\\u043A\"), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"nav-wrap\"\n  }, renderMenu()));\n});\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(\"b3LDTz+H\");\n;// CONCATENATED MODULE: ./src/components/categoriesAddButton/index.tsx\n\n\nvar CategoriesAddButton = function CategoriesAddButton(_ref) {\n  var callback = _ref.callback;\n  return /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return callback();\n    },\n    className: \"categorys-add-button\"\n  }, \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\");\n};\n;// CONCATENATED MODULE: ./src/components/categoriesItem/index.tsx\n\n\nvar CategoriesItem = /*#__PURE__*/react.memo(function (_ref) {\n  var title = _ref.title,\n      delCallback = _ref.delCallback;\n  return /*#__PURE__*/react.createElement(\"label\", {\n    className: \"category-item\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"category-item__title\"\n  }, title), /*#__PURE__*/react.createElement(\"input\", {\n    className: \"category-item__input\",\n    type: \"checkbox\",\n    name: \"category_item\"\n  }), /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return delCallback();\n    },\n    className: \"category-item__close\"\n  }, \" \"));\n}, function (prevProps, nextProps) {\n  if (prevProps.title === nextProps.title) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/components/selectCategoriesItem/index.tsx\n\n\n\nvar SelectCategoriesItem = /*#__PURE__*/react.memo(function (_ref) {\n  var title = _ref.title,\n      isActive = _ref.isActive,\n      addCallback = _ref.addCallback,\n      delCallback = _ref.delCallback;\n\n  var _React$useState = react.useState(isActive),\n      _React$useState2 = (0,slicedToArray/* default */.Z)(_React$useState, 2),\n      checked = _React$useState2[0],\n      setChecked = _React$useState2[1];\n\n  var check = function check(isChecked) {\n    setChecked(isChecked);\n    isChecked ? addCallback() : delCallback();\n  };\n\n  return /*#__PURE__*/react.createElement(\"label\", {\n    className: \"select-category-item\"\n  }, /*#__PURE__*/react.createElement(\"input\", {\n    className: \"select-category-item__input\",\n    name: \"category_item\",\n    type: \"checkbox\",\n    onChange: function onChange() {\n      return check(!checked);\n    },\n    checked: checked\n  }), /*#__PURE__*/react.createElement(\"span\", {\n    className: \"select-category-item__title\"\n  }, title));\n}, function (prevProps, nextProps) {\n  if (prevProps.isActive === nextProps.isActive) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/components/popup/index.tsx\n\n\nvar Popup = function Popup(_ref) {\n  var className = _ref.className,\n      closeCallback = _ref.closeCallback,\n      children = _ref.children;\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"popup-wrap \".concat(className)\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"popup\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"popup__close-wrap\"\n  }, /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return closeCallback();\n    },\n    className: \"popup__close\"\n  })), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"popup__content\"\n  }, children)));\n};\n;// CONCATENATED MODULE: ./src/components/selectCategories/index.tsx\n\n\n\n\n\n\nvar SelectCategories = (0,mobxreact_esm/* observer */.Pi)(function (_ref) {\n  var selectdedCategories = _ref.selectdedCategories,\n      delSelectdedCategories = _ref.delSelectdedCategories,\n      addSelectdedCategories = _ref.addSelectdedCategories,\n      setIsOpen = _ref.setIsOpen;\n\n  var _React$useContext = react.useContext(store),\n      categories = _React$useContext.categoriesStore.categories;\n\n  var renderCategories = function renderCategories() {\n    var isActive;\n    return categories.list.map(function (id) {\n      if (categories.list.indexOf(id) !== -1) {\n        selectdedCategories.indexOf(id) !== -1 ? isActive = true : isActive = false;\n        return /*#__PURE__*/react.createElement(SelectCategoriesItem, {\n          key: id,\n          isActive: isActive,\n          title: \"\".concat(categories.items[id].title),\n          addCallback: function addCallback() {\n            return addSelectdedCategories(id);\n          },\n          delCallback: function delCallback() {\n            return delSelectdedCategories(id);\n          }\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/react.createElement(Popup, {\n    className: \"\",\n    closeCallback: function closeCallback() {\n      return setIsOpen(false);\n    }\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"select-category-header\"\n  }, \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"select-category select-category_none\"\n  }, renderCategories()));\n});\n;// CONCATENATED MODULE: ./src/components/categories/index.tsx\n\n\n\n\n\n\n\n\n\nvar Categories = (0,mobxreact_esm/* observer */.Pi)(function (_ref) {\n  var selectdedCategories = _ref.selectdedCategories,\n      delSelectdedCategories = _ref.delSelectdedCategories,\n      addSelectdedCategories = _ref.addSelectdedCategories;\n\n  var _React$useContext = react.useContext(store),\n      _React$useContext$cat = _React$useContext.categoriesStore,\n      categories = _React$useContext$cat.categories,\n      getAllCategories = _React$useContext$cat.getAllCategories;\n\n  var _useState = (0,react.useState)(false),\n      _useState2 = (0,slicedToArray/* default */.Z)(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  (0,react.useEffect)(function () {\n    if (categories === null) getAllCategories();\n  }, []);\n  if (categories === null) return /*#__PURE__*/react.createElement(\"div\", null, \"Loading\");\n\n  var renderCategories = function renderCategories() {\n    return selectdedCategories.map(function (categoryId) {\n      if (categories.list.indexOf(categoryId) !== -1) {\n        return /*#__PURE__*/react.createElement(CategoriesItem, {\n          key: categories.items[categoryId].id,\n          title: categories.items[categoryId].title,\n          delCallback: function delCallback() {\n            return delSelectdedCategories(categoryId);\n          }\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"categorys\"\n  }, /*#__PURE__*/react.createElement(CategoriesAddButton, {\n    callback: function callback() {\n      return setIsOpen(true);\n    }\n  }), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"categorys-items-wrap\"\n  }, renderCategories())), isOpen && /*#__PURE__*/react.createElement(SelectCategories, {\n    selectdedCategories: selectdedCategories,\n    addSelectdedCategories: addSelectdedCategories,\n    delSelectdedCategories: delSelectdedCategories,\n    setIsOpen: setIsOpen\n  }));\n});\n;// CONCATENATED MODULE: ./src/components/searchInput/index.tsx\n\n\n\n\nvar SearchInput = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$sea = _React$useContext.searchStore.form,\n      searchString = _React$useContext$sea.searchString,\n      setSearchString = _React$useContext$sea.setSearchString;\n\n  return /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setSearchString(e.target.value);\n    },\n    value: searchString,\n    className: \"search-form__input\",\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n  });\n});\n;// CONCATENATED MODULE: ./src/components/searchForm/index.tsx\n\n\n\n\n\n\n\n\nvar SearchForm = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$sea = _React$useContext.searchStore,\n      find = _React$useContext$sea.find,\n      setTotalPages = _React$useContext$sea.setTotalPages,\n      setRequestParams = _React$useContext$sea.setRequestParams,\n      setRequestParamsFromBowserSearchString = _React$useContext$sea.setRequestParamsFromBowserSearchString,\n      _React$useContext$sea2 = _React$useContext$sea.form,\n      selectdedCategories = _React$useContext$sea2.selectdedCategories,\n      addSelectdedCategories = _React$useContext$sea2.addSelectdedCategories,\n      delSelectdedCategories = _React$useContext$sea2.delSelectdedCategories,\n      searchString = _React$useContext$sea.request.searchString;\n\n  var history = (0,react_router/* useHistory */.k6)();\n  var location = (0,react_router/* useLocation */.TH)();\n\n  var onClickFind = function onClickFind() {\n    setRequestParams();\n    var url = encodeURI(\"/?search=\".concat(searchString, \"&categories=\").concat(selectdedCategories));\n    history.push(url);\n    setTotalPages();\n    find();\n  };\n\n  (0,react.useEffect)(function () {\n    var params = new URLSearchParams(location.search);\n    var searchString = '',\n        categories = '';\n    if (params.has('search')) searchString = decodeURIComponent(params.get('search'));\n    if (params.has('categories')) categories = decodeURIComponent(params.get('categories'));\n    var categoriesArr = categories.length > 0 ? categories.split(',').map(Number) : '';\n    setRequestParamsFromBowserSearchString(searchString, categoriesArr);\n    setTotalPages();\n    find();\n  }, []);\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"search-form-wrap\"\n  }, /*#__PURE__*/react.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return e.preventDefault();\n    },\n    className: \"search-form\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"search-form__input-wrap\"\n  }, /*#__PURE__*/react.createElement(SearchInput, null), /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return onClickFind();\n    },\n    className: \"search-form__button\",\n    type: \"submit\"\n  }, \"\\u041D\\u0430\\u0439\\u0442\\u0438\"), /*#__PURE__*/react.createElement(Categories, {\n    selectdedCategories: selectdedCategories,\n    addSelectdedCategories: addSelectdedCategories,\n    delSelectdedCategories: delSelectdedCategories\n  }))));\n});\n;// CONCATENATED MODULE: ./src/components/editCatalogItem/index.tsx\n\n\n\n\n\n\nvar EditCatalogItem = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$cat = _React$useContext.catalogStore,\n      _React$useContext$cat2 = _React$useContext$cat.editWindow,\n      isOpen = _React$useContext$cat2.isOpen,\n      title = _React$useContext$cat2.title,\n      anons = _React$useContext$cat2.anons,\n      relatedCategories = _React$useContext$cat2.relatedCategories,\n      previewImg = _React$useContext$cat2.previewImg,\n      saveCatalogItem = _React$useContext$cat.saveCatalogItem,\n      setEditWindow = _React$useContext$cat.setEditWindow,\n      addRelatedCategories = _React$useContext$cat.addRelatedCategories,\n      delRelatedCategories = _React$useContext$cat.delRelatedCategories;\n\n  var fileInput = react.useRef(null);\n\n  var handleImg = function handleImg(input) {\n    setEditWindow({\n      img: input.files[0],\n      previewImg: URL.createObjectURL(input.files[0])\n    });\n    fileInput.current.value = null;\n  };\n\n  return isOpen && /*#__PURE__*/react.createElement(Popup, {\n    className: \"\",\n    closeCallback: function closeCallback() {\n      return setEditWindow({\n        isOpen: false\n      });\n    }\n  }, /*#__PURE__*/react.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return e.preventDefault();\n    },\n    className: \"edit-cat-item-form\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__img-wrap\"\n  }, /*#__PURE__*/react.createElement(\"div\", null, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__input-title\"\n  }, \"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/react.createElement(\"label\", {\n    className: \"button edit-cat-item-form__img-button\"\n  }, \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C\", /*#__PURE__*/react.createElement(\"input\", {\n    ref: fileInput,\n    onChange: function onChange(e) {\n      return handleImg(e.target);\n    },\n    className: \"edit-cat-item-form__img-input\",\n    accept: \"image/x-png,image/gif,image/jpeg\",\n    type: \"file\",\n    name: \"image\"\n  }))), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__img\",\n    style: {\n      backgroundImage: \"url(\".concat(previewImg, \")\")\n    }\n  }, previewImg && /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return setEditWindow({\n        img: '',\n        previewImg: ''\n      });\n    },\n    className: \"edit-cat-item-form-del\"\n  }))), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__input-wrap\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__input-title\"\n  }, \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"), /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setEditWindow({\n        title: e.target.value\n      });\n    },\n    value: title,\n    className: \"edit-cat-item-form__input\",\n    type: \"text\",\n    name: \"title\"\n  }), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__input-title\"\n  }, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"), /*#__PURE__*/react.createElement(\"textarea\", {\n    onChange: function onChange(e) {\n      return setEditWindow({\n        anons: e.target.value\n      });\n    },\n    value: anons,\n    className: \"edit-cat-item-form__textarea\",\n    name: \"anons\"\n  })), /*#__PURE__*/react.createElement(Categories, {\n    selectdedCategories: relatedCategories,\n    addSelectdedCategories: addRelatedCategories,\n    delSelectdedCategories: delRelatedCategories\n  }), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__submit-wrap\"\n  }, /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return saveCatalogItem();\n    },\n    className: \"button\"\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"))));\n});\n;// CONCATENATED MODULE: ./src/components/button/index.tsx\n\n\nvar Button = function Button(_ref) {\n  var name = _ref.name,\n      className = _ref.className,\n      callback = _ref.callback;\n  return /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return callback();\n    },\n    className: \"button \".concat(className)\n  }, name);\n};\n;// CONCATENATED MODULE: ./src/components/catalogCategoryItem/index.tsx\n\n\nvar CatalogCategoryItem = /*#__PURE__*/react.memo(function (_ref) {\n  var title = _ref.title;\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__category-item\"\n  }, title);\n}, function (prevProps, nextProps) {\n  if (prevProps.title === nextProps.title) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/components/catalogItem/index.tsx\n\n\n\n\nvar CatalogItem = /*#__PURE__*/react.memo(function (_ref) {\n  var isAuth = _ref.isAuth,\n      title = _ref.title,\n      anons = _ref.anons,\n      image = _ref.image,\n      categories = _ref.categories,\n      editCallback = _ref.editCallback,\n      delCallback = _ref.delCallback;\n\n  var renderCategories = function renderCategories() {\n    return categories.map(function (category) {\n      if (category.id) {\n        return /*#__PURE__*/react.createElement(CatalogCategoryItem, {\n          title: category.title,\n          key: category.id\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__img\",\n    style: {\n      backgroundImage: \"url(\".concat(image ? \"\" + image : '', \")\")\n    }\n  }), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__txt\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__header\"\n  }, title), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__categorys\"\n  }, renderCategories()), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__anons\"\n  }, anons)), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__ctrl-buttons\"\n  }, isAuth && /*#__PURE__*/react.createElement(Button, {\n    className: \"button_catalog-item\",\n    name: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\",\n    callback: editCallback\n  }), isAuth && /*#__PURE__*/react.createElement(Button, {\n    className: \"button_catalog-item\",\n    name: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",\n    callback: delCallback\n  })));\n}, function (prevProps, nextProps) {\n  if (prevProps.title === nextProps.title && prevProps.anons === nextProps.anons && prevProps.image === nextProps.image && prevProps.isAuth === nextProps.isAuth && JSON.stringify(prevProps.categories) === JSON.stringify(nextProps.categories)) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/hooks/useConfirmationDialog.tsx\n\n\n\n\nfunction useConfirmationDialog(_ref) {\n  var header = _ref.header,\n      confirmTitle = _ref.confirmTitle,\n      cancelTitle = _ref.cancelTitle,\n      onConfirmClick = _ref.onConfirmClick;\n\n  var _useState = (0,react.useState)(false),\n      _useState2 = (0,slicedToArray/* default */.Z)(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var onOpen = function onOpen() {\n    return setIsOpen(!isOpen);\n  };\n\n  var ConfirmationDialog = (0,react.useCallback)(function () {\n    return isOpen && /*#__PURE__*/react.createElement(Popup, {\n      closeCallback: onOpen,\n      className: \"popup-wrap_delete-confirmation\"\n    }, /*#__PURE__*/react.createElement(\"div\", {\n      className: \"popup-delete-confirmation__header\"\n    }, header), /*#__PURE__*/react.createElement(\"div\", {\n      className: \"popup-delete-confirmation__buttons-wrap\"\n    }, /*#__PURE__*/react.createElement(Button, {\n      name: confirmTitle,\n      className: '',\n      callback: function callback() {\n        return onConfirmClick();\n      }\n    }), /*#__PURE__*/react.createElement(Button, {\n      name: cancelTitle,\n      className: '',\n      callback: onOpen\n    })));\n  }, [isOpen]);\n  return {\n    onOpen: onOpen,\n    ConfirmationDialog: ConfirmationDialog\n  };\n}\n;// CONCATENATED MODULE: ./src/components/catalog/index.tsx\n\n\n\n\n\n\n\nvar Catalog = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      isAuth = _React$useContext.authStore.isAuth,\n      _React$useContext$cat = _React$useContext.catalogStore,\n      catalog = _React$useContext$cat.catalog,\n      delCatalogItem = _React$useContext$cat.delCatalogItem,\n      setEditWindow = _React$useContext$cat.setEditWindow,\n      setDeleteId = _React$useContext$cat.setDeleteId,\n      _React$useContext$sea = _React$useContext.searchStore,\n      currentPage = _React$useContext$sea.currentPage,\n      totalPages = _React$useContext$sea.totalPages,\n      findNextPage = _React$useContext$sea.findNextPage;\n\n  var _useConfirmationDialo = useConfirmationDialog({\n    header: 'Удалить?',\n    confirmTitle: 'Да',\n    cancelTitle: 'Нет',\n    onConfirmClick: function onConfirmClick() {\n      return confirmDelete();\n    }\n  }),\n      ConfirmationDialog = _useConfirmationDialo.ConfirmationDialog,\n      onOpen = _useConfirmationDialo.onOpen;\n\n  if (catalog === null) return /*#__PURE__*/react.createElement(\"div\", null, \"Loading\");\n\n  var handleDelete = function handleDelete(id) {\n    setDeleteId(id);\n    onOpen();\n  };\n\n  var confirmDelete = function confirmDelete() {\n    onOpen();\n    delCatalogItem();\n  };\n\n  var renderCatalogItems = function renderCatalogItems() {\n    return catalog.list.map(function (id) {\n      return /*#__PURE__*/react.createElement(CatalogItem, {\n        key: id,\n        isAuth: isAuth,\n        title: catalog.items[id].title,\n        anons: catalog.items[id].anons,\n        image: catalog.items[id].image,\n        categories: catalog.items[id].categories,\n        editCallback: function editCallback() {\n          return setEditWindow({\n            isOpen: true,\n            catalogId: id,\n            title: catalog.items[id].title,\n            anons: catalog.items[id].anons,\n            img: catalog.items[id].image,\n            previewImg: catalog.items[id].image,\n            relatedCategories: catalog.items[id].categories.map(function (category) {\n              return category.id;\n            })\n          });\n        },\n        delCallback: function delCallback() {\n          return handleDelete(id);\n        }\n      });\n    });\n  };\n\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog\"\n  }, catalog.list.length > 0 ? renderCatalogItems() : /*#__PURE__*/react.createElement(\"div\", null, \"\\u041D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"), totalPages > 1 && currentPage < totalPages && /*#__PURE__*/react.createElement(Button, {\n    name: \"\\u0414\\u0430\\u043B\\u0435\\u0435\",\n    className: \"button_paging\",\n    callback: function callback() {\n      return findNextPage();\n    }\n  })), /*#__PURE__*/react.createElement(ConfirmationDialog, null));\n});\n;// CONCATENATED MODULE: ./src/pages/index/index.tsx\n\n\n\n\n\n\nvar IndexPage = function IndexPage() {\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(Nav, null), /*#__PURE__*/react.createElement(SearchForm, null), /*#__PURE__*/react.createElement(Catalog, null), /*#__PURE__*/react.createElement(EditCatalogItem, null));\n};\n;// CONCATENATED MODULE: ./src/components/addNewCategoryForm/index.tsx\n\n\n\n\nvar AddNewCategoryForm = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$set = _React$useContext.setupStore,\n      categoryTitle = _React$useContext$set.categoryTitle,\n      setCategoryTitle = _React$useContext$set.setCategoryTitle,\n      addCategoryItem = _React$useContext$set.addCategoryItem;\n\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"add-category-form-wrap\"\n  }, /*#__PURE__*/react.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return e.preventDefault();\n    },\n    className: \"add-category-form\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"add-category-form__input-wrap\"\n  }, /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setCategoryTitle(e.target.value);\n    },\n    value: categoryTitle,\n    className: \"add-category-form__input\",\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n  }), /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return addCategoryItem();\n    },\n    className: \"add-category-form__button\",\n    type: \"submit\"\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"))));\n});\n;// CONCATENATED MODULE: ./src/components/setupCategoriesItem/index.tsx\n\n\n\nvar SetupCategoriesItem = /*#__PURE__*/react.memo(function (_ref) {\n  var title = _ref.title,\n      openEditWindow = _ref.openEditWindow;\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"setup-categorys__item\"\n  }, /*#__PURE__*/react.createElement(\"span\", {\n    className: \"setup-categorys__header\"\n  }, title), /*#__PURE__*/react.createElement(Button, {\n    name: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\",\n    className: \"button_setup-categorys-item\",\n    callback: openEditWindow\n  }));\n}, function (prevProps, nextProps) {\n  if (prevProps.title === nextProps.title) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/components/setupCategoriesEditWin/index.tsx\n\n\n\n\n\n\nvar SetupCategoriesEditWin = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$set = _React$useContext.setupStore,\n      _React$useContext$set2 = _React$useContext$set.editWindow,\n      isOpen = _React$useContext$set2.isOpen,\n      title = _React$useContext$set2.title,\n      setEditWindow = _React$useContext$set.setEditWindow,\n      updateCategoryItem = _React$useContext$set.updateCategoryItem,\n      deleteCategoryItem = _React$useContext$set.deleteCategoryItem;\n\n  var _useConfirmationDialo = useConfirmationDialog({\n    header: 'Удалить?',\n    confirmTitle: 'Да',\n    cancelTitle: 'Нет',\n    onConfirmClick: function onConfirmClick() {\n      return confirmDelete();\n    }\n  }),\n      ConfirmationDialog = _useConfirmationDialo.ConfirmationDialog,\n      onOpen = _useConfirmationDialo.onOpen;\n\n  var confirmDelete = function confirmDelete() {\n    onOpen();\n    deleteCategoryItem();\n  };\n\n  return /*#__PURE__*/react.createElement(react.Fragment, null, isOpen && /*#__PURE__*/react.createElement(Popup, {\n    closeCallback: function closeCallback() {\n      return setEditWindow({\n        isOpen: false,\n        id: null,\n        title: ''\n      });\n    },\n    className: \"popup-wrap_setup-categorys\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"setup-category-edit\"\n  }, /*#__PURE__*/react.createElement(\"input\", {\n    className: \"setup-category-edit__title-input\",\n    type: \"text\",\n    name: \"new_title\",\n    value: title,\n    onChange: function onChange(e) {\n      return setEditWindow({\n        title: e.target.value\n      });\n    },\n    placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n  })), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"setup-category-edit__buttons-wrap\"\n  }, /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return updateCategoryItem();\n    },\n    className: \"button button_catalog-item\"\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"), /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return onOpen();\n    },\n    className: \"button button_catalog-item\"\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"))), /*#__PURE__*/react.createElement(ConfirmationDialog, null));\n});\n;// CONCATENATED MODULE: ./src/components/setupCategories/index.tsx\n\n\n\n\n\n\n\nvar SetupCategories = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$cat = _React$useContext.categoriesStore,\n      categories = _React$useContext$cat.categories,\n      getAllCategories = _React$useContext$cat.getAllCategories,\n      setEditWindow = _React$useContext.setupStore.setEditWindow;\n\n  (0,react.useEffect)(function () {\n    if (categories === null) {\n      getAllCategories();\n    }\n  }, []);\n\n  var renderCategories = function renderCategories() {\n    return categories.list.slice().reverse().map(function (categoryId) {\n      return /*#__PURE__*/react.createElement(SetupCategoriesItem, {\n        key: categoryId,\n        id: categoryId,\n        openEditWindow: function openEditWindow() {\n          return setEditWindow({\n            isOpen: true,\n            id: categoryId,\n            title: categories.items[categoryId].title\n          });\n        },\n        title: categories.items[categoryId].title\n      });\n    });\n  };\n\n  if (categories === null) {\n    return /*#__PURE__*/react.createElement(\"div\", null, \"Loading\");\n  }\n\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"setup-categorys\"\n  }, renderCategories()), /*#__PURE__*/react.createElement(SetupCategoriesEditWin, null));\n});\n;// CONCATENATED MODULE: ./src/pages/setup/index.tsx\n\n\n\n\n\nvar SetupPage = function SetupPage() {\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(Nav, null), /*#__PURE__*/react.createElement(AddNewCategoryForm, null), /*#__PURE__*/react.createElement(SetupCategories, null));\n};\n;// CONCATENATED MODULE: ./src/components/loginForm/index.tsx\n\n\n\n\n\n\n\nvar LoginForm = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$aut = _React$useContext.authStore,\n      isAuth = _React$useContext$aut.isAuth,\n      login = _React$useContext$aut.login,\n      setLogin = _React$useContext$aut.setLogin,\n      password = _React$useContext$aut.password,\n      setPassword = _React$useContext$aut.setPassword,\n      errorLogin = _React$useContext$aut.errorLogin,\n      loginRequest = _React$useContext$aut.loginRequest;\n\n  var history = (0,react_router/* useHistory */.k6)();\n  var location = (0,react_router/* useLocation */.TH)();\n  (0,react.useEffect)(function () {\n    if (isAuth) {\n      var _ref = location.state || {\n        from: {\n          pathname: \"/\"\n        }\n      },\n          from = _ref.from;\n\n      history.replace(from);\n    }\n  }, [isAuth]);\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"login-form-wrap\"\n  }, /*#__PURE__*/react.createElement(\"h1\", null, \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"login-form__error\"\n  }, errorLogin), /*#__PURE__*/react.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return e.preventDefault();\n    },\n    className: \"login-form\"\n  }, /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setLogin(e.target.value);\n    },\n    value: login,\n    className: \"login-form__input\",\n    type: \"text\",\n    name: \"login\",\n    placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\"\n  }), /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    value: password,\n    className: \"login-form__input\",\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n  }), /*#__PURE__*/react.createElement(Button, {\n    callback: loginRequest,\n    name: 'Войти',\n    className: 'login-form__button'\n  })));\n});\n;// CONCATENATED MODULE: ./src/pages/login/index.tsx\n\n\n\n\nvar LoginPage = function LoginPage() {\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(Nav, null), /*#__PURE__*/react.createElement(LoginForm, null));\n};\n;// CONCATENATED MODULE: ./src/pages/404/index.tsx\n\n\nvar PageNotFound = function PageNotFound() {\n  return /*#__PURE__*/react.createElement(\"p\", null, \"404 Page not found\");\n};\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/extends.js\nvar esm_extends = __webpack_require__(\"+9dHOjM1\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\nvar objectWithoutProperties = __webpack_require__(\"BkpHt/Y0\");\n;// CONCATENATED MODULE: ./src/components/privateRoute/index.tsx\n\n\nvar _excluded = [\"children\"];\n\n\n\n\nvar PrivateRoute = (0,mobxreact_esm/* observer */.Pi)(function (_ref) {\n  var children = _ref.children,\n      rest = (0,objectWithoutProperties/* default */.Z)(_ref, _excluded);\n\n  var _React$useContext = react.useContext(store),\n      isAuth = _React$useContext.authStore.isAuth;\n\n  return /*#__PURE__*/react.createElement(react_router/* Route */.AW, (0,esm_extends/* default */.Z)({}, rest, {\n    render: function render(_ref2) {\n      var location = _ref2.location;\n      return isAuth ? children : /*#__PURE__*/react.createElement(react_router/* Redirect */.l_, {\n        to: {\n          pathname: \"/auth\",\n          state: {\n            from: location\n          }\n        }\n      });\n    }\n  }));\n});\n;// CONCATENATED MODULE: ./src/routes.tsx\n\n\n\n\n\n\n\n\n\n\nvar Routes = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$aut = _React$useContext.authStore,\n      isAuth = _React$useContext$aut.isAuth,\n      authRequest = _React$useContext$aut.authRequest;\n\n  (0,react.useEffect)(function () {\n    if (isAuth !== true && isAuth !== false) {\n      authRequest();\n    }\n  }, [isAuth]);\n\n  if (isAuth !== true && isAuth !== false) {\n    return /*#__PURE__*/react.createElement(\"div\", null, \"Loading\");\n  }\n\n  return /*#__PURE__*/react.createElement(react_router_dom/* BrowserRouter */.VK, null, /*#__PURE__*/react.createElement(react_router/* Switch */.rs, null, /*#__PURE__*/react.createElement(react_router/* Route */.AW, {\n    exact: true,\n    path: \"/\"\n  }, /*#__PURE__*/react.createElement(IndexPage, null)), /*#__PURE__*/react.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/setup\"\n  }, /*#__PURE__*/react.createElement(SetupPage, null)), /*#__PURE__*/react.createElement(react_router/* Route */.AW, {\n    exact: true,\n    path: \"/auth\"\n  }, /*#__PURE__*/react.createElement(LoginPage, null)), /*#__PURE__*/react.createElement(react_router/* Route */.AW, {\n    path: \"*\"\n  }, /*#__PURE__*/react.createElement(PageNotFound, null))));\n});\n;// CONCATENATED MODULE: ./src/index.tsx\n\n\n\n\n\n\nvar App = function App() {\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"content\"\n  }, /*#__PURE__*/react.createElement(MobXProvider, null, /*#__PURE__*/react.createElement(Routes, null)));\n};\n\nreact_dom.render( /*#__PURE__*/react.createElement(App, null), document.getElementById(\"app\"));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibFRFWmljYTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdm9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9saWJzL2xvY2FsU3RvcmFnZS50cz8zODcwIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvYXBpL2luZGV4LnRzPzU5ZTYiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9zdG9yZS9jYXRhbG9nU3RvcmUudHM/MDIyNCIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2xpYnMvbWFwQ2F0YWxvZy50cz83NWQ2Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvc3RvcmUvc2VhcmNoU3RvcmUudHM/OWQ3YiIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL3N0b3JlL2F1dGhTdG9yZS50cz84M2E5Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvbGlicy9tYXBDYXRlZ29yaWVzLnRzPzE3NzIiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9zdG9yZS9jYXRlZ29yaWVzU3RvcmUudHM/OWNmNCIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL3N0b3JlL3NldHVwU3RvcmUudHM/OTJiOCIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL3N0b3JlL2luZGV4LnRzeD9kODFkIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9uYXZCdXR0b24vaW5kZXgudHN4P2I3NjkiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL25hdkJ1dHRvblNlYXJjaC9pbmRleC50c3g/ODdhOSIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvbmF2L2luZGV4LnRzeD81YmQ3Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9jYXRlZ29yaWVzQWRkQnV0dG9uL2luZGV4LnRzeD8wMDRkIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9jYXRlZ29yaWVzSXRlbS9pbmRleC50c3g/MjM1ZSIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvc2VsZWN0Q2F0ZWdvcmllc0l0ZW0vaW5kZXgudHN4P2RkNjMiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL3BvcHVwL2luZGV4LnRzeD80NmMzIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9zZWxlY3RDYXRlZ29yaWVzL2luZGV4LnRzeD84OTJiIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9jYXRlZ29yaWVzL2luZGV4LnRzeD8zZTUxIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9zZWFyY2hJbnB1dC9pbmRleC50c3g/YThiMCIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvc2VhcmNoRm9ybS9pbmRleC50c3g/NDczMCIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvZWRpdENhdGFsb2dJdGVtL2luZGV4LnRzeD8yYTA0Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9idXR0b24vaW5kZXgudHN4PzlmNzIiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2NhdGFsb2dDYXRlZ29yeUl0ZW0vaW5kZXgudHN4P2I2ZDciLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2NhdGFsb2dJdGVtL2luZGV4LnRzeD82OWM4Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvaG9va3MvdXNlQ29uZmlybWF0aW9uRGlhbG9nLnRzeD9iMmU4Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9jYXRhbG9nL2luZGV4LnRzeD85ODUyIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvcGFnZXMvaW5kZXgvaW5kZXgudHN4PzE2YWQiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2FkZE5ld0NhdGVnb3J5Rm9ybS9pbmRleC50c3g/ZjkyYyIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvc2V0dXBDYXRlZ29yaWVzSXRlbS9pbmRleC50c3g/YmE1ZCIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvc2V0dXBDYXRlZ29yaWVzRWRpdFdpbi9pbmRleC50c3g/M2NiZiIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvc2V0dXBDYXRlZ29yaWVzL2luZGV4LnRzeD8xY2I0Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvcGFnZXMvc2V0dXAvaW5kZXgudHN4PzA0OWUiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2xvZ2luRm9ybS9pbmRleC50c3g/MThjMSIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL3BhZ2VzL2xvZ2luL2luZGV4LnRzeD8wYzdhIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvcGFnZXMvNDA0L2luZGV4LnRzeD82NTU5Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9wcml2YXRlUm91dGUvaW5kZXgudHN4PzMxOWUiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9yb3V0ZXMudHN4P2U2ZjciLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9pbmRleC50c3g/YzI3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gIHNhdmVUb2tlblRvU3RvcmFnZTogZnVuY3Rpb24gc2F2ZVRva2VuVG9TdG9yYWdlKHRva2VuKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pO1xuICB9LFxuICBjbGVhclRva2VuRnJvbVN0b3JhZ2U6IGZ1bmN0aW9uIGNsZWFyVG9rZW5Gcm9tU3RvcmFnZSgpIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTtcbiAgfSxcbiAgZ2V0VG9rZW5Gcm9tU3RvcmFnZTogZnVuY3Rpb24gZ2V0VG9rZW5Gcm9tU3RvcmFnZSgpIHtcbiAgICBpZiAoIWxvY2FsU3RvcmFnZS50b2tlbikgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS50b2tlbjtcbiAgfVxufTsiLCJpbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzc1wiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSBcIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yXCI7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcbmltcG9ydCB0b2tlbnNTdG9yYWdlIGZyb20gXCIuLi9saWJzL2xvY2FsU3RvcmFnZVwiO1xuXG52YXIgQXBpID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQXBpKGJhY2tlbmRIb3N0KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFwaSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1cmxSb290XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRpb25zRGVmYXVsdFwiLCB7fSk7XG5cbiAgICBheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yLnJlc3BvbnNlKTtcbiAgICB9KTsgLy9zZXQgYXBpIHVybCByb290IGZvciBkZXYgYW5kIHByb2RcblxuICAgIHRoaXMudXJsUm9vdCA9IFwiXCIuY29uY2F0KGJhY2tlbmRIb3N0LCBcIi9hcGlcIik7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQXBpLCBbe1xuICAgIGtleTogXCJyZXF1ZXN0V2l0aFRva2VuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfcmVxdWVzdFdpdGhUb2tlbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUob3B0aW9ucykge1xuICAgICAgICB2YXIgYWNjZXNzVG9rZW47XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy51cmwgPSBcIlwiLmNvbmNhdCh0aGlzLnVybFJvb3QpLmNvbmNhdChvcHRpb25zLnVybCk7XG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSB0b2tlbnNTdG9yYWdlLmdldFRva2VuRnJvbVN0b3JhZ2UoKTtcblxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLmhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYWNjZXNzVG9rZW4pIG9wdGlvbnMuaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJCZWFyZXIgXCIuY29uY2F0KGFjY2Vzc1Rva2VuKTtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNztcbiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLm9wdGlvbnNEZWZhdWx0KSwgb3B0aW9ucykpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgX2NvbnRleHQuc2VudCk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTA7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFtcImNhdGNoXCJdKDApO1xuICAgICAgICAgICAgICAgIGlmIChfY29udGV4dC50MCBpbnN0YW5jZW9mIEVycm9yKSBjb25zb2xlLmxvZyhfY29udGV4dC50MC5tZXNzYWdlKTtcblxuICAgICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMCwgMTBdXSk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIHJlcXVlc3RXaXRoVG9rZW4oX3gzKSB7XG4gICAgICAgIHJldHVybiBfcmVxdWVzdFdpdGhUb2tlbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVxdWVzdFdpdGhUb2tlbjtcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJsb2dpblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoX2xvZ2luKSB7XG4gICAgICBmdW5jdGlvbiBsb2dpbihfeCwgX3gyKSB7XG4gICAgICAgIHJldHVybiBfbG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgbG9naW4udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfbG9naW4udG9TdHJpbmcoKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBsb2dpbjtcbiAgICB9KCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihsb2dpbiwgcGFzc3dvcmQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCJcIi5jb25jYXQodGhpcy51cmxSb290LCBcIi91c2Vycy9sb2dpbi9cIiksXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgbG9naW46IGxvZ2luLFxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLm9wdGlvbnNEZWZhdWx0KSwgb3B0aW9ucykpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0LCBfeDUpIHtcbiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSgpKVxuICB9LCB7XG4gICAga2V5OiBcImxvZ291dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2xvZ291dCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi91c2Vycy9sb2dvdXQvXCIsXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHt9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gbG9nb3V0KCkge1xuICAgICAgICByZXR1cm4gX2xvZ291dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbG9nb3V0O1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcInVzZXJDaGVja0F1dGhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF91c2VyQ2hlY2tBdXRoID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7XG4gICAgICAgIHZhciBvcHRpb25zLCByZXM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICB1cmw6IFwiL3VzZXJzL2F1dGgvXCIsXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ0LnNlbnQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIShyZXMgIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KFwicmV0dXJuXCIsIGZhbHNlKTtcblxuICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gdXNlckNoZWNrQXV0aCgpIHtcbiAgICAgICAgcmV0dXJuIF91c2VyQ2hlY2tBdXRoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1c2VyQ2hlY2tBdXRoO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcImZpbmRDYXRhbG9nSXRlbXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9maW5kQ2F0YWxvZ0l0ZW1zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocXVlcnksIGNhdGVnb3JpZXMsIHBhZ2UpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCIvc2VhcmNoP3NlYXJjaD1cIi5jb25jYXQocXVlcnksIFwiJmNhdGVnb3JpZXM9XCIpLmNvbmNhdChjYXRlZ29yaWVzLCBcIiZwYWdlPVwiKS5jb25jYXQocGFnZSksXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ1LnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gZmluZENhdGFsb2dJdGVtcyhfeDYsIF94NywgX3g4KSB7XG4gICAgICAgIHJldHVybiBfZmluZENhdGFsb2dJdGVtcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmluZENhdGFsb2dJdGVtcztcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJmaW5kVG90YWxQYWdlc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2ZpbmRUb3RhbFBhZ2VzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYocXVlcnksIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCIvc2VhcmNoL3RvdGFsLXBhZ2VzLz9zZWFyY2g9XCIuY29uY2F0KHF1ZXJ5LCBcIiZjYXRlZ29yaWVzPVwiKS5jb25jYXQoY2F0ZWdvcmllcyksXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ2LnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gZmluZFRvdGFsUGFnZXMoX3g5LCBfeDEwKSB7XG4gICAgICAgIHJldHVybiBfZmluZFRvdGFsUGFnZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZpbmRUb3RhbFBhZ2VzO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcImFkZENhdGVnb3J5SXRlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2FkZENhdGVnb3J5SXRlbSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHRpdGxlKSB7XG4gICAgICAgIHZhciBvcHRpb25zLCByZXM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0Nykge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICB1cmw6IFwiL2NhdGVnb3J5L1wiLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RXaXRoVG9rZW4ob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Ny5zZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlNywgdGhpcyk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGFkZENhdGVnb3J5SXRlbShfeDExKSB7XG4gICAgICAgIHJldHVybiBfYWRkQ2F0ZWdvcnlJdGVtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhZGRDYXRlZ29yeUl0ZW07XG4gICAgfSgpXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0QWxsQ2F0ZWdvcmllc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2dldEFsbENhdGVnb3JpZXMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCIvY2F0ZWdvcnkvXCIsXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ4LnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWU4LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gZ2V0QWxsQ2F0ZWdvcmllcygpIHtcbiAgICAgICAgcmV0dXJuIF9nZXRBbGxDYXRlZ29yaWVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBnZXRBbGxDYXRlZ29yaWVzO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZUNhdGVnb3J5SXRlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3VwZGF0ZUNhdGVnb3J5SXRlbSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KGlkLCB0aXRsZSkge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi9jYXRlZ29yeS9cIixcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ5LnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWU5LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gdXBkYXRlQ2F0ZWdvcnlJdGVtKF94MTIsIF94MTMpIHtcbiAgICAgICAgcmV0dXJuIF91cGRhdGVDYXRlZ29yeUl0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVwZGF0ZUNhdGVnb3J5SXRlbTtcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJkZWxldGVDYXRlZ29yeUl0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9kZWxldGVDYXRlZ29yeUl0ZW0gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoaWQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICB1cmw6IFwiL2NhdGVnb3J5L1wiLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RXaXRoVG9rZW4ob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTAuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlMTAsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeUl0ZW0oX3gxNCkge1xuICAgICAgICByZXR1cm4gX2RlbGV0ZUNhdGVnb3J5SXRlbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGVsZXRlQ2F0ZWdvcnlJdGVtO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcImFkZENhdGFsb2dJdGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfYWRkQ2F0YWxvZ0l0ZW0gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEodGl0bGUsIGFub25zLCBpbWcsIHJlbGF0ZWRDYXRlZ29yaWVzKSB7XG4gICAgICAgIHZhciB1cmwsIHJlc0ZpbGUsIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHVybCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIGltZyAhPT0gJ3N0cmluZycgJiYgaW1nLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gNDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRPbmVGaWxlKGltZywgXCJjYXRhbG9nLWltYWdlXCIsIFwiL2NhdGFsb2cvdXBsb2FkL1wiKTtcblxuICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmVzRmlsZSA9IF9jb250ZXh0MTEuc2VudDtcbiAgICAgICAgICAgICAgICBpZiAoIShyZXNGaWxlIGluc3RhbmNlb2YgRXJyb3IpKSB1cmwgPSByZXNGaWxlLmRhdGEudXJsO1xuXG4gICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGltZyA9PT0gJ3N0cmluZycpIHVybCA9IGltZztcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi9jYXRhbG9nL1wiLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgYW5vbnM6IGFub25zLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogdXJsLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzSWQ6IHJlbGF0ZWRDYXRlZ29yaWVzXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAxMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxMS5zZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdChcInJldHVyblwiLCByZXMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlMTEsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBhZGRDYXRhbG9nSXRlbShfeDE1LCBfeDE2LCBfeDE3LCBfeDE4KSB7XG4gICAgICAgIHJldHVybiBfYWRkQ2F0YWxvZ0l0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFkZENhdGFsb2dJdGVtO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcInVwZENhdGFsb2dJdGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdXBkQ2F0YWxvZ0l0ZW0gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoaWQsIHRpdGxlLCBhbm9ucywgaW1nLCByZWxhdGVkQ2F0ZWdvcmllcykge1xuICAgICAgICB2YXIgdXJsLCByZXNGaWxlLCBvcHRpb25zLCByZXM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICB1cmwgPSAnJztcblxuICAgICAgICAgICAgICAgIGlmICghKHR5cGVvZiBpbWcgIT09ICdzdHJpbmcnICYmIGltZy50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBsb2FkT25lRmlsZShpbWcsIFwiY2F0YWxvZy1pbWFnZVwiLCBcIi9jYXRhbG9nL3VwbG9hZC9cIik7XG5cbiAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHJlc0ZpbGUgPSBfY29udGV4dDEyLnNlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKCEocmVzRmlsZSBpbnN0YW5jZW9mIEVycm9yKSkgdXJsID0gcmVzRmlsZS5kYXRhLnVybDtcblxuICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbWcgPT09ICdzdHJpbmcnKSB1cmwgPSBpbWc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCIvY2F0YWxvZy9cIixcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBhbm9uczogYW5vbnMsXG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNJZDogcmVsYXRlZENhdGVnb3JpZXNcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDEwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RXaXRoVG9rZW4ob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDEyLnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUxMiwgdGhpcyk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIHVwZENhdGFsb2dJdGVtKF94MTksIF94MjAsIF94MjEsIF94MjIsIF94MjMpIHtcbiAgICAgICAgcmV0dXJuIF91cGRDYXRhbG9nSXRlbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdXBkQ2F0YWxvZ0l0ZW07XG4gICAgfSgpXG4gIH0sIHtcbiAgICBrZXk6IFwiZGVsQ2F0YWxvZ0l0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9kZWxDYXRhbG9nSXRlbSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMyhpZCkge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCIvY2F0YWxvZy9cIixcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDEzLnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTEzLCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gZGVsQ2F0YWxvZ0l0ZW0oX3gyNCkge1xuICAgICAgICByZXR1cm4gX2RlbENhdGFsb2dJdGVtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZWxDYXRhbG9nSXRlbTtcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJ1cGxvYWRPbmVGaWxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdXBsb2FkT25lRmlsZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNChmaWxlLCBmaWVsZCwgdXJsKSB7XG4gICAgICAgIHZhciBkYXRhLCBvcHRpb25zLCByZXM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE0KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoZmllbGQsIGZpbGUpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gNTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDE0LnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTE0LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gdXBsb2FkT25lRmlsZShfeDI1LCBfeDI2LCBfeDI3KSB7XG4gICAgICAgIHJldHVybiBfdXBsb2FkT25lRmlsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdXBsb2FkT25lRmlsZTtcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJnZXRDYXRhbG9nSXRlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2dldENhdGFsb2dJdGVtID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KGlkKSB7XG4gICAgICAgIHZhciBvcHRpb25zLCByZXM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi9jYXRhbG9nLz9pZD1cIi5jb25jYXQoaWQpLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDE1LnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTE1LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gZ2V0Q2F0YWxvZ0l0ZW0oX3gyOCkge1xuICAgICAgICByZXR1cm4gX2dldENhdGFsb2dJdGVtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBnZXRDYXRhbG9nSXRlbTtcbiAgICB9KClcbiAgfV0pO1xuXG4gIHJldHVybiBBcGk7XG59KCk7XG5cbmV4cG9ydCB2YXIgYXBpID0gbmV3IEFwaShwcm9jZXNzLmVudi5CQUNLRU5EX0hPU1QpOyIsImltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCI7XG5pbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIjtcbmltcG9ydCB7IG1ha2VBdXRvT2JzZXJ2YWJsZSwgcnVuSW5BY3Rpb24gfSBmcm9tIFwibW9ieFwiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2FwaVwiO1xuZXhwb3J0IHZhciBjYXRhbG9nU3RvcmUgPSBtYWtlQXV0b09ic2VydmFibGUoe1xuICBjYXRhbG9nOiBudWxsLFxuICBlZGl0V2luZG93OiB7XG4gICAgaXNPcGVuOiBmYWxzZSxcbiAgICBjYXRhbG9nSWQ6IG51bGwsXG4gICAgaW1nOiAnJyxcbiAgICBwcmV2aWV3SW1nOiAnJyxcbiAgICB0aXRsZTogJycsXG4gICAgYW5vbnM6ICcnLFxuICAgIHJlbGF0ZWRDYXRlZ29yaWVzOiBbXVxuICB9LFxuICBzZXRFZGl0V2luZG93OiBmdW5jdGlvbiBzZXRFZGl0V2luZG93KF9yZWYpIHtcbiAgICB2YXIgaXNPcGVuID0gX3JlZi5pc09wZW4sXG4gICAgICAgIGNhdGFsb2dJZCA9IF9yZWYuY2F0YWxvZ0lkLFxuICAgICAgICBpbWcgPSBfcmVmLmltZyxcbiAgICAgICAgcHJldmlld0ltZyA9IF9yZWYucHJldmlld0ltZyxcbiAgICAgICAgdGl0bGUgPSBfcmVmLnRpdGxlLFxuICAgICAgICBhbm9ucyA9IF9yZWYuYW5vbnMsXG4gICAgICAgIHJlbGF0ZWRDYXRlZ29yaWVzID0gX3JlZi5yZWxhdGVkQ2F0ZWdvcmllcztcbiAgICBpZiAoaXNPcGVuID09PSB1bmRlZmluZWQpIGlzT3BlbiA9IGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LmlzT3BlbjtcbiAgICBpZiAoY2F0YWxvZ0lkID09PSB1bmRlZmluZWQpIGNhdGFsb2dJZCA9IGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LmNhdGFsb2dJZDtcbiAgICBpZiAoaW1nID09PSB1bmRlZmluZWQpIGltZyA9IGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LmltZztcbiAgICBpZiAocHJldmlld0ltZyA9PT0gdW5kZWZpbmVkKSBwcmV2aWV3SW1nID0gY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cucHJldmlld0ltZztcbiAgICBpZiAodGl0bGUgPT09IHVuZGVmaW5lZCkgdGl0bGUgPSBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy50aXRsZTtcbiAgICBpZiAoYW5vbnMgPT09IHVuZGVmaW5lZCkgYW5vbnMgPSBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5hbm9ucztcbiAgICBpZiAocmVsYXRlZENhdGVnb3JpZXMgPT09IHVuZGVmaW5lZCkgcmVsYXRlZENhdGVnb3JpZXMgPSBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5yZWxhdGVkQ2F0ZWdvcmllcztcblxuICAgIGlmIChpc09wZW4gPT09IGZhbHNlKSB7XG4gICAgICBjYXRhbG9nSWQgPSBudWxsO1xuICAgICAgaW1nID0gJyc7XG4gICAgICBwcmV2aWV3SW1nID0gJyc7XG4gICAgICB0aXRsZSA9ICcnO1xuICAgICAgYW5vbnMgPSAnJztcbiAgICAgIHJlbGF0ZWRDYXRlZ29yaWVzID0gW107XG4gICAgfVxuXG4gICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuaXNPcGVuID0gaXNPcGVuO1xuICAgICAgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuY2F0YWxvZ0lkID0gY2F0YWxvZ0lkO1xuICAgICAgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuaW1nID0gaW1nO1xuICAgICAgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cucHJldmlld0ltZyA9IHByZXZpZXdJbWc7XG4gICAgICBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy50aXRsZSA9IHRpdGxlO1xuICAgICAgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuYW5vbnMgPSBhbm9ucztcbiAgICAgIGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnJlbGF0ZWRDYXRlZ29yaWVzID0gcmVsYXRlZENhdGVnb3JpZXM7XG4gICAgfSk7XG4gIH0sXG4gIGFkZFJlbGF0ZWRDYXRlZ29yaWVzOiBmdW5jdGlvbiBhZGRSZWxhdGVkQ2F0ZWdvcmllcyhjYXRlZ29yeUlkKSB7XG4gICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnJlbGF0ZWRDYXRlZ29yaWVzLnB1c2goY2F0ZWdvcnlJZCk7XG4gICAgfSk7XG4gIH0sXG4gIGRlbFJlbGF0ZWRDYXRlZ29yaWVzOiBmdW5jdGlvbiBkZWxSZWxhdGVkQ2F0ZWdvcmllcyhjYXRlZ29yeUlkKSB7XG4gICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnJlbGF0ZWRDYXRlZ29yaWVzLnNwbGljZShjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5yZWxhdGVkQ2F0ZWdvcmllcy5pbmRleE9mKGNhdGVnb3J5SWQpLCAxKTtcbiAgICB9KTtcbiAgfSxcbiAgc2F2ZUNhdGFsb2dJdGVtOiBmdW5jdGlvbiBzYXZlQ2F0YWxvZ0l0ZW0oKSB7XG4gICAgaWYgKCFjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5jYXRhbG9nSWQpIHtcbiAgICAgIGNhdGFsb2dTdG9yZS5hZGRDYXRhbG9nSXRlbSgpO1xuICAgIH0gZWxzZSBjYXRhbG9nU3RvcmUudXBkYXRlQ2F0YWxvZ0l0ZW0oKTtcbiAgfSxcbiAgdXBkYXRlQ2F0YWxvZ0l0ZW06IGZ1bmN0aW9uIHVwZGF0ZUNhdGFsb2dJdGVtKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkge1xuICAgICAgdmFyIHJlcywgY2F0YWxvZ0l0ZW07XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS51cGRDYXRhbG9nSXRlbShjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5jYXRhbG9nSWQsIGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnRpdGxlLCBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5hbm9ucywgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuaW1nLCBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5yZWxhdGVkQ2F0ZWdvcmllcyk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICBpZiAocmVzIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzID09PSAyMDApKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2F0YWxvZ1N0b3JlLnNldEVkaXRXaW5kb3coe1xuICAgICAgICAgICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4O1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmdldENhdGFsb2dJdGVtKHJlcy5kYXRhLmlkKTtcblxuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICBjYXRhbG9nSXRlbSA9IF9jb250ZXh0LnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEoY2F0YWxvZ0l0ZW0gaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2F0YWxvZ0l0ZW0uc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ1N0b3JlLmNhdGFsb2cuaXRlbXNbY2F0YWxvZ0l0ZW0uZGF0YS5pZF0gPSBjYXRhbG9nSXRlbS5kYXRhO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlKTtcbiAgICB9KSkoKTtcbiAgfSxcbiAgYWRkQ2F0YWxvZ0l0ZW06IGZ1bmN0aW9uIGFkZENhdGFsb2dJdGVtKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHtcbiAgICAgIHZhciByZXMsIGNhdGFsb2dJdGVtO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5hZGRDYXRhbG9nSXRlbShjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy50aXRsZSwgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuYW5vbnMsIGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LmltZywgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cucmVsYXRlZENhdGVnb3JpZXMpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50O1xuXG4gICAgICAgICAgICAgIGlmIChyZXMgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzID09PSAyMDApKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhdGFsb2dTdG9yZS5zZXRFZGl0V2luZG93KHtcbiAgICAgICAgICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7XG4gICAgICAgICAgICAgIHJldHVybiBhcGkuZ2V0Q2F0YWxvZ0l0ZW0ocmVzLmRhdGEuaWQpO1xuXG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgIGNhdGFsb2dJdGVtID0gX2NvbnRleHQyLnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEoY2F0YWxvZ0l0ZW0gaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2F0YWxvZ0l0ZW0uc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ1N0b3JlLmNhdGFsb2cuaXRlbXNbY2F0YWxvZ0l0ZW0uZGF0YS5pZF0gPSBjYXRhbG9nSXRlbS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBjYXRhbG9nU3RvcmUuY2F0YWxvZy5saXN0LnVuc2hpZnQoY2F0YWxvZ0l0ZW0uZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMik7XG4gICAgfSkpKCk7XG4gIH0sXG4gIGRlbGV0ZUlkOiBudWxsLFxuICBzZXREZWxldGVJZDogZnVuY3Rpb24gc2V0RGVsZXRlSWQoaWQpIHtcbiAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBjYXRhbG9nU3RvcmUuZGVsZXRlSWQgPSBpZDtcbiAgICB9KTtcbiAgfSxcbiAgZGVsQ2F0YWxvZ0l0ZW06IGZ1bmN0aW9uIGRlbENhdGFsb2dJdGVtKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmRlbENhdGFsb2dJdGVtKGNhdGFsb2dTdG9yZS5kZWxldGVJZCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YS5pZCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGNhdGFsb2dTdG9yZS5jYXRhbG9nLmxpc3QuaW5kZXhPZihyZXMuZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNhdGFsb2dTdG9yZS5jYXRhbG9nLmxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2F0YWxvZ1N0b3JlLmNhdGFsb2cuaXRlbXNbcmVzLmRhdGEuaWRdO1xuICAgICAgICAgICAgICAgICAgICBjYXRhbG9nU3RvcmUuZGVsZXRlSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMyk7XG4gICAgfSkpKCk7XG4gIH1cbn0pOyIsImV4cG9ydCBmdW5jdGlvbiBtYXBDYXRhbG9nKGNhdGFsb2cpIHtcbiAgdmFyIG5vcm1hbGl6ZWQgPSB7XG4gICAgaXRlbXM6IHt9LFxuICAgIGxpc3Q6IFtdXG4gIH07XG4gIGNhdGFsb2cuZm9yRWFjaChmdW5jdGlvbiAoY2F0YWxvZykge1xuICAgIG5vcm1hbGl6ZWQuaXRlbXNbY2F0YWxvZy5pZF0gPSB7XG4gICAgICBpZDogY2F0YWxvZy5pZCxcbiAgICAgIHRpdGxlOiBjYXRhbG9nLnRpdGxlLFxuICAgICAgYW5vbnM6IGNhdGFsb2cuYW5vbnMsXG4gICAgICBpbWFnZTogY2F0YWxvZy5pbWFnZSxcbiAgICAgIGNhdGVnb3JpZXM6IGNhdGFsb2cuY2F0ZWdvcmllc1xuICAgIH07XG4gICAgbm9ybWFsaXplZC5saXN0LnB1c2goY2F0YWxvZy5pZCk7XG4gIH0pO1xuICByZXR1cm4gbm9ybWFsaXplZDtcbn0iLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiO1xuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsgaSAlIDIgPyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKSA6IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIjtcbmltcG9ydCB7IGNhdGFsb2dTdG9yZSB9IGZyb20gJy4vY2F0YWxvZ1N0b3JlJztcbmltcG9ydCB7IG1ha2VBdXRvT2JzZXJ2YWJsZSwgcnVuSW5BY3Rpb24gfSBmcm9tIFwibW9ieFwiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2FwaVwiO1xuaW1wb3J0IHsgbWFwQ2F0YWxvZyB9IGZyb20gXCIuLi9saWJzL21hcENhdGFsb2dcIjtcbmV4cG9ydCB2YXIgc2VhcmNoU3RvcmUgPSBtYWtlQXV0b09ic2VydmFibGUoe1xuICBmb3JtOiB7XG4gICAgc2VhcmNoU3RyaW5nOiAnJyxcbiAgICBzZXRTZWFyY2hTdHJpbmc6IGZ1bmN0aW9uIHNldFNlYXJjaFN0cmluZyhzZWFyY2hTdHJpbmcpIHtcbiAgICAgIHNlYXJjaFN0b3JlLmZvcm0uc2VhcmNoU3RyaW5nID0gc2VhcmNoU3RyaW5nO1xuICAgIH0sXG4gICAgc2VsZWN0ZGVkQ2F0ZWdvcmllczogW10sXG4gICAgYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllczogZnVuY3Rpb24gYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllcyhjYXRlZ29yeUlkKSB7XG4gICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZWFyY2hTdG9yZS5mb3JtLnNlbGVjdGRlZENhdGVnb3JpZXMucHVzaChjYXRlZ29yeUlkKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllczogZnVuY3Rpb24gZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllcyhjYXRlZ29yeUlkKSB7XG4gICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZWFyY2hTdG9yZS5mb3JtLnNlbGVjdGRlZENhdGVnb3JpZXMuc3BsaWNlKHNlYXJjaFN0b3JlLmZvcm0uc2VsZWN0ZGVkQ2F0ZWdvcmllcy5pbmRleE9mKGNhdGVnb3J5SWQpLCAxKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgcmVxdWVzdDoge1xuICAgIHNlYXJjaFN0cmluZzogJycsXG4gICAgc2VsZWN0ZGVkQ2F0ZWdvcmllczogW11cbiAgfSxcbiAgc2V0UmVxdWVzdFBhcmFtczogZnVuY3Rpb24gc2V0UmVxdWVzdFBhcmFtcygpIHtcbiAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBzZWFyY2hTdG9yZS5yZXF1ZXN0LnNlYXJjaFN0cmluZyA9IHNlYXJjaFN0b3JlLmZvcm0uc2VhcmNoU3RyaW5nO1xuICAgICAgc2VhcmNoU3RvcmUucmVxdWVzdC5zZWxlY3RkZWRDYXRlZ29yaWVzID0gc2VhcmNoU3RvcmUuZm9ybS5zZWxlY3RkZWRDYXRlZ29yaWVzO1xuICAgIH0pO1xuICB9LFxuICBzZXRSZXF1ZXN0UGFyYW1zRnJvbUJvd3NlclNlYXJjaFN0cmluZzogZnVuY3Rpb24gc2V0UmVxdWVzdFBhcmFtc0Zyb21Cb3dzZXJTZWFyY2hTdHJpbmcoc2VhcmNoU3RyaW5nLCBjYXRlZ29yaWVzKSB7XG4gICAgc2VhcmNoU3RvcmUucmVxdWVzdC5zZWFyY2hTdHJpbmcgPSBzZWFyY2hTdHJpbmc7XG4gICAgc2VhcmNoU3RvcmUucmVxdWVzdC5zZWxlY3RkZWRDYXRlZ29yaWVzID0gY2F0ZWdvcmllcztcbiAgfSxcbiAgdG90YWxQYWdlczogbnVsbCxcbiAgc2V0VG90YWxQYWdlczogZnVuY3Rpb24gc2V0VG90YWxQYWdlcygpIHtcbiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5maW5kVG90YWxQYWdlcyhzZWFyY2hTdG9yZS5mb3JtLnNlYXJjaFN0cmluZywgc2VhcmNoU3RvcmUuZm9ybS5zZWxlY3RkZWRDYXRlZ29yaWVzKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50O1xuXG4gICAgICAgICAgICAgIGlmICghKHJlcyBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoU3RvcmUudG90YWxQYWdlcyA9IHJlcy5kYXRhLnRvdGFsUGFnZXM7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZSk7XG4gICAgfSkpKCk7XG4gIH0sXG4gIGN1cnJlbnRQYWdlOiAxLFxuICBmaW5kOiBmdW5jdGlvbiBmaW5kKCkge1xuICAgIHZhciBjdXJyZW50UGFnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTtcbiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7XG4gICAgICB2YXIgcmVzO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5maW5kQ2F0YWxvZ0l0ZW1zKHNlYXJjaFN0b3JlLnJlcXVlc3Quc2VhcmNoU3RyaW5nLCBzZWFyY2hTdG9yZS5yZXF1ZXN0LnNlbGVjdGRlZENhdGVnb3JpZXMsIGN1cnJlbnRQYWdlKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDtcblxuICAgICAgICAgICAgICBpZiAoIShyZXMgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYXRhbG9nU3RvcmUuY2F0YWxvZyA9IG1hcENhdGFsb2cocmVzLmRhdGEucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoU3RvcmUuY3VycmVudFBhZ2UgPSBjdXJyZW50UGFnZTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXRhbG9nU3RvcmUuY2F0YWxvZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgbGlzdDogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTIpO1xuICAgIH0pKSgpO1xuICB9LFxuICBmaW5kTmV4dFBhZ2U6IGZ1bmN0aW9uIGZpbmROZXh0UGFnZSgpIHtcbiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7XG4gICAgICB2YXIgbmV4dFBhZ2UsIHJlcywgbWFwZWRDYXRhbG9nO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIG5leHRQYWdlID0gc2VhcmNoU3RvcmUuY3VycmVudFBhZ2UgKyAxO1xuICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7XG4gICAgICAgICAgICAgIHJldHVybiBhcGkuZmluZENhdGFsb2dJdGVtcyhzZWFyY2hTdG9yZS5yZXF1ZXN0LnNlYXJjaFN0cmluZywgc2VhcmNoU3RvcmUucmVxdWVzdC5zZWxlY3RkZWRDYXRlZ29yaWVzLCBuZXh0UGFnZSk7XG5cbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YS5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgIG1hcGVkQ2F0YWxvZyA9IG1hcENhdGFsb2cocmVzLmRhdGEucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ1N0b3JlLmNhdGFsb2cuaXRlbXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNhdGFsb2dTdG9yZS5jYXRhbG9nLml0ZW1zKSwgbWFwZWRDYXRhbG9nLml0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ1N0b3JlLmNhdGFsb2cubGlzdCA9IGNhdGFsb2dTdG9yZS5jYXRhbG9nLmxpc3QuY29uY2F0KG1hcGVkQ2F0YWxvZy5saXN0KTtcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoU3RvcmUuY3VycmVudFBhZ2UgPSBuZXh0UGFnZTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXRhbG9nU3RvcmUuY2F0YWxvZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgbGlzdDogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTMpO1xuICAgIH0pKSgpO1xuICB9XG59KTsiLCJpbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiO1xuaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSBcIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yXCI7XG5pbXBvcnQgeyBtYWtlQXV0b09ic2VydmFibGUsIHJ1bkluQWN0aW9uIH0gZnJvbSBcIm1vYnhcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9hcGlcIjtcbmltcG9ydCB0b2tlbnNTdG9yYWdlIGZyb20gXCIuLi9saWJzL2xvY2FsU3RvcmFnZVwiO1xuZXhwb3J0IHZhciBhdXRoU3RvcmUgPSBtYWtlQXV0b09ic2VydmFibGUoe1xuICBsb2dpbjogJ2RlbW8nLFxuICBwYXNzd29yZDogJ2RlbW8xMjMnLFxuICBlcnJvckxvZ2luOiAnJyxcbiAgaXNBdXRoOiBudWxsLFxuICBzZXRMb2dpbjogZnVuY3Rpb24gc2V0TG9naW4obG9naW4pIHtcbiAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYXV0aFN0b3JlLmxvZ2luID0gbG9naW47XG4gICAgfSk7XG4gIH0sXG4gIHNldFBhc3N3b3JkOiBmdW5jdGlvbiBzZXRQYXNzd29yZChwYXNzd29yZCkge1xuICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhdXRoU3RvcmUucGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgICB9KTtcbiAgfSxcbiAgbG9naW5SZXF1ZXN0OiBmdW5jdGlvbiBsb2dpblJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICB2YXIgcmVzO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7XG4gICAgICAgICAgICAgIHJldHVybiBhcGkubG9naW4oYXV0aFN0b3JlLmxvZ2luLCBhdXRoU3RvcmUucGFzc3dvcmQpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aFN0b3JlLmVycm9yTG9naW4gPSByZXMuZGF0YS5lcnJvci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnRva2VuKSB7XG4gICAgICAgICAgICAgICAgICB0b2tlbnNTdG9yYWdlLnNhdmVUb2tlblRvU3RvcmFnZShyZXMuZGF0YS50b2tlbik7XG4gICAgICAgICAgICAgICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRoU3RvcmUuaXNBdXRoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0b2tlbnNTdG9yYWdlLmNsZWFyVG9rZW5Gcm9tU3RvcmFnZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUpO1xuICAgIH0pKSgpO1xuICB9LFxuICBsb2dvdXRSZXF1ZXN0OiBmdW5jdGlvbiBsb2dvdXRSZXF1ZXN0KCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmxvZ291dCgpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50O1xuXG4gICAgICAgICAgICAgIGlmICghKHJlcyBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5pc0xvZ291dCkge1xuICAgICAgICAgICAgICAgICAgdG9rZW5zU3RvcmFnZS5jbGVhclRva2VuRnJvbVN0b3JhZ2UoKTtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhTdG9yZS5pc0F1dGggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTIpO1xuICAgIH0pKSgpO1xuICB9LFxuICBhdXRoUmVxdWVzdDogZnVuY3Rpb24gYXV0aFJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0Mykge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7XG4gICAgICAgICAgICAgIHJldHVybiBhcGkudXNlckNoZWNrQXV0aCgpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50O1xuXG4gICAgICAgICAgICAgIGlmICghKHJlcyBpbnN0YW5jZW9mIEVycm9yKSAmJiByZXMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmlzQXV0aCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aFN0b3JlLmlzQXV0aCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdG9rZW5zU3RvcmFnZS5jbGVhclRva2VuRnJvbVN0b3JhZ2UoKTtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhTdG9yZS5pc0F1dGggPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTMpO1xuICAgIH0pKSgpO1xuICB9XG59KTsiLCJleHBvcnQgZnVuY3Rpb24gbWFwQ2F0ZWdvcmllcyhjYXRlZ29yaWVzKSB7XG4gIHZhciBub3JtYWxpemVkID0ge1xuICAgIGl0ZW1zOiB7fSxcbiAgICBsaXN0OiBbXVxuICB9O1xuICBjYXRlZ29yaWVzLmZvckVhY2goZnVuY3Rpb24gKGNhdGVnb3J5KSB7XG4gICAgbm9ybWFsaXplZC5pdGVtc1tjYXRlZ29yeS5pZF0gPSB7XG4gICAgICBpZDogY2F0ZWdvcnkuaWQsXG4gICAgICB0aXRsZTogY2F0ZWdvcnkudGl0bGVcbiAgICB9O1xuICAgIG5vcm1hbGl6ZWQubGlzdC5wdXNoKGNhdGVnb3J5LmlkKTtcbiAgfSk7XG4gIHJldHVybiBub3JtYWxpemVkO1xufSIsImltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCI7XG5pbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIjtcbmltcG9ydCB7IG1ha2VBdXRvT2JzZXJ2YWJsZSwgcnVuSW5BY3Rpb24gfSBmcm9tIFwibW9ieFwiO1xuaW1wb3J0IHsgbWFwQ2F0ZWdvcmllcyB9IGZyb20gXCIuLi9saWJzL21hcENhdGVnb3JpZXNcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9hcGlcIjtcbmV4cG9ydCB2YXIgY2F0ZWdvcmllc1N0b3JlID0gbWFrZUF1dG9PYnNlcnZhYmxlKHtcbiAgY2F0ZWdvcmllczogbnVsbCxcbiAgZ2V0QWxsQ2F0ZWdvcmllczogZnVuY3Rpb24gZ2V0QWxsQ2F0ZWdvcmllcygpIHtcbiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXRBbGxDYXRlZ29yaWVzKCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICBpZiAoIShyZXMgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcmllcyA9IG1hcENhdGVnb3JpZXMocmVzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yaWVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUpO1xuICAgIH0pKSgpO1xuICB9XG59KTsiLCJpbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvclwiO1xuaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSBcIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yXCI7XG5pbXBvcnQgeyBtYWtlQXV0b09ic2VydmFibGUsIHJ1bkluQWN0aW9uIH0gZnJvbSBcIm1vYnhcIjtcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9hcGlcIjtcbmltcG9ydCB7IGNhdGVnb3JpZXNTdG9yZSB9IGZyb20gXCIuLi9zdG9yZS9jYXRlZ29yaWVzU3RvcmVcIjtcbmV4cG9ydCB2YXIgc2V0dXBTdG9yZSA9IG1ha2VBdXRvT2JzZXJ2YWJsZSh7XG4gIGNhdGVnb3J5VGl0bGU6ICcnLFxuICBzZXRDYXRlZ29yeVRpdGxlOiBmdW5jdGlvbiBzZXRDYXRlZ29yeVRpdGxlKHRpdGxlKSB7XG4gICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHNldHVwU3RvcmUuY2F0ZWdvcnlUaXRsZSA9IHRpdGxlO1xuICAgIH0pO1xuICB9LFxuICBhZGRDYXRlZ29yeUl0ZW06IGZ1bmN0aW9uIGFkZENhdGVnb3J5SXRlbSgpIHtcbiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5hZGRDYXRlZ29yeUl0ZW0oc2V0dXBTdG9yZS5jYXRlZ29yeVRpdGxlKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50O1xuXG4gICAgICAgICAgICAgIGlmICghKHJlcyBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3JpZXMuaXRlbXNbcmVzLmRhdGEuaWRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXMuZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogc2V0dXBTdG9yZS5jYXRlZ29yeVRpdGxlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yaWVzLmxpc3QucHVzaChyZXMuZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwU3RvcmUuY2F0ZWdvcnlUaXRsZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUpO1xuICAgIH0pKSgpO1xuICB9LFxuICB1cGRhdGVDYXRlZ29yeUl0ZW06IGZ1bmN0aW9uIHVwZGF0ZUNhdGVnb3J5SXRlbSgpIHtcbiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7XG4gICAgICB2YXIgcmVzO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS51cGRhdGVDYXRlZ29yeUl0ZW0oc2V0dXBTdG9yZS5lZGl0V2luZG93LmlkLCBzZXR1cFN0b3JlLmVkaXRXaW5kb3cudGl0bGUpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50O1xuXG4gICAgICAgICAgICAgIGlmICghKHJlcyBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3JpZXMuaXRlbXNbcmVzLmRhdGEuaWRdLnRpdGxlID0gc2V0dXBTdG9yZS5lZGl0V2luZG93LnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICBzZXR1cFN0b3JlLnNldEVkaXRXaW5kb3coe1xuICAgICAgICAgICAgICAgICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMik7XG4gICAgfSkpKCk7XG4gIH0sXG4gIGRlbGV0ZUNhdGVnb3J5SXRlbTogZnVuY3Rpb24gZGVsZXRlQ2F0ZWdvcnlJdGVtKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmRlbGV0ZUNhdGVnb3J5SXRlbShzZXR1cFN0b3JlLmVkaXRXaW5kb3cuaWQpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50O1xuXG4gICAgICAgICAgICAgIGlmICghKHJlcyBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEuaWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBjYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcmllcy5saXN0LmluZGV4T2YocmVzLmRhdGEuaWQpO1xuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcmllcy5saXN0LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yaWVzLml0ZW1zW3Jlcy5kYXRhLmlkXTtcbiAgICAgICAgICAgICAgICAgICAgc2V0dXBTdG9yZS5zZXRFZGl0V2luZG93KHtcbiAgICAgICAgICAgICAgICAgICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTMpO1xuICAgIH0pKSgpO1xuICB9LFxuICBlZGl0V2luZG93OiB7XG4gICAgaXNPcGVuOiBmYWxzZSxcbiAgICBpZDogbnVsbCxcbiAgICB0aXRsZTogJydcbiAgfSxcbiAgc2V0RWRpdFdpbmRvdzogZnVuY3Rpb24gc2V0RWRpdFdpbmRvdyhfcmVmNCkge1xuICAgIHZhciBpc09wZW4gPSBfcmVmNC5pc09wZW4sXG4gICAgICAgIGlkID0gX3JlZjQuaWQsXG4gICAgICAgIHRpdGxlID0gX3JlZjQudGl0bGU7XG4gICAgaWYgKGlzT3BlbiA9PT0gdW5kZWZpbmVkKSBpc09wZW4gPSBzZXR1cFN0b3JlLmVkaXRXaW5kb3cuaXNPcGVuO1xuICAgIGlmIChpZCA9PT0gdW5kZWZpbmVkKSBpZCA9IHNldHVwU3RvcmUuZWRpdFdpbmRvdy5pZDtcbiAgICBpZiAodGl0bGUgPT09IHVuZGVmaW5lZCkgdGl0bGUgPSBzZXR1cFN0b3JlLmVkaXRXaW5kb3cudGl0bGU7XG4gICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgc2V0dXBTdG9yZS5lZGl0V2luZG93ID0ge1xuICAgICAgICBpc09wZW46IGlzT3BlbixcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgc2VhcmNoU3RvcmUgfSBmcm9tIFwiLi9zZWFyY2hTdG9yZVwiO1xuaW1wb3J0IHsgYXV0aFN0b3JlIH0gZnJvbSBcIi4vYXV0aFN0b3JlXCI7XG5pbXBvcnQgeyBzZXR1cFN0b3JlIH0gZnJvbSBcIi4vc2V0dXBTdG9yZVwiO1xuaW1wb3J0IHsgY2F0ZWdvcmllc1N0b3JlIH0gZnJvbSBcIi4vY2F0ZWdvcmllc1N0b3JlXCI7XG5pbXBvcnQgeyBjYXRhbG9nU3RvcmUgfSBmcm9tIFwiLi9jYXRhbG9nU3RvcmVcIjtcbnZhciBzdGF0ZSA9IHtcbiAgc2VhcmNoU3RvcmU6IHNlYXJjaFN0b3JlLFxuICBhdXRoU3RvcmU6IGF1dGhTdG9yZSxcbiAgc2V0dXBTdG9yZTogc2V0dXBTdG9yZSxcbiAgY2F0ZWdvcmllc1N0b3JlOiBjYXRlZ29yaWVzU3RvcmUsXG4gIGNhdGFsb2dTdG9yZTogY2F0YWxvZ1N0b3JlXG59O1xuZXhwb3J0IHZhciBzdG9yZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KHN0YXRlKTtcbmV4cG9ydCB2YXIgTW9iWFByb3ZpZGVyID0gZnVuY3Rpb24gTW9iWFByb3ZpZGVyKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KHN0b3JlLlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHN0YXRlXG4gIH0sIFwiIFwiLCBjaGlsZHJlbiwgXCIgXCIpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmV4cG9ydCB2YXIgTmF2QnV0dG9uID0gZnVuY3Rpb24gTmF2QnV0dG9uKF9yZWYpIHtcbiAgdmFyIG5hbWUgPSBfcmVmLm5hbWUsXG4gICAgICBjYWxsYmFjayA9IF9yZWYuY2FsbGJhY2s7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcIm5hdi1idXR0b25cIlxuICB9LCBuYW1lKTtcbn07IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5leHBvcnQgdmFyIE5hdkJ1dHRvblNlYXJjaCA9IGZ1bmN0aW9uIE5hdkJ1dHRvblNlYXJjaCgpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBjbGFzc05hbWU6IFwibmF2LWJ1dHRvbi1zZWFyY2hcIlxuICB9LCBcIlxcdTA0MUZcXHUwNDNFXFx1MDQzOFxcdTA0NDFcXHUwNDNBXCIpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSBcIi4uLy4uL3N0b3JlXCI7XG5pbXBvcnQgeyBOYXZMaW5rIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmltcG9ydCB7IE5hdkJ1dHRvbiB9IGZyb20gXCIuLi9uYXZCdXR0b25cIjtcbmltcG9ydCB7IE5hdkJ1dHRvblNlYXJjaCB9IGZyb20gXCIuLi9uYXZCdXR0b25TZWFyY2hcIjtcbmltcG9ydCB7IHVzZUxvY2F0aW9uIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmV4cG9ydCB2YXIgTmF2ID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JGF1dCA9IF9SZWFjdCR1c2VDb250ZXh0LmF1dGhTdG9yZSxcbiAgICAgIGlzQXV0aCA9IF9SZWFjdCR1c2VDb250ZXh0JGF1dC5pc0F1dGgsXG4gICAgICBsb2dvdXRSZXF1ZXN0ID0gX1JlYWN0JHVzZUNvbnRleHQkYXV0LmxvZ291dFJlcXVlc3QsXG4gICAgICBzZXRFZGl0V2luZG93ID0gX1JlYWN0JHVzZUNvbnRleHQuY2F0YWxvZ1N0b3JlLnNldEVkaXRXaW5kb3c7XG5cbiAgdmFyIGxvY2F0aW9uID0gdXNlTG9jYXRpb24oKS5wYXRobmFtZTtcblxuICB2YXIgcmVuZGVyTWVudSA9IGZ1bmN0aW9uIHJlbmRlck1lbnUoKSB7XG4gICAgaWYgKGlzQXV0aCkge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBsb2NhdGlvbiA9PT0gJy8nICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5hdkJ1dHRvbiwge1xuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICAgICAgcmV0dXJuIHNldEVkaXRXaW5kb3coe1xuICAgICAgICAgICAgaXNPcGVuOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG5hbWU6ICfQlNC+0LHQsNCy0LjRgtGMJ1xuICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5hdkxpbmssIHtcbiAgICAgICAgYWN0aXZlQ2xhc3NOYW1lOiBcIm5hdi1saW5rX2FjdGl2ZVwiLFxuICAgICAgICBjbGFzc05hbWU6IFwibmF2LWxpbmtcIixcbiAgICAgICAgdG86ICcvc2V0dXAvJ1xuICAgICAgfSwgXCJcXHUwNDFEXFx1MDQzMFxcdTA0NDFcXHUwNDQyXFx1MDQ0MFxcdTA0M0VcXHUwNDM5XFx1MDQzQVxcdTA0MzhcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5hdkJ1dHRvbiwge1xuICAgICAgICBjYWxsYmFjazogbG9nb3V0UmVxdWVzdCxcbiAgICAgICAgbmFtZTogJ9CS0YvRhdC+0LQnXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5hdkxpbmssIHtcbiAgICAgIGFjdGl2ZUNsYXNzTmFtZTogXCJuYXYtbGlua19hY3RpdmVcIixcbiAgICAgIGNsYXNzTmFtZTogXCJuYXYtbGlua1wiLFxuICAgICAgdG86ICcvYXV0aC8nXG4gICAgfSwgXCJcXHUwNDEyXFx1MDQzRVxcdTA0MzlcXHUwNDQyXFx1MDQzOFwiKTtcbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJuYXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJuYXZcIlxuICB9LCBsb2NhdGlvbiA9PT0gJy8nID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2QnV0dG9uU2VhcmNoLCBudWxsKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5hdkxpbmssIHtcbiAgICBjbGFzc05hbWU6IFwibmF2LWxpbmstc2VhcmNoXCIsXG4gICAgdG86ICcvJ1xuICB9LCBcIlxcdTA0MUZcXHUwNDNFXFx1MDQzOFxcdTA0NDFcXHUwNDNBXCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5hdi13cmFwXCJcbiAgfSwgcmVuZGVyTWVudSgpKSk7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmV4cG9ydCB2YXIgQ2F0ZWdvcmllc0FkZEJ1dHRvbiA9IGZ1bmN0aW9uIENhdGVnb3JpZXNBZGRCdXR0b24oX3JlZikge1xuICB2YXIgY2FsbGJhY2sgPSBfcmVmLmNhbGxiYWNrO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJjYXRlZ29yeXMtYWRkLWJ1dHRvblwiXG4gIH0sIFwiXFx1MDQxQVxcdTA0MzBcXHUwNDQyXFx1MDQzNVxcdTA0MzNcXHUwNDNFXFx1MDQ0MFxcdTA0MzhcXHUwNDM4XCIpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmV4cG9ydCB2YXIgQ2F0ZWdvcmllc0l0ZW0gPSAvKiNfX1BVUkVfXyovUmVhY3QubWVtbyhmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgdGl0bGUgPSBfcmVmLnRpdGxlLFxuICAgICAgZGVsQ2FsbGJhY2sgPSBfcmVmLmRlbENhbGxiYWNrO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhdGVnb3J5LWl0ZW1cIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhdGVnb3J5LWl0ZW1fX3RpdGxlXCJcbiAgfSwgdGl0bGUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0ZWdvcnktaXRlbV9faW5wdXRcIixcbiAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgbmFtZTogXCJjYXRlZ29yeV9pdGVtXCJcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIGRlbENhbGxiYWNrKCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwiY2F0ZWdvcnktaXRlbV9fY2xvc2VcIlxuICB9LCBcIiBcIikpO1xufSwgZnVuY3Rpb24gKHByZXZQcm9wcywgbmV4dFByb3BzKSB7XG4gIGlmIChwcmV2UHJvcHMudGl0bGUgPT09IG5leHRQcm9wcy50aXRsZSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn0pOyIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmV4cG9ydCB2YXIgU2VsZWN0Q2F0ZWdvcmllc0l0ZW0gPSAvKiNfX1BVUkVfXyovUmVhY3QubWVtbyhmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgdGl0bGUgPSBfcmVmLnRpdGxlLFxuICAgICAgaXNBY3RpdmUgPSBfcmVmLmlzQWN0aXZlLFxuICAgICAgYWRkQ2FsbGJhY2sgPSBfcmVmLmFkZENhbGxiYWNrLFxuICAgICAgZGVsQ2FsbGJhY2sgPSBfcmVmLmRlbENhbGxiYWNrO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZShpc0FjdGl2ZSksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIGNoZWNrZWQgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0Q2hlY2tlZCA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIGNoZWNrID0gZnVuY3Rpb24gY2hlY2soaXNDaGVja2VkKSB7XG4gICAgc2V0Q2hlY2tlZChpc0NoZWNrZWQpO1xuICAgIGlzQ2hlY2tlZCA/IGFkZENhbGxiYWNrKCkgOiBkZWxDYWxsYmFjaygpO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcbiAgICBjbGFzc05hbWU6IFwic2VsZWN0LWNhdGVnb3J5LWl0ZW1cIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICBjbGFzc05hbWU6IFwic2VsZWN0LWNhdGVnb3J5LWl0ZW1fX2lucHV0XCIsXG4gICAgbmFtZTogXCJjYXRlZ29yeV9pdGVtXCIsXG4gICAgdHlwZTogXCJjaGVja2JveFwiLFxuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHtcbiAgICAgIHJldHVybiBjaGVjayghY2hlY2tlZCk7XG4gICAgfSxcbiAgICBjaGVja2VkOiBjaGVja2VkXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZWxlY3QtY2F0ZWdvcnktaXRlbV9fdGl0bGVcIlxuICB9LCB0aXRsZSkpO1xufSwgZnVuY3Rpb24gKHByZXZQcm9wcywgbmV4dFByb3BzKSB7XG4gIGlmIChwcmV2UHJvcHMuaXNBY3RpdmUgPT09IG5leHRQcm9wcy5pc0FjdGl2ZSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuZXhwb3J0IHZhciBQb3B1cCA9IGZ1bmN0aW9uIFBvcHVwKF9yZWYpIHtcbiAgdmFyIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgY2xvc2VDYWxsYmFjayA9IF9yZWYuY2xvc2VDYWxsYmFjayxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwicG9wdXAtd3JhcCBcIi5jb25jYXQoY2xhc3NOYW1lKVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInBvcHVwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJwb3B1cF9fY2xvc2Utd3JhcFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIGNsb3NlQ2FsbGJhY2soKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJwb3B1cF9fY2xvc2VcIlxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwicG9wdXBfX2NvbnRlbnRcIlxuICB9LCBjaGlsZHJlbikpKTtcbn07IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uL3N0b3JlJztcbmltcG9ydCB7IFNlbGVjdENhdGVnb3JpZXNJdGVtIH0gZnJvbSAnLi4vc2VsZWN0Q2F0ZWdvcmllc0l0ZW0nO1xuaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuLi9wb3B1cCc7XG5leHBvcnQgdmFyIFNlbGVjdENhdGVnb3JpZXMgPSBvYnNlcnZlcihmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgc2VsZWN0ZGVkQ2F0ZWdvcmllcyA9IF9yZWYuc2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICAgIGRlbFNlbGVjdGRlZENhdGVnb3JpZXMgPSBfcmVmLmRlbFNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgICBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzID0gX3JlZi5hZGRTZWxlY3RkZWRDYXRlZ29yaWVzLFxuICAgICAgc2V0SXNPcGVuID0gX3JlZi5zZXRJc09wZW47XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChzdG9yZSksXG4gICAgICBjYXRlZ29yaWVzID0gX1JlYWN0JHVzZUNvbnRleHQuY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3JpZXM7XG5cbiAgdmFyIHJlbmRlckNhdGVnb3JpZXMgPSBmdW5jdGlvbiByZW5kZXJDYXRlZ29yaWVzKCkge1xuICAgIHZhciBpc0FjdGl2ZTtcbiAgICByZXR1cm4gY2F0ZWdvcmllcy5saXN0Lm1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgIGlmIChjYXRlZ29yaWVzLmxpc3QuaW5kZXhPZihpZCkgIT09IC0xKSB7XG4gICAgICAgIHNlbGVjdGRlZENhdGVnb3JpZXMuaW5kZXhPZihpZCkgIT09IC0xID8gaXNBY3RpdmUgPSB0cnVlIDogaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlbGVjdENhdGVnb3JpZXNJdGVtLCB7XG4gICAgICAgICAga2V5OiBpZCxcbiAgICAgICAgICBpc0FjdGl2ZTogaXNBY3RpdmUsXG4gICAgICAgICAgdGl0bGU6IFwiXCIuY29uY2F0KGNhdGVnb3JpZXMuaXRlbXNbaWRdLnRpdGxlKSxcbiAgICAgICAgICBhZGRDYWxsYmFjazogZnVuY3Rpb24gYWRkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllcyhpZCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWxDYWxsYmFjazogZnVuY3Rpb24gZGVsQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllcyhpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wdXAsIHtcbiAgICBjbGFzc05hbWU6IFwiXCIsXG4gICAgY2xvc2VDYWxsYmFjazogZnVuY3Rpb24gY2xvc2VDYWxsYmFjaygpIHtcbiAgICAgIHJldHVybiBzZXRJc09wZW4oZmFsc2UpO1xuICAgIH1cbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZWxlY3QtY2F0ZWdvcnktaGVhZGVyXCJcbiAgfSwgXCJcXHUwNDFBXFx1MDQzMFxcdTA0NDJcXHUwNDM1XFx1MDQzM1xcdTA0M0VcXHUwNDQwXFx1MDQzOFxcdTA0MzhcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwic2VsZWN0LWNhdGVnb3J5IHNlbGVjdC1jYXRlZ29yeV9ub25lXCJcbiAgfSwgcmVuZGVyQ2F0ZWdvcmllcygpKSk7XG59KTsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uL3N0b3JlJztcbmltcG9ydCB7IENhdGVnb3JpZXNBZGRCdXR0b24gfSBmcm9tIFwiLi4vY2F0ZWdvcmllc0FkZEJ1dHRvblwiO1xuaW1wb3J0IHsgQ2F0ZWdvcmllc0l0ZW0gfSBmcm9tIFwiLi4vY2F0ZWdvcmllc0l0ZW1cIjtcbmltcG9ydCB7IFNlbGVjdENhdGVnb3JpZXMgfSBmcm9tIFwiLi4vc2VsZWN0Q2F0ZWdvcmllc1wiO1xuZXhwb3J0IHZhciBDYXRlZ29yaWVzID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKF9yZWYpIHtcbiAgdmFyIHNlbGVjdGRlZENhdGVnb3JpZXMgPSBfcmVmLnNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgICBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzID0gX3JlZi5kZWxTZWxlY3RkZWRDYXRlZ29yaWVzLFxuICAgICAgYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllcyA9IF9yZWYuYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllcztcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JGNhdCA9IF9SZWFjdCR1c2VDb250ZXh0LmNhdGVnb3JpZXNTdG9yZSxcbiAgICAgIGNhdGVnb3JpZXMgPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQuY2F0ZWdvcmllcyxcbiAgICAgIGdldEFsbENhdGVnb3JpZXMgPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQuZ2V0QWxsQ2F0ZWdvcmllcztcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBpc09wZW4gPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0SXNPcGVuID0gX3VzZVN0YXRlMlsxXTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXRlZ29yaWVzID09PSBudWxsKSBnZXRBbGxDYXRlZ29yaWVzKCk7XG4gIH0sIFtdKTtcbiAgaWYgKGNhdGVnb3JpZXMgPT09IG51bGwpIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBcIkxvYWRpbmdcIik7XG5cbiAgdmFyIHJlbmRlckNhdGVnb3JpZXMgPSBmdW5jdGlvbiByZW5kZXJDYXRlZ29yaWVzKCkge1xuICAgIHJldHVybiBzZWxlY3RkZWRDYXRlZ29yaWVzLm1hcChmdW5jdGlvbiAoY2F0ZWdvcnlJZCkge1xuICAgICAgaWYgKGNhdGVnb3JpZXMubGlzdC5pbmRleE9mKGNhdGVnb3J5SWQpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ2F0ZWdvcmllc0l0ZW0sIHtcbiAgICAgICAgICBrZXk6IGNhdGVnb3JpZXMuaXRlbXNbY2F0ZWdvcnlJZF0uaWQsXG4gICAgICAgICAgdGl0bGU6IGNhdGVnb3JpZXMuaXRlbXNbY2F0ZWdvcnlJZF0udGl0bGUsXG4gICAgICAgICAgZGVsQ2FsbGJhY2s6IGZ1bmN0aW9uIGRlbENhbGxiYWNrKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlbFNlbGVjdGRlZENhdGVnb3JpZXMoY2F0ZWdvcnlJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0ZWdvcnlzXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ2F0ZWdvcmllc0FkZEJ1dHRvbiwge1xuICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgIHJldHVybiBzZXRJc09wZW4odHJ1ZSk7XG4gICAgfVxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRlZ29yeXMtaXRlbXMtd3JhcFwiXG4gIH0sIHJlbmRlckNhdGVnb3JpZXMoKSkpLCBpc09wZW4gJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0Q2F0ZWdvcmllcywge1xuICAgIHNlbGVjdGRlZENhdGVnb3JpZXM6IHNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllczogYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzOiBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzLFxuICAgIHNldElzT3Blbjogc2V0SXNPcGVuXG4gIH0pKTtcbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICcuLi8uLi9zdG9yZSc7XG5leHBvcnQgdmFyIFNlYXJjaElucHV0ID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JHNlYSA9IF9SZWFjdCR1c2VDb250ZXh0LnNlYXJjaFN0b3JlLmZvcm0sXG4gICAgICBzZWFyY2hTdHJpbmcgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEuc2VhcmNoU3RyaW5nLFxuICAgICAgc2V0U2VhcmNoU3RyaW5nID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhLnNldFNlYXJjaFN0cmluZztcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHJldHVybiBzZXRTZWFyY2hTdHJpbmcoZS50YXJnZXQudmFsdWUpO1xuICAgIH0sXG4gICAgdmFsdWU6IHNlYXJjaFN0cmluZyxcbiAgICBjbGFzc05hbWU6IFwic2VhcmNoLWZvcm1fX2lucHV0XCIsXG4gICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgbmFtZTogXCJ0aXRsZVwiLFxuICAgIHBsYWNlaG9sZGVyOiBcIlxcdTA0MURcXHUwNDMwXFx1MDQzN1xcdTA0MzJcXHUwNDMwXFx1MDQzRFxcdTA0MzhcXHUwNDM1XCJcbiAgfSk7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICcuLi8uLi9zdG9yZSc7XG5pbXBvcnQgeyBDYXRlZ29yaWVzIH0gZnJvbSBcIi4uL2NhdGVnb3JpZXNcIjtcbmltcG9ydCB7IHVzZUhpc3RvcnksIHVzZUxvY2F0aW9uIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmltcG9ydCB7IFNlYXJjaElucHV0IH0gZnJvbSBcIi4uL3NlYXJjaElucHV0XCI7XG5leHBvcnQgdmFyIFNlYXJjaEZvcm0gPSBvYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoc3RvcmUpLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkc2VhID0gX1JlYWN0JHVzZUNvbnRleHQuc2VhcmNoU3RvcmUsXG4gICAgICBmaW5kID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhLmZpbmQsXG4gICAgICBzZXRUb3RhbFBhZ2VzID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhLnNldFRvdGFsUGFnZXMsXG4gICAgICBzZXRSZXF1ZXN0UGFyYW1zID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhLnNldFJlcXVlc3RQYXJhbXMsXG4gICAgICBzZXRSZXF1ZXN0UGFyYW1zRnJvbUJvd3NlclNlYXJjaFN0cmluZyA9IF9SZWFjdCR1c2VDb250ZXh0JHNlYS5zZXRSZXF1ZXN0UGFyYW1zRnJvbUJvd3NlclNlYXJjaFN0cmluZyxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JHNlYTIgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEuZm9ybSxcbiAgICAgIHNlbGVjdGRlZENhdGVnb3JpZXMgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEyLnNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgICBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhMi5hZGRTZWxlY3RkZWRDYXRlZ29yaWVzLFxuICAgICAgZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllcyA9IF9SZWFjdCR1c2VDb250ZXh0JHNlYTIuZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICAgIHNlYXJjaFN0cmluZyA9IF9SZWFjdCR1c2VDb250ZXh0JHNlYS5yZXF1ZXN0LnNlYXJjaFN0cmluZztcblxuICB2YXIgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKTtcbiAgdmFyIGxvY2F0aW9uID0gdXNlTG9jYXRpb24oKTtcblxuICB2YXIgb25DbGlja0ZpbmQgPSBmdW5jdGlvbiBvbkNsaWNrRmluZCgpIHtcbiAgICBzZXRSZXF1ZXN0UGFyYW1zKCk7XG4gICAgdmFyIHVybCA9IGVuY29kZVVSSShcIi8/c2VhcmNoPVwiLmNvbmNhdChzZWFyY2hTdHJpbmcsIFwiJmNhdGVnb3JpZXM9XCIpLmNvbmNhdChzZWxlY3RkZWRDYXRlZ29yaWVzKSk7XG4gICAgaGlzdG9yeS5wdXNoKHVybCk7XG4gICAgc2V0VG90YWxQYWdlcygpO1xuICAgIGZpbmQoKTtcbiAgfTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2F0aW9uLnNlYXJjaCk7XG4gICAgdmFyIHNlYXJjaFN0cmluZyA9ICcnLFxuICAgICAgICBjYXRlZ29yaWVzID0gJyc7XG4gICAgaWYgKHBhcmFtcy5oYXMoJ3NlYXJjaCcpKSBzZWFyY2hTdHJpbmcgPSBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zLmdldCgnc2VhcmNoJykpO1xuICAgIGlmIChwYXJhbXMuaGFzKCdjYXRlZ29yaWVzJykpIGNhdGVnb3JpZXMgPSBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zLmdldCgnY2F0ZWdvcmllcycpKTtcbiAgICB2YXIgY2F0ZWdvcmllc0FyciA9IGNhdGVnb3JpZXMubGVuZ3RoID4gMCA/IGNhdGVnb3JpZXMuc3BsaXQoJywnKS5tYXAoTnVtYmVyKSA6ICcnO1xuICAgIHNldFJlcXVlc3RQYXJhbXNGcm9tQm93c2VyU2VhcmNoU3RyaW5nKHNlYXJjaFN0cmluZywgY2F0ZWdvcmllc0Fycik7XG4gICAgc2V0VG90YWxQYWdlcygpO1xuICAgIGZpbmQoKTtcbiAgfSwgW10pO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZWFyY2gtZm9ybS13cmFwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIsIHtcbiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZSkge1xuICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJzZWFyY2gtZm9ybVwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwic2VhcmNoLWZvcm1fX2lucHV0LXdyYXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWFyY2hJbnB1dCwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIG9uQ2xpY2tGaW5kKCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwic2VhcmNoLWZvcm1fX2J1dHRvblwiLFxuICAgIHR5cGU6IFwic3VibWl0XCJcbiAgfSwgXCJcXHUwNDFEXFx1MDQzMFxcdTA0MzlcXHUwNDQyXFx1MDQzOFwiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ2F0ZWdvcmllcywge1xuICAgIHNlbGVjdGRlZENhdGVnb3JpZXM6IHNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllczogYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzOiBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzXG4gIH0pKSkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gXCIuLi8uLi9zdG9yZVwiO1xuaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi4vcG9wdXBcIjtcbmltcG9ydCB7IENhdGVnb3JpZXMgfSBmcm9tIFwiLi4vY2F0ZWdvcmllc1wiO1xuZXhwb3J0IHZhciBFZGl0Q2F0YWxvZ0l0ZW0gPSBvYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoc3RvcmUpLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkY2F0ID0gX1JlYWN0JHVzZUNvbnRleHQuY2F0YWxvZ1N0b3JlLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkY2F0MiA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5lZGl0V2luZG93LFxuICAgICAgaXNPcGVuID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0Mi5pc09wZW4sXG4gICAgICB0aXRsZSA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdDIudGl0bGUsXG4gICAgICBhbm9ucyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdDIuYW5vbnMsXG4gICAgICByZWxhdGVkQ2F0ZWdvcmllcyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdDIucmVsYXRlZENhdGVnb3JpZXMsXG4gICAgICBwcmV2aWV3SW1nID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0Mi5wcmV2aWV3SW1nLFxuICAgICAgc2F2ZUNhdGFsb2dJdGVtID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0LnNhdmVDYXRhbG9nSXRlbSxcbiAgICAgIHNldEVkaXRXaW5kb3cgPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQuc2V0RWRpdFdpbmRvdyxcbiAgICAgIGFkZFJlbGF0ZWRDYXRlZ29yaWVzID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0LmFkZFJlbGF0ZWRDYXRlZ29yaWVzLFxuICAgICAgZGVsUmVsYXRlZENhdGVnb3JpZXMgPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQuZGVsUmVsYXRlZENhdGVnb3JpZXM7XG5cbiAgdmFyIGZpbGVJbnB1dCA9IFJlYWN0LnVzZVJlZihudWxsKTtcblxuICB2YXIgaGFuZGxlSW1nID0gZnVuY3Rpb24gaGFuZGxlSW1nKGlucHV0KSB7XG4gICAgc2V0RWRpdFdpbmRvdyh7XG4gICAgICBpbWc6IGlucHV0LmZpbGVzWzBdLFxuICAgICAgcHJldmlld0ltZzogVVJMLmNyZWF0ZU9iamVjdFVSTChpbnB1dC5maWxlc1swXSlcbiAgICB9KTtcbiAgICBmaWxlSW5wdXQuY3VycmVudC52YWx1ZSA9IG51bGw7XG4gIH07XG5cbiAgcmV0dXJuIGlzT3BlbiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb3B1cCwge1xuICAgIGNsYXNzTmFtZTogXCJcIixcbiAgICBjbG9zZUNhbGxiYWNrOiBmdW5jdGlvbiBjbG9zZUNhbGxiYWNrKCkge1xuICAgICAgcmV0dXJuIHNldEVkaXRXaW5kb3coe1xuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLCB7XG4gICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KGUpIHtcbiAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm1fX2ltZy13cmFwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm1fX2lucHV0LXRpdGxlXCJcbiAgfSwgXCJcXHUwNDE4XFx1MDQzN1xcdTA0M0VcXHUwNDMxXFx1MDQ0MFxcdTA0MzBcXHUwNDM2XFx1MDQzNVxcdTA0M0RcXHUwNDM4XFx1MDQzNVwiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvbiBlZGl0LWNhdC1pdGVtLWZvcm1fX2ltZy1idXR0b25cIlxuICB9LCBcIlxcdTA0MUVcXHUwNDQyXFx1MDQzQVxcdTA0NDBcXHUwNDRCXFx1MDQ0MlxcdTA0NENcIiwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgcmVmOiBmaWxlSW5wdXQsXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHJldHVybiBoYW5kbGVJbWcoZS50YXJnZXQpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImVkaXQtY2F0LWl0ZW0tZm9ybV9faW1nLWlucHV0XCIsXG4gICAgYWNjZXB0OiBcImltYWdlL3gtcG5nLGltYWdlL2dpZixpbWFnZS9qcGVnXCIsXG4gICAgdHlwZTogXCJmaWxlXCIsXG4gICAgbmFtZTogXCJpbWFnZVwiXG4gIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtX19pbWdcIixcbiAgICBzdHlsZToge1xuICAgICAgYmFja2dyb3VuZEltYWdlOiBcInVybChcIi5jb25jYXQocHJldmlld0ltZywgXCIpXCIpXG4gICAgfVxuICB9LCBwcmV2aWV3SW1nICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIHNldEVkaXRXaW5kb3coe1xuICAgICAgICBpbWc6ICcnLFxuICAgICAgICBwcmV2aWV3SW1nOiAnJ1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtLWRlbFwiXG4gIH0pKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtX19pbnB1dC13cmFwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm1fX2lucHV0LXRpdGxlXCJcbiAgfSwgXCJcXHUwNDE3XFx1MDQzMFxcdTA0MzNcXHUwNDNFXFx1MDQzQlxcdTA0M0VcXHUwNDMyXFx1MDQzRVxcdTA0M0FcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICByZXR1cm4gc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgIHRpdGxlOiBlLnRhcmdldC52YWx1ZVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWx1ZTogdGl0bGUsXG4gICAgY2xhc3NOYW1lOiBcImVkaXQtY2F0LWl0ZW0tZm9ybV9faW5wdXRcIixcbiAgICB0eXBlOiBcInRleHRcIixcbiAgICBuYW1lOiBcInRpdGxlXCJcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtX19pbnB1dC10aXRsZVwiXG4gIH0sIFwiXFx1MDQxRVxcdTA0M0ZcXHUwNDM4XFx1MDQ0MVxcdTA0MzBcXHUwNDNEXFx1MDQzOFxcdTA0MzVcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIiwge1xuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICByZXR1cm4gc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgIGFub25zOiBlLnRhcmdldC52YWx1ZVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWx1ZTogYW5vbnMsXG4gICAgY2xhc3NOYW1lOiBcImVkaXQtY2F0LWl0ZW0tZm9ybV9fdGV4dGFyZWFcIixcbiAgICBuYW1lOiBcImFub25zXCJcbiAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDYXRlZ29yaWVzLCB7XG4gICAgc2VsZWN0ZGVkQ2F0ZWdvcmllczogcmVsYXRlZENhdGVnb3JpZXMsXG4gICAgYWRkU2VsZWN0ZGVkQ2F0ZWdvcmllczogYWRkUmVsYXRlZENhdGVnb3JpZXMsXG4gICAgZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllczogZGVsUmVsYXRlZENhdGVnb3JpZXNcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtX19zdWJtaXQtd3JhcFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIHNhdmVDYXRhbG9nSXRlbSgpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvblwiXG4gIH0sIFwiXFx1MDQyMVxcdTA0M0VcXHUwNDQ1XFx1MDQ0MFxcdTA0MzBcXHUwNDNEXFx1MDQzOFxcdTA0NDJcXHUwNDRDXCIpKSkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5leHBvcnQgdmFyIEJ1dHRvbiA9IGZ1bmN0aW9uIEJ1dHRvbihfcmVmKSB7XG4gIHZhciBuYW1lID0gX3JlZi5uYW1lLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjYWxsYmFjayA9IF9yZWYuY2FsbGJhY2s7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvbiBcIi5jb25jYXQoY2xhc3NOYW1lKVxuICB9LCBuYW1lKTtcbn07IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5leHBvcnQgdmFyIENhdGFsb2dDYXRlZ29yeUl0ZW0gPSAvKiNfX1BVUkVfXyovUmVhY3QubWVtbyhmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgdGl0bGUgPSBfcmVmLnRpdGxlO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRhbG9nLWl0ZW1fX2NhdGVnb3J5LWl0ZW1cIlxuICB9LCB0aXRsZSk7XG59LCBmdW5jdGlvbiAocHJldlByb3BzLCBuZXh0UHJvcHMpIHtcbiAgaWYgKHByZXZQcm9wcy50aXRsZSA9PT0gbmV4dFByb3BzLnRpdGxlKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi4vYnV0dG9uXCI7XG5pbXBvcnQgeyBDYXRhbG9nQ2F0ZWdvcnlJdGVtIH0gZnJvbSBcIi4uL2NhdGFsb2dDYXRlZ29yeUl0ZW1cIjtcbmV4cG9ydCB2YXIgQ2F0YWxvZ0l0ZW0gPSAvKiNfX1BVUkVfXyovUmVhY3QubWVtbyhmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgaXNBdXRoID0gX3JlZi5pc0F1dGgsXG4gICAgICB0aXRsZSA9IF9yZWYudGl0bGUsXG4gICAgICBhbm9ucyA9IF9yZWYuYW5vbnMsXG4gICAgICBpbWFnZSA9IF9yZWYuaW1hZ2UsXG4gICAgICBjYXRlZ29yaWVzID0gX3JlZi5jYXRlZ29yaWVzLFxuICAgICAgZWRpdENhbGxiYWNrID0gX3JlZi5lZGl0Q2FsbGJhY2ssXG4gICAgICBkZWxDYWxsYmFjayA9IF9yZWYuZGVsQ2FsbGJhY2s7XG5cbiAgdmFyIHJlbmRlckNhdGVnb3JpZXMgPSBmdW5jdGlvbiByZW5kZXJDYXRlZ29yaWVzKCkge1xuICAgIHJldHVybiBjYXRlZ29yaWVzLm1hcChmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgIGlmIChjYXRlZ29yeS5pZCkge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ2F0YWxvZ0NhdGVnb3J5SXRlbSwge1xuICAgICAgICAgIHRpdGxlOiBjYXRlZ29yeS50aXRsZSxcbiAgICAgICAgICBrZXk6IGNhdGVnb3J5LmlkXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhdGFsb2ctaXRlbVwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0YWxvZy1pdGVtX19pbWdcIixcbiAgICBzdHlsZToge1xuICAgICAgYmFja2dyb3VuZEltYWdlOiBcInVybChcIi5jb25jYXQoaW1hZ2UgPyBwcm9jZXNzLmVudi5CQUNLRU5EX0hPU1QgKyBpbWFnZSA6ICcnLCBcIilcIilcbiAgICB9XG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhdGFsb2ctaXRlbV9fdHh0XCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRhbG9nLWl0ZW1fX2hlYWRlclwiXG4gIH0sIHRpdGxlKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRhbG9nLWl0ZW1fX2NhdGVnb3J5c1wiXG4gIH0sIHJlbmRlckNhdGVnb3JpZXMoKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0YWxvZy1pdGVtX19hbm9uc1wiXG4gIH0sIGFub25zKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0YWxvZy1pdGVtX19jdHJsLWJ1dHRvbnNcIlxuICB9LCBpc0F1dGggJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvbl9jYXRhbG9nLWl0ZW1cIixcbiAgICBuYW1lOiBcIlxcdTA0MjBcXHUwNDM1XFx1MDQzNFxcdTA0MzBcXHUwNDNBXFx1MDQ0MlxcdTA0MzhcXHUwNDQwXFx1MDQzRVxcdTA0MzJcXHUwNDMwXFx1MDQ0MlxcdTA0NENcIixcbiAgICBjYWxsYmFjazogZWRpdENhbGxiYWNrXG4gIH0pLCBpc0F1dGggJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvbl9jYXRhbG9nLWl0ZW1cIixcbiAgICBuYW1lOiBcIlxcdTA0MjNcXHUwNDM0XFx1MDQzMFxcdTA0M0JcXHUwNDM4XFx1MDQ0MlxcdTA0NENcIixcbiAgICBjYWxsYmFjazogZGVsQ2FsbGJhY2tcbiAgfSkpKTtcbn0sIGZ1bmN0aW9uIChwcmV2UHJvcHMsIG5leHRQcm9wcykge1xuICBpZiAocHJldlByb3BzLnRpdGxlID09PSBuZXh0UHJvcHMudGl0bGUgJiYgcHJldlByb3BzLmFub25zID09PSBuZXh0UHJvcHMuYW5vbnMgJiYgcHJldlByb3BzLmltYWdlID09PSBuZXh0UHJvcHMuaW1hZ2UgJiYgcHJldlByb3BzLmlzQXV0aCA9PT0gbmV4dFByb3BzLmlzQXV0aCAmJiBKU09OLnN0cmluZ2lmeShwcmV2UHJvcHMuY2F0ZWdvcmllcykgPT09IEpTT04uc3RyaW5naWZ5KG5leHRQcm9wcy5jYXRlZ29yaWVzKSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn0pOyIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwXCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9idXR0b25cIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUNvbmZpcm1hdGlvbkRpYWxvZyhfcmVmKSB7XG4gIHZhciBoZWFkZXIgPSBfcmVmLmhlYWRlcixcbiAgICAgIGNvbmZpcm1UaXRsZSA9IF9yZWYuY29uZmlybVRpdGxlLFxuICAgICAgY2FuY2VsVGl0bGUgPSBfcmVmLmNhbmNlbFRpdGxlLFxuICAgICAgb25Db25maXJtQ2xpY2sgPSBfcmVmLm9uQ29uZmlybUNsaWNrO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIGlzT3BlbiA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRJc09wZW4gPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBvbk9wZW4gPSBmdW5jdGlvbiBvbk9wZW4oKSB7XG4gICAgcmV0dXJuIHNldElzT3BlbighaXNPcGVuKTtcbiAgfTtcblxuICB2YXIgQ29uZmlybWF0aW9uRGlhbG9nID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBpc09wZW4gJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wdXAsIHtcbiAgICAgIGNsb3NlQ2FsbGJhY2s6IG9uT3BlbixcbiAgICAgIGNsYXNzTmFtZTogXCJwb3B1cC13cmFwX2RlbGV0ZS1jb25maXJtYXRpb25cIlxuICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJwb3B1cC1kZWxldGUtY29uZmlybWF0aW9uX19oZWFkZXJcIlxuICAgIH0sIGhlYWRlciksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJwb3B1cC1kZWxldGUtY29uZmlybWF0aW9uX19idXR0b25zLXdyYXBcIlxuICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwge1xuICAgICAgbmFtZTogY29uZmlybVRpdGxlLFxuICAgICAgY2xhc3NOYW1lOiAnJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuIG9uQ29uZmlybUNsaWNrKCk7XG4gICAgICB9XG4gICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwge1xuICAgICAgbmFtZTogY2FuY2VsVGl0bGUsXG4gICAgICBjbGFzc05hbWU6ICcnLFxuICAgICAgY2FsbGJhY2s6IG9uT3BlblxuICAgIH0pKSk7XG4gIH0sIFtpc09wZW5dKTtcbiAgcmV0dXJuIHtcbiAgICBvbk9wZW46IG9uT3BlbixcbiAgICBDb25maXJtYXRpb25EaWFsb2c6IENvbmZpcm1hdGlvbkRpYWxvZ1xuICB9O1xufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICcuLi8uLi9zdG9yZSc7XG5pbXBvcnQgeyBDYXRhbG9nSXRlbSB9IGZyb20gJy4uL2NhdGFsb2dJdGVtJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuLi9idXR0b25cIjtcbmltcG9ydCB1c2VDb25maXJtYXRpb25EaWFsb2cgZnJvbSAnLi4vLi4vaG9va3MvdXNlQ29uZmlybWF0aW9uRGlhbG9nJztcbmV4cG9ydCB2YXIgQ2F0YWxvZyA9IG9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChzdG9yZSksXG4gICAgICBpc0F1dGggPSBfUmVhY3QkdXNlQ29udGV4dC5hdXRoU3RvcmUuaXNBdXRoLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkY2F0ID0gX1JlYWN0JHVzZUNvbnRleHQuY2F0YWxvZ1N0b3JlLFxuICAgICAgY2F0YWxvZyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5jYXRhbG9nLFxuICAgICAgZGVsQ2F0YWxvZ0l0ZW0gPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQuZGVsQ2F0YWxvZ0l0ZW0sXG4gICAgICBzZXRFZGl0V2luZG93ID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0LnNldEVkaXRXaW5kb3csXG4gICAgICBzZXREZWxldGVJZCA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5zZXREZWxldGVJZCxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JHNlYSA9IF9SZWFjdCR1c2VDb250ZXh0LnNlYXJjaFN0b3JlLFxuICAgICAgY3VycmVudFBhZ2UgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEuY3VycmVudFBhZ2UsXG4gICAgICB0b3RhbFBhZ2VzID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhLnRvdGFsUGFnZXMsXG4gICAgICBmaW5kTmV4dFBhZ2UgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEuZmluZE5leHRQYWdlO1xuXG4gIHZhciBfdXNlQ29uZmlybWF0aW9uRGlhbG8gPSB1c2VDb25maXJtYXRpb25EaWFsb2coe1xuICAgIGhlYWRlcjogJ9Cj0LTQsNC70LjRgtGMPycsXG4gICAgY29uZmlybVRpdGxlOiAn0JTQsCcsXG4gICAgY2FuY2VsVGl0bGU6ICfQndC10YInLFxuICAgIG9uQ29uZmlybUNsaWNrOiBmdW5jdGlvbiBvbkNvbmZpcm1DbGljaygpIHtcbiAgICAgIHJldHVybiBjb25maXJtRGVsZXRlKCk7XG4gICAgfVxuICB9KSxcbiAgICAgIENvbmZpcm1hdGlvbkRpYWxvZyA9IF91c2VDb25maXJtYXRpb25EaWFsby5Db25maXJtYXRpb25EaWFsb2csXG4gICAgICBvbk9wZW4gPSBfdXNlQ29uZmlybWF0aW9uRGlhbG8ub25PcGVuO1xuXG4gIGlmIChjYXRhbG9nID09PSBudWxsKSByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgXCJMb2FkaW5nXCIpO1xuXG4gIHZhciBoYW5kbGVEZWxldGUgPSBmdW5jdGlvbiBoYW5kbGVEZWxldGUoaWQpIHtcbiAgICBzZXREZWxldGVJZChpZCk7XG4gICAgb25PcGVuKCk7XG4gIH07XG5cbiAgdmFyIGNvbmZpcm1EZWxldGUgPSBmdW5jdGlvbiBjb25maXJtRGVsZXRlKCkge1xuICAgIG9uT3BlbigpO1xuICAgIGRlbENhdGFsb2dJdGVtKCk7XG4gIH07XG5cbiAgdmFyIHJlbmRlckNhdGFsb2dJdGVtcyA9IGZ1bmN0aW9uIHJlbmRlckNhdGFsb2dJdGVtcygpIHtcbiAgICByZXR1cm4gY2F0YWxvZy5saXN0Lm1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDYXRhbG9nSXRlbSwge1xuICAgICAgICBrZXk6IGlkLFxuICAgICAgICBpc0F1dGg6IGlzQXV0aCxcbiAgICAgICAgdGl0bGU6IGNhdGFsb2cuaXRlbXNbaWRdLnRpdGxlLFxuICAgICAgICBhbm9uczogY2F0YWxvZy5pdGVtc1tpZF0uYW5vbnMsXG4gICAgICAgIGltYWdlOiBjYXRhbG9nLml0ZW1zW2lkXS5pbWFnZSxcbiAgICAgICAgY2F0ZWdvcmllczogY2F0YWxvZy5pdGVtc1tpZF0uY2F0ZWdvcmllcyxcbiAgICAgICAgZWRpdENhbGxiYWNrOiBmdW5jdGlvbiBlZGl0Q2FsbGJhY2soKSB7XG4gICAgICAgICAgcmV0dXJuIHNldEVkaXRXaW5kb3coe1xuICAgICAgICAgICAgaXNPcGVuOiB0cnVlLFxuICAgICAgICAgICAgY2F0YWxvZ0lkOiBpZCxcbiAgICAgICAgICAgIHRpdGxlOiBjYXRhbG9nLml0ZW1zW2lkXS50aXRsZSxcbiAgICAgICAgICAgIGFub25zOiBjYXRhbG9nLml0ZW1zW2lkXS5hbm9ucyxcbiAgICAgICAgICAgIGltZzogY2F0YWxvZy5pdGVtc1tpZF0uaW1hZ2UsXG4gICAgICAgICAgICBwcmV2aWV3SW1nOiBjYXRhbG9nLml0ZW1zW2lkXS5pbWFnZSxcbiAgICAgICAgICAgIHJlbGF0ZWRDYXRlZ29yaWVzOiBjYXRhbG9nLml0ZW1zW2lkXS5jYXRlZ29yaWVzLm1hcChmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNhdGVnb3J5LmlkO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVsQ2FsbGJhY2s6IGZ1bmN0aW9uIGRlbENhbGxiYWNrKCkge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVEZWxldGUoaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0YWxvZ1wiXG4gIH0sIGNhdGFsb2cubGlzdC5sZW5ndGggPiAwID8gcmVuZGVyQ2F0YWxvZ0l0ZW1zKCkgOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBcIlxcdTA0MURcXHUwNDM4XFx1MDQ0N1xcdTA0MzVcXHUwNDMzXFx1MDQzRSBcXHUwNDNEXFx1MDQzNSBcXHUwNDNEXFx1MDQzMFxcdTA0MzlcXHUwNDM0XFx1MDQzNVxcdTA0M0RcXHUwNDNFXCIpLCB0b3RhbFBhZ2VzID4gMSAmJiBjdXJyZW50UGFnZSA8IHRvdGFsUGFnZXMgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgbmFtZTogXCJcXHUwNDE0XFx1MDQzMFxcdTA0M0JcXHUwNDM1XFx1MDQzNVwiLFxuICAgIGNsYXNzTmFtZTogXCJidXR0b25fcGFnaW5nXCIsXG4gICAgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgcmV0dXJuIGZpbmROZXh0UGFnZSgpO1xuICAgIH1cbiAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb25maXJtYXRpb25EaWFsb2csIG51bGwpKTtcbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IE5hdiB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvbmF2JztcbmltcG9ydCB7IFNlYXJjaEZvcm0gfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL3NlYXJjaEZvcm0nO1xuaW1wb3J0IHsgRWRpdENhdGFsb2dJdGVtIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9lZGl0Q2F0YWxvZ0l0ZW0nO1xuaW1wb3J0IHsgQ2F0YWxvZyB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY2F0YWxvZyc7XG5leHBvcnQgdmFyIEluZGV4UGFnZSA9IGZ1bmN0aW9uIEluZGV4UGFnZSgpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChOYXYsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWFyY2hGb3JtLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ2F0YWxvZywgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEVkaXRDYXRhbG9nSXRlbSwgbnVsbCkpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSBcIi4uLy4uL3N0b3JlXCI7XG5leHBvcnQgdmFyIEFkZE5ld0NhdGVnb3J5Rm9ybSA9IG9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChzdG9yZSksXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRzZXQgPSBfUmVhY3QkdXNlQ29udGV4dC5zZXR1cFN0b3JlLFxuICAgICAgY2F0ZWdvcnlUaXRsZSA9IF9SZWFjdCR1c2VDb250ZXh0JHNldC5jYXRlZ29yeVRpdGxlLFxuICAgICAgc2V0Q2F0ZWdvcnlUaXRsZSA9IF9SZWFjdCR1c2VDb250ZXh0JHNldC5zZXRDYXRlZ29yeVRpdGxlLFxuICAgICAgYWRkQ2F0ZWdvcnlJdGVtID0gX1JlYWN0JHVzZUNvbnRleHQkc2V0LmFkZENhdGVnb3J5SXRlbTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJhZGQtY2F0ZWdvcnktZm9ybS13cmFwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIsIHtcbiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZSkge1xuICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJhZGQtY2F0ZWdvcnktZm9ybVwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiYWRkLWNhdGVnb3J5LWZvcm1fX2lucHV0LXdyYXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgcmV0dXJuIHNldENhdGVnb3J5VGl0bGUoZS50YXJnZXQudmFsdWUpO1xuICAgIH0sXG4gICAgdmFsdWU6IGNhdGVnb3J5VGl0bGUsXG4gICAgY2xhc3NOYW1lOiBcImFkZC1jYXRlZ29yeS1mb3JtX19pbnB1dFwiLFxuICAgIHR5cGU6IFwidGV4dFwiLFxuICAgIG5hbWU6IFwidGl0bGVcIixcbiAgICBwbGFjZWhvbGRlcjogXCJcXHUwNDFEXFx1MDQzMFxcdTA0MzdcXHUwNDMyXFx1MDQzMFxcdTA0M0RcXHUwNDM4XFx1MDQzNVwiXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgIHJldHVybiBhZGRDYXRlZ29yeUl0ZW0oKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJhZGQtY2F0ZWdvcnktZm9ybV9fYnV0dG9uXCIsXG4gICAgdHlwZTogXCJzdWJtaXRcIlxuICB9LCBcIlxcdTA0MTRcXHUwNDNFXFx1MDQzMVxcdTA0MzBcXHUwNDMyXFx1MDQzOFxcdTA0NDJcXHUwNDRDXCIpKSkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi4vYnV0dG9uXCI7XG5leHBvcnQgdmFyIFNldHVwQ2F0ZWdvcmllc0l0ZW0gPSAvKiNfX1BVUkVfXyovUmVhY3QubWVtbyhmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgdGl0bGUgPSBfcmVmLnRpdGxlLFxuICAgICAgb3BlbkVkaXRXaW5kb3cgPSBfcmVmLm9wZW5FZGl0V2luZG93O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZXR1cC1jYXRlZ29yeXNfX2l0ZW1cIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZXR1cC1jYXRlZ29yeXNfX2hlYWRlclwiXG4gIH0sIHRpdGxlKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgbmFtZTogXCJcXHUwNDIwXFx1MDQzNVxcdTA0MzRcXHUwNDMwXFx1MDQzQVxcdTA0NDJcXHUwNDM4XFx1MDQ0MFxcdTA0M0VcXHUwNDMyXFx1MDQzMFxcdTA0NDJcXHUwNDRDXCIsXG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvbl9zZXR1cC1jYXRlZ29yeXMtaXRlbVwiLFxuICAgIGNhbGxiYWNrOiBvcGVuRWRpdFdpbmRvd1xuICB9KSk7XG59LCBmdW5jdGlvbiAocHJldlByb3BzLCBuZXh0UHJvcHMpIHtcbiAgaWYgKHByZXZQcm9wcy50aXRsZSA9PT0gbmV4dFByb3BzLnRpdGxlKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuLi9wb3B1cFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tIFwiLi4vLi4vc3RvcmVcIjtcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB1c2VDb25maXJtYXRpb25EaWFsb2cgZnJvbSBcIi4uLy4uL2hvb2tzL3VzZUNvbmZpcm1hdGlvbkRpYWxvZ1wiO1xuZXhwb3J0IHZhciBTZXR1cENhdGVnb3JpZXNFZGl0V2luID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JHNldCA9IF9SZWFjdCR1c2VDb250ZXh0LnNldHVwU3RvcmUsXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRzZXQyID0gX1JlYWN0JHVzZUNvbnRleHQkc2V0LmVkaXRXaW5kb3csXG4gICAgICBpc09wZW4gPSBfUmVhY3QkdXNlQ29udGV4dCRzZXQyLmlzT3BlbixcbiAgICAgIHRpdGxlID0gX1JlYWN0JHVzZUNvbnRleHQkc2V0Mi50aXRsZSxcbiAgICAgIHNldEVkaXRXaW5kb3cgPSBfUmVhY3QkdXNlQ29udGV4dCRzZXQuc2V0RWRpdFdpbmRvdyxcbiAgICAgIHVwZGF0ZUNhdGVnb3J5SXRlbSA9IF9SZWFjdCR1c2VDb250ZXh0JHNldC51cGRhdGVDYXRlZ29yeUl0ZW0sXG4gICAgICBkZWxldGVDYXRlZ29yeUl0ZW0gPSBfUmVhY3QkdXNlQ29udGV4dCRzZXQuZGVsZXRlQ2F0ZWdvcnlJdGVtO1xuXG4gIHZhciBfdXNlQ29uZmlybWF0aW9uRGlhbG8gPSB1c2VDb25maXJtYXRpb25EaWFsb2coe1xuICAgIGhlYWRlcjogJ9Cj0LTQsNC70LjRgtGMPycsXG4gICAgY29uZmlybVRpdGxlOiAn0JTQsCcsXG4gICAgY2FuY2VsVGl0bGU6ICfQndC10YInLFxuICAgIG9uQ29uZmlybUNsaWNrOiBmdW5jdGlvbiBvbkNvbmZpcm1DbGljaygpIHtcbiAgICAgIHJldHVybiBjb25maXJtRGVsZXRlKCk7XG4gICAgfVxuICB9KSxcbiAgICAgIENvbmZpcm1hdGlvbkRpYWxvZyA9IF91c2VDb25maXJtYXRpb25EaWFsby5Db25maXJtYXRpb25EaWFsb2csXG4gICAgICBvbk9wZW4gPSBfdXNlQ29uZmlybWF0aW9uRGlhbG8ub25PcGVuO1xuXG4gIHZhciBjb25maXJtRGVsZXRlID0gZnVuY3Rpb24gY29uZmlybURlbGV0ZSgpIHtcbiAgICBvbk9wZW4oKTtcbiAgICBkZWxldGVDYXRlZ29yeUl0ZW0oKTtcbiAgfTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGlzT3BlbiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb3B1cCwge1xuICAgIGNsb3NlQ2FsbGJhY2s6IGZ1bmN0aW9uIGNsb3NlQ2FsbGJhY2soKSB7XG4gICAgICByZXR1cm4gc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICB0aXRsZTogJydcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcInBvcHVwLXdyYXBfc2V0dXAtY2F0ZWdvcnlzXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZXR1cC1jYXRlZ29yeS1lZGl0XCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNldHVwLWNhdGVnb3J5LWVkaXRfX3RpdGxlLWlucHV0XCIsXG4gICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgbmFtZTogXCJuZXdfdGl0bGVcIixcbiAgICB2YWx1ZTogdGl0bGUsXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHJldHVybiBzZXRFZGl0V2luZG93KHtcbiAgICAgICAgdGl0bGU6IGUudGFyZ2V0LnZhbHVlXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHBsYWNlaG9sZGVyOiBcIlxcdTA0MURcXHUwNDMwXFx1MDQzN1xcdTA0MzJcXHUwNDMwXFx1MDQzRFxcdTA0MzhcXHUwNDM1XCJcbiAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNldHVwLWNhdGVnb3J5LWVkaXRfX2J1dHRvbnMtd3JhcFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIHVwZGF0ZUNhdGVnb3J5SXRlbSgpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvbiBidXR0b25fY2F0YWxvZy1pdGVtXCJcbiAgfSwgXCJcXHUwNDIxXFx1MDQzRVxcdTA0NDVcXHUwNDQwXFx1MDQzMFxcdTA0M0RcXHUwNDM4XFx1MDQ0MlxcdTA0NENcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIG9uT3BlbigpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvbiBidXR0b25fY2F0YWxvZy1pdGVtXCJcbiAgfSwgXCJcXHUwNDIzXFx1MDQzNFxcdTA0MzBcXHUwNDNCXFx1MDQzOFxcdTA0NDJcXHUwNDRDXCIpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbmZpcm1hdGlvbkRpYWxvZywgbnVsbCkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQgeyBTZXR1cENhdGVnb3JpZXNJdGVtIH0gZnJvbSBcIi4uL3NldHVwQ2F0ZWdvcmllc0l0ZW1cIjtcbmltcG9ydCB7IFNldHVwQ2F0ZWdvcmllc0VkaXRXaW4gfSBmcm9tIFwiLi4vc2V0dXBDYXRlZ29yaWVzRWRpdFdpblwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gXCIuLi8uLi9zdG9yZVwiO1xuZXhwb3J0IHZhciBTZXR1cENhdGVnb3JpZXMgPSBvYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoc3RvcmUpLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkY2F0ID0gX1JlYWN0JHVzZUNvbnRleHQuY2F0ZWdvcmllc1N0b3JlLFxuICAgICAgY2F0ZWdvcmllcyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5jYXRlZ29yaWVzLFxuICAgICAgZ2V0QWxsQ2F0ZWdvcmllcyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5nZXRBbGxDYXRlZ29yaWVzLFxuICAgICAgc2V0RWRpdFdpbmRvdyA9IF9SZWFjdCR1c2VDb250ZXh0LnNldHVwU3RvcmUuc2V0RWRpdFdpbmRvdztcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXRlZ29yaWVzID09PSBudWxsKSB7XG4gICAgICBnZXRBbGxDYXRlZ29yaWVzKCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdmFyIHJlbmRlckNhdGVnb3JpZXMgPSBmdW5jdGlvbiByZW5kZXJDYXRlZ29yaWVzKCkge1xuICAgIHJldHVybiBjYXRlZ29yaWVzLmxpc3Quc2xpY2UoKS5yZXZlcnNlKCkubWFwKGZ1bmN0aW9uIChjYXRlZ29yeUlkKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2V0dXBDYXRlZ29yaWVzSXRlbSwge1xuICAgICAgICBrZXk6IGNhdGVnb3J5SWQsXG4gICAgICAgIGlkOiBjYXRlZ29yeUlkLFxuICAgICAgICBvcGVuRWRpdFdpbmRvdzogZnVuY3Rpb24gb3BlbkVkaXRXaW5kb3coKSB7XG4gICAgICAgICAgcmV0dXJuIHNldEVkaXRXaW5kb3coe1xuICAgICAgICAgICAgaXNPcGVuOiB0cnVlLFxuICAgICAgICAgICAgaWQ6IGNhdGVnb3J5SWQsXG4gICAgICAgICAgICB0aXRsZTogY2F0ZWdvcmllcy5pdGVtc1tjYXRlZ29yeUlkXS50aXRsZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogY2F0ZWdvcmllcy5pdGVtc1tjYXRlZ29yeUlkXS50aXRsZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgaWYgKGNhdGVnb3JpZXMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgXCJMb2FkaW5nXCIpO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNldHVwLWNhdGVnb3J5c1wiXG4gIH0sIHJlbmRlckNhdGVnb3JpZXMoKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNldHVwQ2F0ZWdvcmllc0VkaXRXaW4sIG51bGwpKTtcbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IE5hdiB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL25hdlwiO1xuaW1wb3J0IHsgQWRkTmV3Q2F0ZWdvcnlGb3JtIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvYWRkTmV3Q2F0ZWdvcnlGb3JtXCI7XG5pbXBvcnQgeyBTZXR1cENhdGVnb3JpZXMgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9zZXR1cENhdGVnb3JpZXNcIjtcbmV4cG9ydCB2YXIgU2V0dXBQYWdlID0gZnVuY3Rpb24gU2V0dXBQYWdlKCkge1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5hdiwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFkZE5ld0NhdGVnb3J5Rm9ybSwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNldHVwQ2F0ZWdvcmllcywgbnVsbCkpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSAnLi4vLi4vc3RvcmUnO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4uL2J1dHRvblwiO1xuaW1wb3J0IHsgdXNlSGlzdG9yeSwgdXNlTG9jYXRpb24gfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5leHBvcnQgdmFyIExvZ2luRm9ybSA9IG9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChzdG9yZSksXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRhdXQgPSBfUmVhY3QkdXNlQ29udGV4dC5hdXRoU3RvcmUsXG4gICAgICBpc0F1dGggPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQuaXNBdXRoLFxuICAgICAgbG9naW4gPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQubG9naW4sXG4gICAgICBzZXRMb2dpbiA9IF9SZWFjdCR1c2VDb250ZXh0JGF1dC5zZXRMb2dpbixcbiAgICAgIHBhc3N3b3JkID0gX1JlYWN0JHVzZUNvbnRleHQkYXV0LnBhc3N3b3JkLFxuICAgICAgc2V0UGFzc3dvcmQgPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQuc2V0UGFzc3dvcmQsXG4gICAgICBlcnJvckxvZ2luID0gX1JlYWN0JHVzZUNvbnRleHQkYXV0LmVycm9yTG9naW4sXG4gICAgICBsb2dpblJlcXVlc3QgPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQubG9naW5SZXF1ZXN0O1xuXG4gIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpO1xuICB2YXIgbG9jYXRpb24gPSB1c2VMb2NhdGlvbigpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChpc0F1dGgpIHtcbiAgICAgIHZhciBfcmVmID0gbG9jYXRpb24uc3RhdGUgfHwge1xuICAgICAgICBmcm9tOiB7XG4gICAgICAgICAgcGF0aG5hbWU6IFwiL1wiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAgICAgZnJvbSA9IF9yZWYuZnJvbTtcblxuICAgICAgaGlzdG9yeS5yZXBsYWNlKGZyb20pO1xuICAgIH1cbiAgfSwgW2lzQXV0aF0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJsb2dpbi1mb3JtLXdyYXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImgxXCIsIG51bGwsIFwiXFx1MDQxMFxcdTA0MzJcXHUwNDQyXFx1MDQzRVxcdTA0NDBcXHUwNDM4XFx1MDQzN1xcdTA0MzBcXHUwNDQ2XFx1MDQzOFxcdTA0NEZcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibG9naW4tZm9ybV9fZXJyb3JcIlxuICB9LCBlcnJvckxvZ2luKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIsIHtcbiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZSkge1xuICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJsb2dpbi1mb3JtXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHJldHVybiBzZXRMb2dpbihlLnRhcmdldC52YWx1ZSk7XG4gICAgfSxcbiAgICB2YWx1ZTogbG9naW4sXG4gICAgY2xhc3NOYW1lOiBcImxvZ2luLWZvcm1fX2lucHV0XCIsXG4gICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgbmFtZTogXCJsb2dpblwiLFxuICAgIHBsYWNlaG9sZGVyOiBcIlxcdTA0MUJcXHUwNDNFXFx1MDQzM1xcdTA0MzhcXHUwNDNEXCJcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICByZXR1cm4gc2V0UGFzc3dvcmQoZS50YXJnZXQudmFsdWUpO1xuICAgIH0sXG4gICAgdmFsdWU6IHBhc3N3b3JkLFxuICAgIGNsYXNzTmFtZTogXCJsb2dpbi1mb3JtX19pbnB1dFwiLFxuICAgIHR5cGU6IFwicGFzc3dvcmRcIixcbiAgICBuYW1lOiBcInBhc3N3b3JkXCIsXG4gICAgcGxhY2Vob2xkZXI6IFwiXFx1MDQxRlxcdTA0MzBcXHUwNDQwXFx1MDQzRVxcdTA0M0JcXHUwNDRDXCJcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwge1xuICAgIGNhbGxiYWNrOiBsb2dpblJlcXVlc3QsXG4gICAgbmFtZTogJ9CS0L7QudGC0LgnLFxuICAgIGNsYXNzTmFtZTogJ2xvZ2luLWZvcm1fX2J1dHRvbidcbiAgfSkpKTtcbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IE5hdiB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL25hdlwiO1xuaW1wb3J0IHsgTG9naW5Gb3JtIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvbG9naW5Gb3JtXCI7XG5leHBvcnQgdmFyIExvZ2luUGFnZSA9IGZ1bmN0aW9uIExvZ2luUGFnZSgpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChOYXYsIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMb2dpbkZvcm0sIG51bGwpKTtcbn07IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuZXhwb3J0IHZhciBQYWdlTm90Rm91bmQgPSBmdW5jdGlvbiBQYWdlTm90Rm91bmQoKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBcIiwgbnVsbCwgXCI0MDQgUGFnZSBub3QgZm91bmRcIik7XG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG52YXIgX2V4Y2x1ZGVkID0gW1wiY2hpbGRyZW5cIl07XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFJvdXRlLCBSZWRpcmVjdCB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tIFwiLi4vLi4vc3RvcmVcIjtcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmV4cG9ydCB2YXIgUHJpdmF0ZVJvdXRlID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgX2V4Y2x1ZGVkKTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIGlzQXV0aCA9IF9SZWFjdCR1c2VDb250ZXh0LmF1dGhTdG9yZS5pc0F1dGg7XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlLCBfZXh0ZW5kcyh7fSwgcmVzdCwge1xuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKF9yZWYyKSB7XG4gICAgICB2YXIgbG9jYXRpb24gPSBfcmVmMi5sb2NhdGlvbjtcbiAgICAgIHJldHVybiBpc0F1dGggPyBjaGlsZHJlbiA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlZGlyZWN0LCB7XG4gICAgICAgIHRvOiB7XG4gICAgICAgICAgcGF0aG5hbWU6IFwiL2F1dGhcIixcbiAgICAgICAgICBzdGF0ZToge1xuICAgICAgICAgICAgZnJvbTogbG9jYXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlLCBTd2l0Y2ggfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tIFwiLi9zdG9yZVwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbmRleFBhZ2UgfSBmcm9tIFwiLi9wYWdlcy9pbmRleFwiO1xuaW1wb3J0IHsgU2V0dXBQYWdlIH0gZnJvbSBcIi4vcGFnZXMvc2V0dXBcIjtcbmltcG9ydCB7IExvZ2luUGFnZSB9IGZyb20gXCIuL3BhZ2VzL2xvZ2luXCI7XG5pbXBvcnQgeyBQYWdlTm90Rm91bmQgfSBmcm9tIFwiLi9wYWdlcy80MDRcIjtcbmltcG9ydCB7IFByaXZhdGVSb3V0ZSB9IGZyb20gXCIuL2NvbXBvbmVudHMvcHJpdmF0ZVJvdXRlXCI7XG5leHBvcnQgdmFyIFJvdXRlcyA9IG9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChzdG9yZSksXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRhdXQgPSBfUmVhY3QkdXNlQ29udGV4dC5hdXRoU3RvcmUsXG4gICAgICBpc0F1dGggPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQuaXNBdXRoLFxuICAgICAgYXV0aFJlcXVlc3QgPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQuYXV0aFJlcXVlc3Q7XG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNBdXRoICE9PSB0cnVlICYmIGlzQXV0aCAhPT0gZmFsc2UpIHtcbiAgICAgIGF1dGhSZXF1ZXN0KCk7XG4gICAgfVxuICB9LCBbaXNBdXRoXSk7XG5cbiAgaWYgKGlzQXV0aCAhPT0gdHJ1ZSAmJiBpc0F1dGggIT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIFwiTG9hZGluZ1wiKTtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN3aXRjaCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIHtcbiAgICBleGFjdDogdHJ1ZSxcbiAgICBwYXRoOiBcIi9cIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbmRleFBhZ2UsIG51bGwpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUHJpdmF0ZVJvdXRlLCB7XG4gICAgZXhhY3Q6IHRydWUsXG4gICAgcGF0aDogXCIvc2V0dXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZXR1cFBhZ2UsIG51bGwpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIHtcbiAgICBleGFjdDogdHJ1ZSxcbiAgICBwYXRoOiBcIi9hdXRoXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTG9naW5QYWdlLCBudWxsKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlLCB7XG4gICAgcGF0aDogXCIqXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFnZU5vdEZvdW5kLCBudWxsKSkpKTtcbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgeyBNb2JYUHJvdmlkZXIgfSBmcm9tIFwiLi9zdG9yZVwiO1xuaW1wb3J0IHsgUm91dGVzIH0gZnJvbSBcIi4vcm91dGVzXCI7XG5pbXBvcnQgJy4vY3NzL3N0eWxlLnNhc3MnO1xuXG52YXIgQXBwID0gZnVuY3Rpb24gQXBwKCkge1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjb250ZW50XCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTW9iWFByb3ZpZGVyLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZXMsIG51bGwpKSk7XG59O1xuXG5SZWFjdERPTS5yZW5kZXIoIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFwcCwgbnVsbCksIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXBwXCIpKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///lTEZica8\n");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [296], () => (__webpack_exec__("lTEZica8")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);