"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcollection"] = self["webpackChunkcollection"] || []).push([[179],{

/***/ "lTEZica8":
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

eval("\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tIBJhx\");\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(\"i8i4LrFt\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"zThLd8G0\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"/0+J+gjc\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"o0o1ebC6\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n// EXTERNAL MODULE: ./node_modules/mobx/dist/mobx.esm.js\nvar mobx_esm = __webpack_require__(\"aFzQ4EZ/\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(\"k6DiKGfl\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(\"79Ja/Yn4\");\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(\"vDqi2OZM\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n;// CONCATENATED MODULE: ./src/libs/localStorage.ts\n/* harmony default export */ const libs_localStorage = ({\n  saveTokenToStorage: function saveTokenToStorage(token) {\n    localStorage.setItem('token', token);\n  },\n  clearTokenFromStorage: function clearTokenFromStorage() {\n    localStorage.removeItem('token');\n  },\n  getTokenFromStorage: function getTokenFromStorage() {\n    if (!localStorage.token) return null;\n    return localStorage.token;\n  }\n});\n;// CONCATENATED MODULE: ./src/api/index.ts\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,defineProperty/* default */.Z)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\nvar Api = /*#__PURE__*/function () {\n  function Api(backendHost) {\n    (0,classCallCheck/* default */.Z)(this, Api);\n\n    (0,defineProperty/* default */.Z)(this, \"urlRoot\", void 0);\n\n    (0,defineProperty/* default */.Z)(this, \"optionsDefault\", {});\n\n    axios_default().interceptors.response.use(function (response) {\n      return response;\n    }, function (error) {\n      return Promise.reject(error.response);\n    }); //set api url root for dev and prod\n\n    this.urlRoot = \"\".concat(backendHost, \"/api\");\n  }\n\n  (0,createClass/* default */.Z)(Api, [{\n    key: \"requestWithToken\",\n    value: function () {\n      var _requestWithToken = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee(options) {\n        var accessToken;\n        return regenerator_default().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                options.url = \"\".concat(this.urlRoot).concat(options.url);\n                accessToken = libs_localStorage.getTokenFromStorage();\n\n                if (!options.headers) {\n                  options.headers = {};\n                  options.headers = {\n                    'Content-Type': 'application/json'\n                  };\n                }\n\n                if (accessToken) options.headers.Authorization = \"Bearer \".concat(accessToken);\n                _context.next = 7;\n                return axios_default()(_objectSpread(_objectSpread({}, this.optionsDefault), options))[\"catch\"](function (error) {\n                  return error;\n                });\n\n              case 7:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                if (_context.t0 instanceof Error) console.log(_context.t0.message);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      function requestWithToken(_x3) {\n        return _requestWithToken.apply(this, arguments);\n      }\n\n      return requestWithToken;\n    }()\n  }, {\n    key: \"login\",\n    value: function (_login) {\n      function login(_x, _x2) {\n        return _login.apply(this, arguments);\n      }\n\n      login.toString = function () {\n        return _login.toString();\n      };\n\n      return login;\n    }( /*#__PURE__*/function () {\n      var _ref = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2(login, password) {\n        var options, res;\n        return regenerator_default().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = {\n                  url: \"\".concat(this.urlRoot, \"/users/login/\"),\n                  method: 'POST',\n                  data: {\n                    login: login,\n                    password: password\n                  }\n                };\n                _context2.next = 3;\n                return axios_default()(_objectSpread(_objectSpread({}, this.optionsDefault), options))[\"catch\"](function (error) {\n                  return error;\n                });\n\n              case 3:\n                res = _context2.sent;\n                return _context2.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x4, _x5) {\n        return _ref.apply(this, arguments);\n      };\n    }())\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n        var options, res;\n        return regenerator_default().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = {\n                  url: \"/users/logout/\",\n                  method: 'POST',\n                  data: {}\n                };\n                _context3.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context3.sent;\n                return _context3.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"userCheckAuth\",\n    value: function () {\n      var _userCheckAuth = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee4() {\n        var options, res;\n        return regenerator_default().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                options = {\n                  url: \"/users/auth/\",\n                  method: 'GET'\n                };\n                _context4.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context4.sent;\n\n                if (!(res !== undefined)) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", res);\n\n              case 6:\n                return _context4.abrupt(\"return\", false);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function userCheckAuth() {\n        return _userCheckAuth.apply(this, arguments);\n      }\n\n      return userCheckAuth;\n    }()\n  }, {\n    key: \"findCatalogItems\",\n    value: function () {\n      var _findCatalogItems = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee5(query, categories, page) {\n        var options, res;\n        return regenerator_default().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                options = {\n                  url: \"/search?search=\".concat(query, \"&categories=\").concat(categories, \"&page=\").concat(page),\n                  method: 'GET'\n                };\n                _context5.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context5.sent;\n                return _context5.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function findCatalogItems(_x6, _x7, _x8) {\n        return _findCatalogItems.apply(this, arguments);\n      }\n\n      return findCatalogItems;\n    }()\n  }, {\n    key: \"findTotalPages\",\n    value: function () {\n      var _findTotalPages = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee6(query, categories) {\n        var options, res;\n        return regenerator_default().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = {\n                  url: \"/search/total-pages/?search=\".concat(query, \"&categories=\").concat(categories),\n                  method: 'GET'\n                };\n                _context6.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context6.sent;\n                return _context6.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function findTotalPages(_x9, _x10) {\n        return _findTotalPages.apply(this, arguments);\n      }\n\n      return findTotalPages;\n    }()\n  }, {\n    key: \"addCategoryItem\",\n    value: function () {\n      var _addCategoryItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee7(title) {\n        var options, res;\n        return regenerator_default().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                options = {\n                  url: \"/category/\",\n                  method: 'POST',\n                  data: {\n                    title: title\n                  }\n                };\n                _context7.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context7.sent;\n                return _context7.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function addCategoryItem(_x11) {\n        return _addCategoryItem.apply(this, arguments);\n      }\n\n      return addCategoryItem;\n    }()\n  }, {\n    key: \"getAllCategories\",\n    value: function () {\n      var _getAllCategories = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee8() {\n        var options, res;\n        return regenerator_default().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                options = {\n                  url: \"/category/\",\n                  method: 'GET'\n                };\n                _context8.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context8.sent;\n                return _context8.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function getAllCategories() {\n        return _getAllCategories.apply(this, arguments);\n      }\n\n      return getAllCategories;\n    }()\n  }, {\n    key: \"updateCategoryItem\",\n    value: function () {\n      var _updateCategoryItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee9(id, title) {\n        var options, res;\n        return regenerator_default().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                options = {\n                  url: \"/category/\",\n                  method: 'PUT',\n                  data: {\n                    id: id,\n                    title: title\n                  }\n                };\n                _context9.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context9.sent;\n                return _context9.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function updateCategoryItem(_x12, _x13) {\n        return _updateCategoryItem.apply(this, arguments);\n      }\n\n      return updateCategoryItem;\n    }()\n  }, {\n    key: \"deleteCategoryItem\",\n    value: function () {\n      var _deleteCategoryItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee10(id) {\n        var options, res;\n        return regenerator_default().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                options = {\n                  url: \"/category/\",\n                  method: 'DELETE',\n                  data: {\n                    id: id\n                  }\n                };\n                _context10.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context10.sent;\n                return _context10.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function deleteCategoryItem(_x14) {\n        return _deleteCategoryItem.apply(this, arguments);\n      }\n\n      return deleteCategoryItem;\n    }()\n  }, {\n    key: \"addCatalogItem\",\n    value: function () {\n      var _addCatalogItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee11(title, anons, img, relatedCategories) {\n        var url, resFile, options, res;\n        return regenerator_default().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                url = '';\n\n                if (!(typeof img !== 'string' && img.type)) {\n                  _context11.next = 6;\n                  break;\n                }\n\n                _context11.next = 4;\n                return this.uploadOneFile(img, \"catalog-image\", \"/catalog/upload/\");\n\n              case 4:\n                resFile = _context11.sent;\n                if (!(resFile instanceof Error)) url = resFile.data.url;\n\n              case 6:\n                if (typeof img === 'string') url = img;\n                options = {\n                  url: \"/catalog/\",\n                  method: 'POST',\n                  data: {\n                    title: title,\n                    anons: anons,\n                    image: url,\n                    categoriesId: relatedCategories\n                  }\n                };\n                _context11.next = 10;\n                return this.requestWithToken(options);\n\n              case 10:\n                res = _context11.sent;\n                return _context11.abrupt(\"return\", res);\n\n              case 12:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function addCatalogItem(_x15, _x16, _x17, _x18) {\n        return _addCatalogItem.apply(this, arguments);\n      }\n\n      return addCatalogItem;\n    }()\n  }, {\n    key: \"updCatalogItem\",\n    value: function () {\n      var _updCatalogItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee12(id, title, anons, img, relatedCategories) {\n        var url, resFile, options, res;\n        return regenerator_default().wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                url = '';\n\n                if (!(typeof img !== 'string' && img.type)) {\n                  _context12.next = 6;\n                  break;\n                }\n\n                _context12.next = 4;\n                return this.uploadOneFile(img, \"catalog-image\", \"/catalog/upload/\");\n\n              case 4:\n                resFile = _context12.sent;\n                if (!(resFile instanceof Error)) url = resFile.data.url;\n\n              case 6:\n                if (typeof img === 'string') url = img;\n                options = {\n                  url: \"/catalog/\",\n                  method: 'PUT',\n                  data: {\n                    id: id,\n                    title: title,\n                    anons: anons,\n                    image: url,\n                    categoriesId: relatedCategories\n                  }\n                };\n                _context12.next = 10;\n                return this.requestWithToken(options);\n\n              case 10:\n                res = _context12.sent;\n                return _context12.abrupt(\"return\", res);\n\n              case 12:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function updCatalogItem(_x19, _x20, _x21, _x22, _x23) {\n        return _updCatalogItem.apply(this, arguments);\n      }\n\n      return updCatalogItem;\n    }()\n  }, {\n    key: \"delCatalogItem\",\n    value: function () {\n      var _delCatalogItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee13(id) {\n        var options, res;\n        return regenerator_default().wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                options = {\n                  url: \"/catalog/\",\n                  method: 'DELETE',\n                  data: {\n                    id: id\n                  }\n                };\n                _context13.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context13.sent;\n                return _context13.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function delCatalogItem(_x24) {\n        return _delCatalogItem.apply(this, arguments);\n      }\n\n      return delCatalogItem;\n    }()\n  }, {\n    key: \"uploadOneFile\",\n    value: function () {\n      var _uploadOneFile = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee14(file, field, url) {\n        var data, options, res;\n        return regenerator_default().wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                data = new FormData();\n                data.append(field, file);\n                options = {\n                  url: url,\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'multipart/form-data'\n                  },\n                  data: data\n                };\n                _context14.next = 5;\n                return this.requestWithToken(options);\n\n              case 5:\n                res = _context14.sent;\n                return _context14.abrupt(\"return\", res);\n\n              case 7:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function uploadOneFile(_x25, _x26, _x27) {\n        return _uploadOneFile.apply(this, arguments);\n      }\n\n      return uploadOneFile;\n    }()\n  }, {\n    key: \"getCatalogItem\",\n    value: function () {\n      var _getCatalogItem = (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee15(id) {\n        var options, res;\n        return regenerator_default().wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                options = {\n                  url: \"/catalog/?id=\".concat(id),\n                  method: 'GET'\n                };\n                _context15.next = 3;\n                return this.requestWithToken(options);\n\n              case 3:\n                res = _context15.sent;\n                return _context15.abrupt(\"return\", res);\n\n              case 5:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function getCatalogItem(_x28) {\n        return _getCatalogItem.apply(this, arguments);\n      }\n\n      return getCatalogItem;\n    }()\n  }]);\n\n  return Api;\n}();\n\nvar api = new Api(\"\");\n;// CONCATENATED MODULE: ./src/store/catalogStore.ts\n\n\n\n\nvar catalogStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  catalog: null,\n  editWindow: {\n    isOpen: false,\n    catalogId: null,\n    img: '',\n    previewImg: '',\n    title: '',\n    anons: '',\n    relatedCategories: []\n  },\n  setEditWindow: function setEditWindow(_ref) {\n    var isOpen = _ref.isOpen,\n        catalogId = _ref.catalogId,\n        img = _ref.img,\n        previewImg = _ref.previewImg,\n        title = _ref.title,\n        anons = _ref.anons,\n        relatedCategories = _ref.relatedCategories;\n    if (isOpen === undefined) isOpen = catalogStore.editWindow.isOpen;\n    if (catalogId === undefined) catalogId = catalogStore.editWindow.catalogId;\n    if (img === undefined) img = catalogStore.editWindow.img;\n    if (previewImg === undefined) previewImg = catalogStore.editWindow.previewImg;\n    if (title === undefined) title = catalogStore.editWindow.title;\n    if (anons === undefined) anons = catalogStore.editWindow.anons;\n    if (relatedCategories === undefined) relatedCategories = catalogStore.editWindow.relatedCategories;\n\n    if (isOpen === false) {\n      catalogId = null;\n      img = '';\n      previewImg = '';\n      title = '';\n      anons = '';\n      relatedCategories = [];\n    }\n\n    (0,mobx_esm/* runInAction */.z)(function () {\n      catalogStore.editWindow.isOpen = isOpen;\n      catalogStore.editWindow.catalogId = catalogId;\n      catalogStore.editWindow.img = img;\n      catalogStore.editWindow.previewImg = previewImg;\n      catalogStore.editWindow.title = title;\n      catalogStore.editWindow.anons = anons;\n      catalogStore.editWindow.relatedCategories = relatedCategories;\n    });\n  },\n  addRelatedCategories: function addRelatedCategories(categoryId) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return catalogStore.editWindow.relatedCategories.push(categoryId);\n    });\n  },\n  delRelatedCategories: function delRelatedCategories(categoryId) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return catalogStore.editWindow.relatedCategories.splice(catalogStore.editWindow.relatedCategories.indexOf(categoryId), 1);\n    });\n  },\n  saveCatalogItem: function saveCatalogItem() {\n    if (!catalogStore.editWindow.catalogId) {\n      catalogStore.addCatalogItem();\n    } else catalogStore.updateCatalogItem();\n  },\n  updateCatalogItem: function updateCatalogItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res, catalogItem;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.updCatalogItem(catalogStore.editWindow.catalogId, catalogStore.editWindow.title, catalogStore.editWindow.anons, catalogStore.editWindow.img, catalogStore.editWindow.relatedCategories);\n\n            case 2:\n              res = _context.sent;\n\n              if (res instanceof Error) {\n                _context.next = 10;\n                break;\n              }\n\n              if (!(res.status === 200)) {\n                _context.next = 10;\n                break;\n              }\n\n              catalogStore.setEditWindow({\n                isOpen: false\n              });\n              _context.next = 8;\n              return api.getCatalogItem(res.data.id);\n\n            case 8:\n              catalogItem = _context.sent;\n\n              if (!(catalogItem instanceof Error)) {\n                if (catalogItem.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    catalogStore.catalog.items[catalogItem.data.id] = catalogItem.data;\n                  });\n                }\n              }\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  addCatalogItem: function addCatalogItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2() {\n      var res, catalogItem;\n      return regenerator_default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.addCatalogItem(catalogStore.editWindow.title, catalogStore.editWindow.anons, catalogStore.editWindow.img, catalogStore.editWindow.relatedCategories);\n\n            case 2:\n              res = _context2.sent;\n\n              if (res instanceof Error) {\n                _context2.next = 10;\n                break;\n              }\n\n              if (!(res.status === 200)) {\n                _context2.next = 10;\n                break;\n              }\n\n              catalogStore.setEditWindow({\n                isOpen: false\n              });\n              _context2.next = 8;\n              return api.getCatalogItem(res.data.id);\n\n            case 8:\n              catalogItem = _context2.sent;\n\n              if (!(catalogItem instanceof Error)) {\n                if (catalogItem.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    catalogStore.catalog.items[catalogItem.data.id] = catalogItem.data;\n                    catalogStore.catalog.list.unshift(catalogItem.data.id);\n                  });\n                }\n              }\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  deleteId: null,\n  setDeleteId: function setDeleteId(id) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      catalogStore.deleteId = id;\n    });\n  },\n  delCatalogItem: function delCatalogItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n      var res;\n      return regenerator_default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.delCatalogItem(catalogStore.deleteId);\n\n            case 2:\n              res = _context3.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200 && res.data.id) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    var i = catalogStore.catalog.list.indexOf(res.data.id);\n                    catalogStore.catalog.list.splice(i, 1);\n                    delete catalogStore.catalog.items[res.data.id];\n                    catalogStore.deleteId = null;\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n});\n;// CONCATENATED MODULE: ./src/libs/mapCatalog.ts\nfunction mapCatalog(catalog) {\n  var normalized = {\n    items: {},\n    list: []\n  };\n  catalog.forEach(function (catalog) {\n    normalized.items[catalog.id] = {\n      id: catalog.id,\n      title: catalog.title,\n      anons: catalog.anons,\n      image: catalog.image,\n      categories: catalog.categories\n    };\n    normalized.list.push(catalog.id);\n  });\n  return normalized;\n}\n;// CONCATENATED MODULE: ./src/store/searchStore.ts\n\n\n\nfunction searchStore_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction searchStore_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? searchStore_ownKeys(Object(source), !0).forEach(function (key) { (0,defineProperty/* default */.Z)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : searchStore_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\n\n\nvar searchStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  form: {\n    searchString: '',\n    setSearchString: function setSearchString(searchString) {\n      searchStore.form.searchString = searchString;\n    },\n    selectdedCategories: [],\n    addSelectdedCategories: function addSelectdedCategories(categoryId) {\n      (0,mobx_esm/* runInAction */.z)(function () {\n        return searchStore.form.selectdedCategories.push(categoryId);\n      });\n    },\n    delSelectdedCategories: function delSelectdedCategories(categoryId) {\n      (0,mobx_esm/* runInAction */.z)(function () {\n        return searchStore.form.selectdedCategories.splice(searchStore.form.selectdedCategories.indexOf(categoryId), 1);\n      });\n    }\n  },\n  request: {\n    searchString: '',\n    selectdedCategories: []\n  },\n  setRequestParams: function setRequestParams() {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      searchStore.request.searchString = searchStore.form.searchString;\n      searchStore.request.selectdedCategories = searchStore.form.selectdedCategories;\n    });\n  },\n  setRequestParamsFromBowserSearchString: function setRequestParamsFromBowserSearchString(searchString, categories) {\n    searchStore.request.searchString = searchString;\n    searchStore.request.selectdedCategories = categories;\n  },\n  totalPages: null,\n  setTotalPages: function setTotalPages() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.findTotalPages(searchStore.form.searchString, searchStore.form.selectdedCategories);\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    searchStore.totalPages = res.data.totalPages;\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  currentPage: 1,\n  find: function find() {\n    var currentPage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2() {\n      var res;\n      return regenerator_default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.findCatalogItems(searchStore.request.searchString, searchStore.request.selectdedCategories, currentPage);\n\n            case 2:\n              res = _context2.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200 && res.data.result) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    catalogStore.catalog = mapCatalog(res.data.result);\n                    searchStore.currentPage = currentPage;\n                  });\n                } else {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return catalogStore.catalog = {\n                      items: {},\n                      list: []\n                    };\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  findNextPage: function findNextPage() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n      var nextPage, res, mapedCatalog;\n      return regenerator_default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              nextPage = searchStore.currentPage + 1;\n              _context3.next = 3;\n              return api.findCatalogItems(searchStore.request.searchString, searchStore.request.selectdedCategories, nextPage);\n\n            case 3:\n              res = _context3.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200 && res.data.result) {\n                  mapedCatalog = mapCatalog(res.data.result);\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    catalogStore.catalog.items = searchStore_objectSpread(searchStore_objectSpread({}, catalogStore.catalog.items), mapedCatalog.items);\n                    catalogStore.catalog.list = catalogStore.catalog.list.concat(mapedCatalog.list);\n                    searchStore.currentPage = nextPage;\n                  });\n                } else {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return catalogStore.catalog = {\n                      items: {},\n                      list: []\n                    };\n                  });\n                }\n              }\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n});\n;// CONCATENATED MODULE: ./src/store/authStore.ts\n\n\n\n\n\nvar authStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  login: 'demo',\n  password: 'demo123',\n  errorLogin: '',\n  isAuth: null,\n  setLogin: function setLogin(login) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return authStore.login = login;\n    });\n  },\n  setPassword: function setPassword(password) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return authStore.password = password;\n    });\n  },\n  loginRequest: function loginRequest() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.login(authStore.login, authStore.password);\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status !== 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.errorLogin = res.data.error.message;\n                  });\n                }\n\n                if (res.data.token) {\n                  libs_localStorage.saveTokenToStorage(res.data.token);\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.isAuth = true;\n                  });\n                } else libs_localStorage.clearTokenFromStorage();\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  logoutRequest: function logoutRequest() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2() {\n      var res;\n      return regenerator_default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.logout();\n\n            case 2:\n              res = _context2.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.data.isLogout) {\n                  libs_localStorage.clearTokenFromStorage();\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.isAuth = false;\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  authRequest: function authRequest() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n      var res;\n      return regenerator_default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.userCheckAuth();\n\n            case 2:\n              res = _context3.sent;\n\n              if (!(res instanceof Error) && res !== false) {\n                if (res.data.isAuth) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.isAuth = true;\n                  });\n                } else {\n                  libs_localStorage.clearTokenFromStorage();\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return authStore.isAuth = false;\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  }\n});\n;// CONCATENATED MODULE: ./src/libs/mapCategories.ts\nfunction mapCategories(categories) {\n  var normalized = {\n    items: {},\n    list: []\n  };\n  categories.forEach(function (category) {\n    normalized.items[category.id] = {\n      id: category.id,\n      title: category.title\n    };\n    normalized.list.push(category.id);\n  });\n  return normalized;\n}\n;// CONCATENATED MODULE: ./src/store/categoriesStore.ts\n\n\n\n\n\nvar categoriesStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  categories: null,\n  getAllCategories: function getAllCategories() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.getAllCategories();\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return categoriesStore.categories = mapCategories(res.data);\n                  });\n                } else {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    return categoriesStore.categories = {\n                      items: {},\n                      list: []\n                    };\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }\n});\n;// CONCATENATED MODULE: ./src/store/setupStore.ts\n\n\n\n\n\nvar setupStore = (0,mobx_esm/* makeAutoObservable */.ky)({\n  categoryTitle: '',\n  setCategoryTitle: function setCategoryTitle(title) {\n    (0,mobx_esm/* runInAction */.z)(function () {\n      return setupStore.categoryTitle = title;\n    });\n  },\n  addCategoryItem: function addCategoryItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee() {\n      var res;\n      return regenerator_default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return api.addCategoryItem(setupStore.categoryTitle);\n\n            case 2:\n              res = _context.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    categoriesStore.categories.items[res.data.id] = {\n                      id: res.data.id,\n                      title: setupStore.categoryTitle\n                    };\n                    categoriesStore.categories.list.push(res.data.id);\n                    setupStore.categoryTitle = '';\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  updateCategoryItem: function updateCategoryItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee2() {\n      var res;\n      return regenerator_default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return api.updateCategoryItem(setupStore.editWindow.id, setupStore.editWindow.title);\n\n            case 2:\n              res = _context2.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    categoriesStore.categories.items[res.data.id].title = setupStore.editWindow.title;\n                    setupStore.setEditWindow({\n                      isOpen: false,\n                      id: null,\n                      title: ''\n                    });\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  deleteCategoryItem: function deleteCategoryItem() {\n    return (0,asyncToGenerator/* default */.Z)( /*#__PURE__*/regenerator_default().mark(function _callee3() {\n      var res;\n      return regenerator_default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return api.deleteCategoryItem(setupStore.editWindow.id);\n\n            case 2:\n              res = _context3.sent;\n\n              if (!(res instanceof Error)) {\n                if (res.status === 200 && res.data.id !== null) {\n                  (0,mobx_esm/* runInAction */.z)(function () {\n                    var i = categoriesStore.categories.list.indexOf(res.data.id);\n                    categoriesStore.categories.list.splice(i, 1);\n                    delete categoriesStore.categories.items[res.data.id];\n                    setupStore.setEditWindow({\n                      isOpen: false,\n                      id: null,\n                      title: ''\n                    });\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  },\n  editWindow: {\n    isOpen: false,\n    id: null,\n    title: ''\n  },\n  setEditWindow: function setEditWindow(_ref4) {\n    var isOpen = _ref4.isOpen,\n        id = _ref4.id,\n        title = _ref4.title;\n    if (isOpen === undefined) isOpen = setupStore.editWindow.isOpen;\n    if (id === undefined) id = setupStore.editWindow.id;\n    if (title === undefined) title = setupStore.editWindow.title;\n    (0,mobx_esm/* runInAction */.z)(function () {\n      setupStore.editWindow = {\n        isOpen: isOpen,\n        id: id,\n        title: title\n      };\n    });\n  }\n});\n;// CONCATENATED MODULE: ./src/store/index.tsx\n\n\n\n\n\n\nvar state = {\n  searchStore: searchStore,\n  authStore: authStore,\n  setupStore: setupStore,\n  categoriesStore: categoriesStore,\n  catalogStore: catalogStore\n};\nvar store = /*#__PURE__*/react.createContext(state);\nvar MobXProvider = function MobXProvider(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/react.createElement(store.Provider, {\n    value: state\n  }, \" \", children, \" \");\n};\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(\"55IpiCAJ\");\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js + 1 modules\nvar react_router = __webpack_require__(\"4qXz/kfb\");\n// EXTERNAL MODULE: ./node_modules/mobx-react/dist/mobxreact.esm.js + 17 modules\nvar mobxreact_esm = __webpack_require__(\"gdJlUBDx\");\n;// CONCATENATED MODULE: ./src/components/navButton/index.tsx\n\n\nvar NavButton = function NavButton(_ref) {\n  var name = _ref.name,\n      callback = _ref.callback;\n  return /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return callback();\n    },\n    className: \"nav-button\"\n  }, name);\n};\n;// CONCATENATED MODULE: ./src/components/navButtonSearch/index.tsx\n\n\nvar NavButtonSearch = function NavButtonSearch() {\n  return /*#__PURE__*/react.createElement(\"button\", {\n    className: \"nav-button-search\"\n  }, \"\\u041F\\u043E\\u0438\\u0441\\u043A\");\n};\n;// CONCATENATED MODULE: ./src/components/nav/index.tsx\n\n\n\n\n\n\n\n\nvar Nav = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$aut = _React$useContext.authStore,\n      isAuth = _React$useContext$aut.isAuth,\n      logoutRequest = _React$useContext$aut.logoutRequest,\n      setEditWindow = _React$useContext.catalogStore.setEditWindow;\n\n  var location = (0,react_router/* useLocation */.TH)().pathname;\n\n  var renderMenu = function renderMenu() {\n    if (isAuth) {\n      return /*#__PURE__*/react.createElement(react.Fragment, null, location === '/' && /*#__PURE__*/react.createElement(NavButton, {\n        callback: function callback() {\n          return setEditWindow({\n            isOpen: true\n          });\n        },\n        name: 'Добавить'\n      }), /*#__PURE__*/react.createElement(react_router_dom/* NavLink */.OL, {\n        activeClassName: \"nav-link_active\",\n        className: \"nav-link\",\n        to: '/setup/'\n      }, \"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\"), /*#__PURE__*/react.createElement(NavButton, {\n        callback: logoutRequest,\n        name: 'Выход'\n      }));\n    }\n\n    return /*#__PURE__*/react.createElement(react_router_dom/* NavLink */.OL, {\n      activeClassName: \"nav-link_active\",\n      className: \"nav-link\",\n      to: '/auth/'\n    }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\");\n  };\n\n  return /*#__PURE__*/react.createElement(\"nav\", {\n    className: \"nav\"\n  }, location === '/' ? /*#__PURE__*/react.createElement(NavButtonSearch, null) : /*#__PURE__*/react.createElement(react_router_dom/* NavLink */.OL, {\n    className: \"nav-link-search\",\n    to: '/'\n  }, \"\\u041F\\u043E\\u0438\\u0441\\u043A\"), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"nav-wrap\"\n  }, renderMenu()));\n});\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(\"b3LDTz+H\");\n;// CONCATENATED MODULE: ./src/components/categoriesAddButton/index.tsx\n\n\nvar CategoriesAddButton = function CategoriesAddButton(_ref) {\n  var callback = _ref.callback;\n  return /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return callback();\n    },\n    className: \"categorys-add-button\"\n  }, \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\");\n};\n;// CONCATENATED MODULE: ./src/components/categoriesItem/index.tsx\n\n\nvar CategoriesItem = /*#__PURE__*/react.memo(function (_ref) {\n  var title = _ref.title,\n      delCallback = _ref.delCallback;\n  return /*#__PURE__*/react.createElement(\"label\", {\n    className: \"category-item\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"category-item__title\"\n  }, title), /*#__PURE__*/react.createElement(\"input\", {\n    className: \"category-item__input\",\n    type: \"checkbox\",\n    name: \"category_item\"\n  }), /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return delCallback();\n    },\n    className: \"category-item__close\"\n  }, \" \"));\n}, function (prevProps, nextProps) {\n  if (prevProps.title === nextProps.title) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/components/selectCategoriesItem/index.tsx\n\n\n\nvar SelectCategoriesItem = /*#__PURE__*/react.memo(function (_ref) {\n  var title = _ref.title,\n      isActive = _ref.isActive,\n      addCallback = _ref.addCallback,\n      delCallback = _ref.delCallback;\n\n  var _React$useState = react.useState(isActive),\n      _React$useState2 = (0,slicedToArray/* default */.Z)(_React$useState, 2),\n      checked = _React$useState2[0],\n      setChecked = _React$useState2[1];\n\n  var check = function check(isChecked) {\n    setChecked(isChecked);\n    isChecked ? addCallback() : delCallback();\n  };\n\n  return /*#__PURE__*/react.createElement(\"label\", {\n    className: \"select-category-item\"\n  }, /*#__PURE__*/react.createElement(\"input\", {\n    className: \"select-category-item__input\",\n    name: \"category_item\",\n    type: \"checkbox\",\n    onChange: function onChange() {\n      return check(!checked);\n    },\n    checked: checked\n  }), /*#__PURE__*/react.createElement(\"span\", {\n    className: \"select-category-item__title\"\n  }, title));\n}, function (prevProps, nextProps) {\n  if (prevProps.isActive === nextProps.isActive) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/components/popup/index.tsx\n\n\nvar Popup = function Popup(_ref) {\n  var className = _ref.className,\n      closeCallback = _ref.closeCallback,\n      children = _ref.children;\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"popup-wrap \".concat(className)\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"popup\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"popup__close-wrap\"\n  }, /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return closeCallback();\n    },\n    className: \"popup__close\"\n  })), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"popup__content\"\n  }, children)));\n};\n;// CONCATENATED MODULE: ./src/components/selectCategories/index.tsx\n\n\n\n\n\n\nvar SelectCategories = (0,mobxreact_esm/* observer */.Pi)(function (_ref) {\n  var selectdedCategories = _ref.selectdedCategories,\n      delSelectdedCategories = _ref.delSelectdedCategories,\n      addSelectdedCategories = _ref.addSelectdedCategories,\n      setIsOpen = _ref.setIsOpen;\n\n  var _React$useContext = react.useContext(store),\n      categories = _React$useContext.categoriesStore.categories;\n\n  var renderCategories = function renderCategories() {\n    var isActive;\n    return categories.list.map(function (id) {\n      if (categories.list.indexOf(id) !== -1) {\n        selectdedCategories.indexOf(id) !== -1 ? isActive = true : isActive = false;\n        return /*#__PURE__*/react.createElement(SelectCategoriesItem, {\n          key: id,\n          isActive: isActive,\n          title: \"\".concat(categories.items[id].title),\n          addCallback: function addCallback() {\n            return addSelectdedCategories(id);\n          },\n          delCallback: function delCallback() {\n            return delSelectdedCategories(id);\n          }\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/react.createElement(Popup, {\n    className: \"\",\n    closeCallback: function closeCallback() {\n      return setIsOpen(false);\n    }\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"select-category-header\"\n  }, \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"select-category select-category_none\"\n  }, renderCategories()));\n});\n;// CONCATENATED MODULE: ./src/components/categories/index.tsx\n\n\n\n\n\n\n\n\n\nvar Categories = (0,mobxreact_esm/* observer */.Pi)(function (_ref) {\n  var selectdedCategories = _ref.selectdedCategories,\n      delSelectdedCategories = _ref.delSelectdedCategories,\n      addSelectdedCategories = _ref.addSelectdedCategories;\n\n  var _React$useContext = react.useContext(store),\n      _React$useContext$cat = _React$useContext.categoriesStore,\n      categories = _React$useContext$cat.categories,\n      getAllCategories = _React$useContext$cat.getAllCategories;\n\n  var _useState = (0,react.useState)(false),\n      _useState2 = (0,slicedToArray/* default */.Z)(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  (0,react.useEffect)(function () {\n    if (categories === null) getAllCategories();\n  }, []);\n  if (categories === null) return /*#__PURE__*/react.createElement(\"div\", null, \"Loading\");\n\n  var renderCategories = function renderCategories() {\n    return selectdedCategories.map(function (categoryId) {\n      if (categories.list.indexOf(categoryId) !== -1) {\n        return /*#__PURE__*/react.createElement(CategoriesItem, {\n          key: categories.items[categoryId].id,\n          title: categories.items[categoryId].title,\n          delCallback: function delCallback() {\n            return delSelectdedCategories(categoryId);\n          }\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"categorys\"\n  }, /*#__PURE__*/react.createElement(CategoriesAddButton, {\n    callback: function callback() {\n      return setIsOpen(true);\n    }\n  }), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"categorys-items-wrap\"\n  }, renderCategories())), isOpen && /*#__PURE__*/react.createElement(SelectCategories, {\n    selectdedCategories: selectdedCategories,\n    addSelectdedCategories: addSelectdedCategories,\n    delSelectdedCategories: delSelectdedCategories,\n    setIsOpen: setIsOpen\n  }));\n});\n;// CONCATENATED MODULE: ./src/components/searchInput/index.tsx\n\n\n\n\nvar SearchInput = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$sea = _React$useContext.searchStore.form,\n      searchString = _React$useContext$sea.searchString,\n      setSearchString = _React$useContext$sea.setSearchString;\n\n  return /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setSearchString(e.target.value);\n    },\n    value: searchString,\n    className: \"search-form__input\",\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n  });\n});\n;// CONCATENATED MODULE: ./src/components/searchForm/index.tsx\n\n\n\n\n\n\n\n\nvar SearchForm = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$sea = _React$useContext.searchStore,\n      find = _React$useContext$sea.find,\n      setTotalPages = _React$useContext$sea.setTotalPages,\n      setRequestParams = _React$useContext$sea.setRequestParams,\n      setRequestParamsFromBowserSearchString = _React$useContext$sea.setRequestParamsFromBowserSearchString,\n      _React$useContext$sea2 = _React$useContext$sea.form,\n      selectdedCategories = _React$useContext$sea2.selectdedCategories,\n      addSelectdedCategories = _React$useContext$sea2.addSelectdedCategories,\n      delSelectdedCategories = _React$useContext$sea2.delSelectdedCategories,\n      searchString = _React$useContext$sea.request.searchString;\n\n  var history = (0,react_router/* useHistory */.k6)();\n  var location = (0,react_router/* useLocation */.TH)();\n\n  var onClickFind = function onClickFind() {\n    setRequestParams();\n    var url = encodeURI(\"/?search=\".concat(searchString, \"&categories=\").concat(selectdedCategories));\n    history.push(url);\n    setTotalPages();\n    find();\n  };\n\n  (0,react.useEffect)(function () {\n    var params = new URLSearchParams(location.search);\n    var searchString = '',\n        categories = '';\n    if (params.has('search')) searchString = decodeURIComponent(params.get('search'));\n    if (params.has('categories')) categories = decodeURIComponent(params.get('categories'));\n    var categoriesArr = categories.length > 0 ? categories.split(',').map(Number) : '';\n    setRequestParamsFromBowserSearchString(searchString, categoriesArr);\n    setTotalPages();\n    find();\n  }, []);\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"search-form-wrap\"\n  }, /*#__PURE__*/react.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return e.preventDefault();\n    },\n    className: \"search-form\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"search-form__input-wrap\"\n  }, /*#__PURE__*/react.createElement(SearchInput, null), /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return onClickFind();\n    },\n    className: \"search-form__button\",\n    type: \"submit\"\n  }, \"\\u041D\\u0430\\u0439\\u0442\\u0438\"), /*#__PURE__*/react.createElement(Categories, {\n    selectdedCategories: selectdedCategories,\n    addSelectdedCategories: addSelectdedCategories,\n    delSelectdedCategories: delSelectdedCategories\n  }))));\n});\n;// CONCATENATED MODULE: ./src/components/editCatalogItem/index.tsx\n\n\n\n\n\n\nvar EditCatalogItem = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$cat = _React$useContext.catalogStore,\n      _React$useContext$cat2 = _React$useContext$cat.editWindow,\n      isOpen = _React$useContext$cat2.isOpen,\n      title = _React$useContext$cat2.title,\n      anons = _React$useContext$cat2.anons,\n      relatedCategories = _React$useContext$cat2.relatedCategories,\n      previewImg = _React$useContext$cat2.previewImg,\n      saveCatalogItem = _React$useContext$cat.saveCatalogItem,\n      setEditWindow = _React$useContext$cat.setEditWindow,\n      addRelatedCategories = _React$useContext$cat.addRelatedCategories,\n      delRelatedCategories = _React$useContext$cat.delRelatedCategories;\n\n  var fileInput = react.useRef(null);\n\n  var handleImg = function handleImg(input) {\n    setEditWindow({\n      img: input.files[0],\n      previewImg: URL.createObjectURL(input.files[0])\n    });\n    fileInput.current.value = null;\n  };\n\n  return isOpen && /*#__PURE__*/react.createElement(Popup, {\n    className: \"\",\n    closeCallback: function closeCallback() {\n      return setEditWindow({\n        isOpen: false\n      });\n    }\n  }, /*#__PURE__*/react.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return e.preventDefault();\n    },\n    className: \"edit-cat-item-form\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__img-wrap\"\n  }, /*#__PURE__*/react.createElement(\"div\", null, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__input-title\"\n  }, \"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/react.createElement(\"label\", {\n    className: \"button edit-cat-item-form__img-button\"\n  }, \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C\", /*#__PURE__*/react.createElement(\"input\", {\n    ref: fileInput,\n    onChange: function onChange(e) {\n      return handleImg(e.target);\n    },\n    className: \"edit-cat-item-form__img-input\",\n    accept: \"image/x-png,image/gif,image/jpeg\",\n    type: \"file\",\n    name: \"image\"\n  }))), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__img\",\n    style: {\n      backgroundImage: \"url(\".concat(previewImg, \")\")\n    }\n  }, previewImg && /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return setEditWindow({\n        img: '',\n        previewImg: ''\n      });\n    },\n    className: \"edit-cat-item-form-del\"\n  }))), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__input-wrap\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__input-title\"\n  }, \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"), /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setEditWindow({\n        title: e.target.value\n      });\n    },\n    value: title,\n    className: \"edit-cat-item-form__input\",\n    type: \"text\",\n    name: \"title\"\n  }), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__input-title\"\n  }, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"), /*#__PURE__*/react.createElement(\"textarea\", {\n    onChange: function onChange(e) {\n      return setEditWindow({\n        anons: e.target.value\n      });\n    },\n    value: anons,\n    className: \"edit-cat-item-form__textarea\",\n    name: \"anons\"\n  })), /*#__PURE__*/react.createElement(Categories, {\n    selectdedCategories: relatedCategories,\n    addSelectdedCategories: addRelatedCategories,\n    delSelectdedCategories: delRelatedCategories\n  }), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"edit-cat-item-form__submit-wrap\"\n  }, /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return saveCatalogItem();\n    },\n    className: \"button\"\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"))));\n});\n;// CONCATENATED MODULE: ./src/components/button/index.tsx\n\n\nvar Button = function Button(_ref) {\n  var name = _ref.name,\n      className = _ref.className,\n      callback = _ref.callback;\n  return /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return callback();\n    },\n    className: \"button \".concat(className)\n  }, name);\n};\n;// CONCATENATED MODULE: ./src/components/catalogCategoryItem/index.tsx\n\n\nvar CatalogCategoryItem = /*#__PURE__*/react.memo(function (_ref) {\n  var title = _ref.title;\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__category-item\"\n  }, title);\n}, function (prevProps, nextProps) {\n  if (prevProps.title === nextProps.title) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/components/catalogItem/index.tsx\n\n\n\n\nvar CatalogItem = /*#__PURE__*/react.memo(function (_ref) {\n  var isAuth = _ref.isAuth,\n      title = _ref.title,\n      anons = _ref.anons,\n      image = _ref.image,\n      categories = _ref.categories,\n      editCallback = _ref.editCallback,\n      delCallback = _ref.delCallback;\n\n  var renderCategories = function renderCategories() {\n    return categories.map(function (category) {\n      if (category.id) {\n        return /*#__PURE__*/react.createElement(CatalogCategoryItem, {\n          title: category.title,\n          key: category.id\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__img__wrap\"\n  }, /*#__PURE__*/react.createElement(\"img\", {\n    alt: title,\n    className: \"catalog-item__img\",\n    src: \"\".concat(image ? \"\" + image : '')\n  })), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__txt\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__header\"\n  }, title), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__categorys\"\n  }, renderCategories()), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__anons\"\n  }, anons)), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog-item__ctrl-buttons\"\n  }, isAuth && /*#__PURE__*/react.createElement(Button, {\n    className: \"button_catalog-item\",\n    name: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\",\n    callback: editCallback\n  }), isAuth && /*#__PURE__*/react.createElement(Button, {\n    className: \"button_catalog-item\",\n    name: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",\n    callback: delCallback\n  })));\n}, function (prevProps, nextProps) {\n  if (prevProps.title === nextProps.title && prevProps.anons === nextProps.anons && prevProps.image === nextProps.image && prevProps.isAuth === nextProps.isAuth && JSON.stringify(prevProps.categories) === JSON.stringify(nextProps.categories)) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/hooks/useConfirmationDialog.tsx\n\n\n\n\nfunction useConfirmationDialog(_ref) {\n  var header = _ref.header,\n      confirmTitle = _ref.confirmTitle,\n      cancelTitle = _ref.cancelTitle,\n      onConfirmClick = _ref.onConfirmClick;\n\n  var _useState = (0,react.useState)(false),\n      _useState2 = (0,slicedToArray/* default */.Z)(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var onOpen = function onOpen() {\n    return setIsOpen(!isOpen);\n  };\n\n  var ConfirmationDialog = (0,react.useCallback)(function () {\n    return isOpen && /*#__PURE__*/react.createElement(Popup, {\n      closeCallback: onOpen,\n      className: \"popup-wrap_delete-confirmation\"\n    }, /*#__PURE__*/react.createElement(\"div\", {\n      className: \"popup-delete-confirmation__header\"\n    }, header), /*#__PURE__*/react.createElement(\"div\", {\n      className: \"popup-delete-confirmation__buttons-wrap\"\n    }, /*#__PURE__*/react.createElement(Button, {\n      name: confirmTitle,\n      className: '',\n      callback: function callback() {\n        return onConfirmClick();\n      }\n    }), /*#__PURE__*/react.createElement(Button, {\n      name: cancelTitle,\n      className: '',\n      callback: onOpen\n    })));\n  }, [isOpen]);\n  return {\n    onOpen: onOpen,\n    ConfirmationDialog: ConfirmationDialog\n  };\n}\n;// CONCATENATED MODULE: ./src/components/catalog/index.tsx\n\n\n\n\n\n\n\nvar Catalog = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      isAuth = _React$useContext.authStore.isAuth,\n      _React$useContext$cat = _React$useContext.catalogStore,\n      catalog = _React$useContext$cat.catalog,\n      delCatalogItem = _React$useContext$cat.delCatalogItem,\n      setEditWindow = _React$useContext$cat.setEditWindow,\n      setDeleteId = _React$useContext$cat.setDeleteId,\n      _React$useContext$sea = _React$useContext.searchStore,\n      currentPage = _React$useContext$sea.currentPage,\n      totalPages = _React$useContext$sea.totalPages,\n      findNextPage = _React$useContext$sea.findNextPage;\n\n  var _useConfirmationDialo = useConfirmationDialog({\n    header: 'Удалить?',\n    confirmTitle: 'Да',\n    cancelTitle: 'Нет',\n    onConfirmClick: function onConfirmClick() {\n      return confirmDelete();\n    }\n  }),\n      ConfirmationDialog = _useConfirmationDialo.ConfirmationDialog,\n      onOpen = _useConfirmationDialo.onOpen;\n\n  if (catalog === null) return /*#__PURE__*/react.createElement(\"div\", null, \"Loading\");\n\n  var handleDelete = function handleDelete(id) {\n    setDeleteId(id);\n    onOpen();\n  };\n\n  var confirmDelete = function confirmDelete() {\n    onOpen();\n    delCatalogItem();\n  };\n\n  var renderCatalogItems = function renderCatalogItems() {\n    return catalog.list.map(function (id) {\n      return /*#__PURE__*/react.createElement(CatalogItem, {\n        key: id,\n        isAuth: isAuth,\n        title: catalog.items[id].title,\n        anons: catalog.items[id].anons,\n        image: catalog.items[id].image,\n        categories: catalog.items[id].categories,\n        editCallback: function editCallback() {\n          return setEditWindow({\n            isOpen: true,\n            catalogId: id,\n            title: catalog.items[id].title,\n            anons: catalog.items[id].anons,\n            img: catalog.items[id].image,\n            previewImg: catalog.items[id].image,\n            relatedCategories: catalog.items[id].categories.map(function (category) {\n              return category.id;\n            })\n          });\n        },\n        delCallback: function delCallback() {\n          return handleDelete(id);\n        }\n      });\n    });\n  };\n\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"catalog\"\n  }, catalog.list.length > 0 ? renderCatalogItems() : /*#__PURE__*/react.createElement(\"div\", null, \"\\u041D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"), totalPages > 1 && currentPage < totalPages && /*#__PURE__*/react.createElement(Button, {\n    name: \"\\u0414\\u0430\\u043B\\u0435\\u0435\",\n    className: \"button_paging\",\n    callback: function callback() {\n      return findNextPage();\n    }\n  })), /*#__PURE__*/react.createElement(ConfirmationDialog, null));\n});\n;// CONCATENATED MODULE: ./src/pages/index/index.tsx\n\n\n\n\n\n\nvar IndexPage = function IndexPage() {\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(Nav, null), /*#__PURE__*/react.createElement(SearchForm, null), /*#__PURE__*/react.createElement(Catalog, null), /*#__PURE__*/react.createElement(EditCatalogItem, null));\n};\n;// CONCATENATED MODULE: ./src/components/addNewCategoryForm/index.tsx\n\n\n\n\nvar AddNewCategoryForm = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$set = _React$useContext.setupStore,\n      categoryTitle = _React$useContext$set.categoryTitle,\n      setCategoryTitle = _React$useContext$set.setCategoryTitle,\n      addCategoryItem = _React$useContext$set.addCategoryItem;\n\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"add-category-form-wrap\"\n  }, /*#__PURE__*/react.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return e.preventDefault();\n    },\n    className: \"add-category-form\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"add-category-form__input-wrap\"\n  }, /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setCategoryTitle(e.target.value);\n    },\n    value: categoryTitle,\n    className: \"add-category-form__input\",\n    type: \"text\",\n    name: \"title\",\n    placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n  }), /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return addCategoryItem();\n    },\n    className: \"add-category-form__button\",\n    type: \"submit\"\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"))));\n});\n;// CONCATENATED MODULE: ./src/components/setupCategoriesItem/index.tsx\n\n\n\nvar SetupCategoriesItem = /*#__PURE__*/react.memo(function (_ref) {\n  var title = _ref.title,\n      openEditWindow = _ref.openEditWindow;\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"setup-categorys__item\"\n  }, /*#__PURE__*/react.createElement(\"span\", {\n    className: \"setup-categorys__header\"\n  }, title), /*#__PURE__*/react.createElement(Button, {\n    name: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\",\n    className: \"button_setup-categorys-item\",\n    callback: openEditWindow\n  }));\n}, function (prevProps, nextProps) {\n  if (prevProps.title === nextProps.title) return true;\n  return false;\n});\n;// CONCATENATED MODULE: ./src/components/setupCategoriesEditWin/index.tsx\n\n\n\n\n\n\nvar SetupCategoriesEditWin = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$set = _React$useContext.setupStore,\n      _React$useContext$set2 = _React$useContext$set.editWindow,\n      isOpen = _React$useContext$set2.isOpen,\n      title = _React$useContext$set2.title,\n      setEditWindow = _React$useContext$set.setEditWindow,\n      updateCategoryItem = _React$useContext$set.updateCategoryItem,\n      deleteCategoryItem = _React$useContext$set.deleteCategoryItem;\n\n  var _useConfirmationDialo = useConfirmationDialog({\n    header: 'Удалить?',\n    confirmTitle: 'Да',\n    cancelTitle: 'Нет',\n    onConfirmClick: function onConfirmClick() {\n      return confirmDelete();\n    }\n  }),\n      ConfirmationDialog = _useConfirmationDialo.ConfirmationDialog,\n      onOpen = _useConfirmationDialo.onOpen;\n\n  var confirmDelete = function confirmDelete() {\n    onOpen();\n    deleteCategoryItem();\n  };\n\n  return /*#__PURE__*/react.createElement(react.Fragment, null, isOpen && /*#__PURE__*/react.createElement(Popup, {\n    closeCallback: function closeCallback() {\n      return setEditWindow({\n        isOpen: false,\n        id: null,\n        title: ''\n      });\n    },\n    className: \"popup-wrap_setup-categorys\"\n  }, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"setup-category-edit\"\n  }, /*#__PURE__*/react.createElement(\"input\", {\n    className: \"setup-category-edit__title-input\",\n    type: \"text\",\n    name: \"new_title\",\n    value: title,\n    onChange: function onChange(e) {\n      return setEditWindow({\n        title: e.target.value\n      });\n    },\n    placeholder: \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"\n  })), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"setup-category-edit__buttons-wrap\"\n  }, /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return updateCategoryItem();\n    },\n    className: \"button button_catalog-item\"\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"), /*#__PURE__*/react.createElement(\"button\", {\n    onClick: function onClick() {\n      return onOpen();\n    },\n    className: \"button button_catalog-item\"\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"))), /*#__PURE__*/react.createElement(ConfirmationDialog, null));\n});\n;// CONCATENATED MODULE: ./src/components/setupCategories/index.tsx\n\n\n\n\n\n\n\nvar SetupCategories = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$cat = _React$useContext.categoriesStore,\n      categories = _React$useContext$cat.categories,\n      getAllCategories = _React$useContext$cat.getAllCategories,\n      setEditWindow = _React$useContext.setupStore.setEditWindow;\n\n  (0,react.useEffect)(function () {\n    if (categories === null) {\n      getAllCategories();\n    }\n  }, []);\n\n  var renderCategories = function renderCategories() {\n    return categories.list.slice().reverse().map(function (categoryId) {\n      return /*#__PURE__*/react.createElement(SetupCategoriesItem, {\n        key: categoryId,\n        id: categoryId,\n        openEditWindow: function openEditWindow() {\n          return setEditWindow({\n            isOpen: true,\n            id: categoryId,\n            title: categories.items[categoryId].title\n          });\n        },\n        title: categories.items[categoryId].title\n      });\n    });\n  };\n\n  if (categories === null) {\n    return /*#__PURE__*/react.createElement(\"div\", null, \"Loading\");\n  }\n\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(\"div\", {\n    className: \"setup-categorys\"\n  }, renderCategories()), /*#__PURE__*/react.createElement(SetupCategoriesEditWin, null));\n});\n;// CONCATENATED MODULE: ./src/pages/setup/index.tsx\n\n\n\n\n\nvar SetupPage = function SetupPage() {\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(Nav, null), /*#__PURE__*/react.createElement(AddNewCategoryForm, null), /*#__PURE__*/react.createElement(SetupCategories, null));\n};\n;// CONCATENATED MODULE: ./src/components/loginForm/index.tsx\n\n\n\n\n\n\n\nvar LoginForm = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$aut = _React$useContext.authStore,\n      isAuth = _React$useContext$aut.isAuth,\n      login = _React$useContext$aut.login,\n      setLogin = _React$useContext$aut.setLogin,\n      password = _React$useContext$aut.password,\n      setPassword = _React$useContext$aut.setPassword,\n      errorLogin = _React$useContext$aut.errorLogin,\n      loginRequest = _React$useContext$aut.loginRequest;\n\n  var history = (0,react_router/* useHistory */.k6)();\n  var location = (0,react_router/* useLocation */.TH)();\n  (0,react.useEffect)(function () {\n    if (isAuth) {\n      var _ref = location.state || {\n        from: {\n          pathname: \"/\"\n        }\n      },\n          from = _ref.from;\n\n      history.replace(from);\n    }\n  }, [isAuth]);\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"login-form-wrap\"\n  }, /*#__PURE__*/react.createElement(\"h1\", null, \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"), /*#__PURE__*/react.createElement(\"div\", {\n    className: \"login-form__error\"\n  }, errorLogin), /*#__PURE__*/react.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      return e.preventDefault();\n    },\n    className: \"login-form\"\n  }, /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setLogin(e.target.value);\n    },\n    value: login,\n    className: \"login-form__input\",\n    type: \"text\",\n    name: \"login\",\n    placeholder: \"\\u041B\\u043E\\u0433\\u0438\\u043D\"\n  }), /*#__PURE__*/react.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    value: password,\n    className: \"login-form__input\",\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n  }), /*#__PURE__*/react.createElement(Button, {\n    callback: loginRequest,\n    name: 'Войти',\n    className: 'login-form__button'\n  })));\n});\n;// CONCATENATED MODULE: ./src/pages/login/index.tsx\n\n\n\n\nvar LoginPage = function LoginPage() {\n  return /*#__PURE__*/react.createElement(react.Fragment, null, /*#__PURE__*/react.createElement(Nav, null), /*#__PURE__*/react.createElement(LoginForm, null));\n};\n;// CONCATENATED MODULE: ./src/pages/404/index.tsx\n\n\nvar PageNotFound = function PageNotFound() {\n  return /*#__PURE__*/react.createElement(\"p\", null, \"404 Page not found\");\n};\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/extends.js\nvar esm_extends = __webpack_require__(\"+9dHOjM1\");\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\nvar objectWithoutProperties = __webpack_require__(\"BkpHt/Y0\");\n;// CONCATENATED MODULE: ./src/components/privateRoute/index.tsx\n\n\nvar _excluded = [\"children\"];\n\n\n\n\nvar PrivateRoute = (0,mobxreact_esm/* observer */.Pi)(function (_ref) {\n  var children = _ref.children,\n      rest = (0,objectWithoutProperties/* default */.Z)(_ref, _excluded);\n\n  var _React$useContext = react.useContext(store),\n      isAuth = _React$useContext.authStore.isAuth;\n\n  return /*#__PURE__*/react.createElement(react_router/* Route */.AW, (0,esm_extends/* default */.Z)({}, rest, {\n    render: function render(_ref2) {\n      var location = _ref2.location;\n      return isAuth ? children : /*#__PURE__*/react.createElement(react_router/* Redirect */.l_, {\n        to: {\n          pathname: \"/auth\",\n          state: {\n            from: location\n          }\n        }\n      });\n    }\n  }));\n});\n;// CONCATENATED MODULE: ./src/routes.tsx\n\n\n\n\n\n\n\n\n\n\nvar Routes = (0,mobxreact_esm/* observer */.Pi)(function () {\n  var _React$useContext = react.useContext(store),\n      _React$useContext$aut = _React$useContext.authStore,\n      isAuth = _React$useContext$aut.isAuth,\n      authRequest = _React$useContext$aut.authRequest;\n\n  (0,react.useEffect)(function () {\n    if (isAuth !== true && isAuth !== false) {\n      authRequest();\n    }\n  }, [isAuth]);\n\n  if (isAuth !== true && isAuth !== false) {\n    return /*#__PURE__*/react.createElement(\"div\", null, \"Loading\");\n  }\n\n  return /*#__PURE__*/react.createElement(react_router_dom/* BrowserRouter */.VK, null, /*#__PURE__*/react.createElement(react_router/* Switch */.rs, null, /*#__PURE__*/react.createElement(react_router/* Route */.AW, {\n    exact: true,\n    path: \"/\"\n  }, /*#__PURE__*/react.createElement(IndexPage, null)), /*#__PURE__*/react.createElement(PrivateRoute, {\n    exact: true,\n    path: \"/setup\"\n  }, /*#__PURE__*/react.createElement(SetupPage, null)), /*#__PURE__*/react.createElement(react_router/* Route */.AW, {\n    exact: true,\n    path: \"/auth\"\n  }, /*#__PURE__*/react.createElement(LoginPage, null)), /*#__PURE__*/react.createElement(react_router/* Route */.AW, {\n    path: \"*\"\n  }, /*#__PURE__*/react.createElement(PageNotFound, null))));\n});\n;// CONCATENATED MODULE: ./src/index.tsx\n\n\n\n\n\n\nvar App = function App() {\n  return /*#__PURE__*/react.createElement(\"div\", {\n    className: \"content\"\n  }, /*#__PURE__*/react.createElement(MobXProvider, null, /*#__PURE__*/react.createElement(Routes, null)));\n};\n\nreact_dom.render( /*#__PURE__*/react.createElement(App, null), document.getElementById(\"app\"));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibFRFWmljYTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdm9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2xpYnMvbG9jYWxTdG9yYWdlLnRzPzM4NzAiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9hcGkvaW5kZXgudHM/NTllNiIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL3N0b3JlL2NhdGFsb2dTdG9yZS50cz8wMjI0Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvbGlicy9tYXBDYXRhbG9nLnRzPzc1ZDYiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9zdG9yZS9zZWFyY2hTdG9yZS50cz85ZDdiIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvc3RvcmUvYXV0aFN0b3JlLnRzPzgzYTkiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9saWJzL21hcENhdGVnb3JpZXMudHM/MTc3MiIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL3N0b3JlL2NhdGVnb3JpZXNTdG9yZS50cz85Y2Y0Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvc3RvcmUvc2V0dXBTdG9yZS50cz85MmI4Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvc3RvcmUvaW5kZXgudHN4P2Q4MWQiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL25hdkJ1dHRvbi9pbmRleC50c3g/Yjc2OSIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvbmF2QnV0dG9uU2VhcmNoL2luZGV4LnRzeD84N2E5Iiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9uYXYvaW5kZXgudHN4PzViZDciLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2NhdGVnb3JpZXNBZGRCdXR0b24vaW5kZXgudHN4PzAwNGQiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2NhdGVnb3JpZXNJdGVtL2luZGV4LnRzeD8yMzVlIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9zZWxlY3RDYXRlZ29yaWVzSXRlbS9pbmRleC50c3g/ZGQ2MyIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvcG9wdXAvaW5kZXgudHN4PzQ2YzMiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL3NlbGVjdENhdGVnb3JpZXMvaW5kZXgudHN4Pzg5MmIiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2NhdGVnb3JpZXMvaW5kZXgudHN4PzNlNTEiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL3NlYXJjaElucHV0L2luZGV4LnRzeD9hOGIwIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9zZWFyY2hGb3JtL2luZGV4LnRzeD80NzMwIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9lZGl0Q2F0YWxvZ0l0ZW0vaW5kZXgudHN4PzJhMDQiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2J1dHRvbi9pbmRleC50c3g/OWY3MiIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvY2F0YWxvZ0NhdGVnb3J5SXRlbS9pbmRleC50c3g/YjZkNyIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvY2F0YWxvZ0l0ZW0vaW5kZXgudHN4PzY5YzgiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9ob29rcy91c2VDb25maXJtYXRpb25EaWFsb2cudHN4P2IyZTgiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL2NhdGFsb2cvaW5kZXgudHN4Pzk4NTIiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9wYWdlcy9pbmRleC9pbmRleC50c3g/MTZhZCIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvYWRkTmV3Q2F0ZWdvcnlGb3JtL2luZGV4LnRzeD9mOTJjIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9zZXR1cENhdGVnb3JpZXNJdGVtL2luZGV4LnRzeD9iYTVkIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9zZXR1cENhdGVnb3JpZXNFZGl0V2luL2luZGV4LnRzeD8zY2JmIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvY29tcG9uZW50cy9zZXR1cENhdGVnb3JpZXMvaW5kZXgudHN4PzFjYjQiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9wYWdlcy9zZXR1cC9pbmRleC50c3g/MDQ5ZSIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2NvbXBvbmVudHMvbG9naW5Gb3JtL2luZGV4LnRzeD8xOGMxIiwid2VicGFjazovL2NvbGxlY3Rpb24vLi9zcmMvcGFnZXMvbG9naW4vaW5kZXgudHN4PzBjN2EiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9wYWdlcy80MDQvaW5kZXgudHN4PzY1NTkiLCJ3ZWJwYWNrOi8vY29sbGVjdGlvbi8uL3NyYy9jb21wb25lbnRzL3ByaXZhdGVSb3V0ZS9pbmRleC50c3g/MzE5ZSIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL3JvdXRlcy50c3g/ZTZmNyIsIndlYnBhY2s6Ly9jb2xsZWN0aW9uLy4vc3JjL2luZGV4LnRzeD9jMjc4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHtcbiAgc2F2ZVRva2VuVG9TdG9yYWdlOiBmdW5jdGlvbiBzYXZlVG9rZW5Ub1N0b3JhZ2UodG9rZW4pIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCB0b2tlbik7XG4gIH0sXG4gIGNsZWFyVG9rZW5Gcm9tU3RvcmFnZTogZnVuY3Rpb24gY2xlYXJUb2tlbkZyb21TdG9yYWdlKCkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpO1xuICB9LFxuICBnZXRUb2tlbkZyb21TdG9yYWdlOiBmdW5jdGlvbiBnZXRUb2tlbkZyb21TdG9yYWdlKCkge1xuICAgIGlmICghbG9jYWxTdG9yYWdlLnRva2VuKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnRva2VuO1xuICB9XG59OyIsImltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrXCI7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIjtcblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHRva2Vuc1N0b3JhZ2UgZnJvbSBcIi4uL2xpYnMvbG9jYWxTdG9yYWdlXCI7XG5cbnZhciBBcGkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBBcGkoYmFja2VuZEhvc3QpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXBpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInVybFJvb3RcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wdGlvbnNEZWZhdWx0XCIsIHt9KTtcblxuICAgIGF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IucmVzcG9uc2UpO1xuICAgIH0pOyAvL3NldCBhcGkgdXJsIHJvb3QgZm9yIGRldiBhbmQgcHJvZFxuXG4gICAgdGhpcy51cmxSb290ID0gXCJcIi5jb25jYXQoYmFja2VuZEhvc3QsIFwiL2FwaVwiKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhBcGksIFt7XG4gICAga2V5OiBcInJlcXVlc3RXaXRoVG9rZW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9yZXF1ZXN0V2l0aFRva2VuID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBhY2Nlc3NUb2tlbjtcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDtcbiAgICAgICAgICAgICAgICBvcHRpb25zLnVybCA9IFwiXCIuY29uY2F0KHRoaXMudXJsUm9vdCkuY29uY2F0KG9wdGlvbnMudXJsKTtcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbiA9IHRva2Vuc1N0b3JhZ2UuZ2V0VG9rZW5Gcm9tU3RvcmFnZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVycyA9IHt9O1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5oZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChhY2Nlc3NUb2tlbikgb3B0aW9ucy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBcIkJlYXJlciBcIi5jb25jYXQoYWNjZXNzVG9rZW4pO1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3O1xuICAgICAgICAgICAgICAgIHJldHVybiBheGlvcyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMub3B0aW9uc0RlZmF1bHQpLCBvcHRpb25zKSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdChcInJldHVyblwiLCBfY29udGV4dC5zZW50KTtcblxuICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDtcbiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0W1wiY2F0Y2hcIl0oMCk7XG4gICAgICAgICAgICAgICAgaWYgKF9jb250ZXh0LnQwIGluc3RhbmNlb2YgRXJyb3IpIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1swLCAxMF1dKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gcmVxdWVzdFdpdGhUb2tlbihfeDMpIHtcbiAgICAgICAgcmV0dXJuIF9yZXF1ZXN0V2l0aFRva2VuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXF1ZXN0V2l0aFRva2VuO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcImxvZ2luXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIChfbG9naW4pIHtcbiAgICAgIGZ1bmN0aW9uIGxvZ2luKF94LCBfeDIpIHtcbiAgICAgICAgcmV0dXJuIF9sb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICBsb2dpbi50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9sb2dpbi50b1N0cmluZygpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGxvZ2luO1xuICAgIH0oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGxvZ2luLCBwYXNzd29yZCkge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIlwiLmNvbmNhdCh0aGlzLnVybFJvb3QsIFwiL3VzZXJzL2xvZ2luL1wiKSxcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBsb2dpbjogbG9naW4sXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzO1xuICAgICAgICAgICAgICAgIHJldHVybiBheGlvcyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMub3B0aW9uc0RlZmF1bHQpLCBvcHRpb25zKSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDQsIF94NSkge1xuICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KCkpXG4gIH0sIHtcbiAgICBrZXk6IFwibG9nb3V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfbG9nb3V0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7XG4gICAgICAgIHZhciBvcHRpb25zLCByZXM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0Mykge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICB1cmw6IFwiL3VzZXJzL2xvZ291dC9cIixcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgZGF0YToge31cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdChcInJldHVyblwiLCByZXMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICAgIHJldHVybiBfbG9nb3V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsb2dvdXQ7XG4gICAgfSgpXG4gIH0sIHtcbiAgICBrZXk6IFwidXNlckNoZWNrQXV0aFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3VzZXJDaGVja0F1dGggPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCIvdXNlcnMvYXV0aC9cIixcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDQuc2VudDtcblxuICAgICAgICAgICAgICAgIGlmICghKHJlcyAhPT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIiwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiB1c2VyQ2hlY2tBdXRoKCkge1xuICAgICAgICByZXR1cm4gX3VzZXJDaGVja0F1dGguYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVzZXJDaGVja0F1dGg7XG4gICAgfSgpXG4gIH0sIHtcbiAgICBrZXk6IFwiZmluZENhdGFsb2dJdGVtc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2ZpbmRDYXRhbG9nSXRlbXMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShxdWVyeSwgY2F0ZWdvcmllcywgcGFnZSkge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi9zZWFyY2g/c2VhcmNoPVwiLmNvbmNhdChxdWVyeSwgXCImY2F0ZWdvcmllcz1cIikuY29uY2F0KGNhdGVnb3JpZXMsIFwiJnBhZ2U9XCIpLmNvbmNhdChwYWdlKSxcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDUuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdChcInJldHVyblwiLCByZXMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBmaW5kQ2F0YWxvZ0l0ZW1zKF94NiwgX3g3LCBfeDgpIHtcbiAgICAgICAgcmV0dXJuIF9maW5kQ2F0YWxvZ0l0ZW1zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmaW5kQ2F0YWxvZ0l0ZW1zO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcImZpbmRUb3RhbFBhZ2VzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfZmluZFRvdGFsUGFnZXMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihxdWVyeSwgY2F0ZWdvcmllcykge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi9zZWFyY2gvdG90YWwtcGFnZXMvP3NlYXJjaD1cIi5jb25jYXQocXVlcnksIFwiJmNhdGVnb3JpZXM9XCIpLmNvbmNhdChjYXRlZ29yaWVzKSxcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDYuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdChcInJldHVyblwiLCByZXMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTYsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBmaW5kVG90YWxQYWdlcyhfeDksIF94MTApIHtcbiAgICAgICAgcmV0dXJuIF9maW5kVG90YWxQYWdlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmluZFRvdGFsUGFnZXM7XG4gICAgfSgpXG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkQ2F0ZWdvcnlJdGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfYWRkQ2F0ZWdvcnlJdGVtID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcodGl0bGUpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCIvY2F0ZWdvcnkvXCIsXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ3LnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gYWRkQ2F0ZWdvcnlJdGVtKF94MTEpIHtcbiAgICAgICAgcmV0dXJuIF9hZGRDYXRlZ29yeUl0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFkZENhdGVnb3J5SXRlbTtcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJnZXRBbGxDYXRlZ29yaWVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfZ2V0QWxsQ2F0ZWdvcmllcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi9jYXRlZ29yeS9cIixcbiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDguc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdChcInJldHVyblwiLCByZXMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTgsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBnZXRBbGxDYXRlZ29yaWVzKCkge1xuICAgICAgICByZXR1cm4gX2dldEFsbENhdGVnb3JpZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdldEFsbENhdGVnb3JpZXM7XG4gICAgfSgpXG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlQ2F0ZWdvcnlJdGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdXBkYXRlQ2F0ZWdvcnlJdGVtID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoaWQsIHRpdGxlKSB7XG4gICAgICAgIHZhciBvcHRpb25zLCByZXM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICB1cmw6IFwiL2NhdGVnb3J5L1wiLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0V2l0aFRva2VuKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDkuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdChcInJldHVyblwiLCByZXMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTksIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeUl0ZW0oX3gxMiwgX3gxMykge1xuICAgICAgICByZXR1cm4gX3VwZGF0ZUNhdGVnb3J5SXRlbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdXBkYXRlQ2F0ZWdvcnlJdGVtO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcImRlbGV0ZUNhdGVnb3J5SXRlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2RlbGV0ZUNhdGVnb3J5SXRlbSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMChpZCkge1xuICAgICAgICB2YXIgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogXCIvY2F0ZWdvcnkvXCIsXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBpZDogaWRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxMC5zZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdChcInJldHVyblwiLCByZXMpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGRlbGV0ZUNhdGVnb3J5SXRlbShfeDE0KSB7XG4gICAgICAgIHJldHVybiBfZGVsZXRlQ2F0ZWdvcnlJdGVtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZWxldGVDYXRlZ29yeUl0ZW07XG4gICAgfSgpXG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkQ2F0YWxvZ0l0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9hZGRDYXRhbG9nSXRlbSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSh0aXRsZSwgYW5vbnMsIGltZywgcmVsYXRlZENhdGVnb3JpZXMpIHtcbiAgICAgICAgdmFyIHVybCwgcmVzRmlsZSwgb3B0aW9ucywgcmVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkge1xuICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgdXJsID0gJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgaW1nICE9PSAnc3RyaW5nJyAmJiBpbWcudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA0O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVwbG9hZE9uZUZpbGUoaW1nLCBcImNhdGFsb2ctaW1hZ2VcIiwgXCIvY2F0YWxvZy91cGxvYWQvXCIpO1xuXG4gICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXNGaWxlID0gX2NvbnRleHQxMS5zZW50O1xuICAgICAgICAgICAgICAgIGlmICghKHJlc0ZpbGUgaW5zdGFuY2VvZiBFcnJvcikpIHVybCA9IHJlc0ZpbGUuZGF0YS51cmw7XG5cbiAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW1nID09PSAnc3RyaW5nJykgdXJsID0gaW1nO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICB1cmw6IFwiL2NhdGFsb2cvXCIsXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBhbm9uczogYW5vbnMsXG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNJZDogcmVsYXRlZENhdGVnb3JpZXNcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDEwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RXaXRoVG9rZW4ob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDExLnNlbnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KFwicmV0dXJuXCIsIHJlcyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIF9jYWxsZWUxMSwgdGhpcyk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGFkZENhdGFsb2dJdGVtKF94MTUsIF94MTYsIF94MTcsIF94MTgpIHtcbiAgICAgICAgcmV0dXJuIF9hZGRDYXRhbG9nSXRlbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYWRkQ2F0YWxvZ0l0ZW07XG4gICAgfSgpXG4gIH0sIHtcbiAgICBrZXk6IFwidXBkQ2F0YWxvZ0l0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF91cGRDYXRhbG9nSXRlbSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMihpZCwgdGl0bGUsIGFub25zLCBpbWcsIHJlbGF0ZWRDYXRlZ29yaWVzKSB7XG4gICAgICAgIHZhciB1cmwsIHJlc0ZpbGUsIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHVybCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIGltZyAhPT0gJ3N0cmluZycgJiYgaW1nLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA2O1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRPbmVGaWxlKGltZywgXCJjYXRhbG9nLWltYWdlXCIsIFwiL2NhdGFsb2cvdXBsb2FkL1wiKTtcblxuICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmVzRmlsZSA9IF9jb250ZXh0MTIuc2VudDtcbiAgICAgICAgICAgICAgICBpZiAoIShyZXNGaWxlIGluc3RhbmNlb2YgRXJyb3IpKSB1cmwgPSByZXNGaWxlLmRhdGEudXJsO1xuXG4gICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGltZyA9PT0gJ3N0cmluZycpIHVybCA9IGltZztcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi9jYXRhbG9nL1wiLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGFub25zOiBhbm9ucyxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IHVybCxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc0lkOiByZWxhdGVkQ2F0ZWdvcmllc1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMTA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFdpdGhUb2tlbihvcHRpb25zKTtcblxuICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTIuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZTEyLCB0aGlzKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gdXBkQ2F0YWxvZ0l0ZW0oX3gxOSwgX3gyMCwgX3gyMSwgX3gyMiwgX3gyMykge1xuICAgICAgICByZXR1cm4gX3VwZENhdGFsb2dJdGVtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1cGRDYXRhbG9nSXRlbTtcbiAgICB9KClcbiAgfSwge1xuICAgIGtleTogXCJkZWxDYXRhbG9nSXRlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2RlbENhdGFsb2dJdGVtID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKGlkKSB7XG4gICAgICAgIHZhciBvcHRpb25zLCByZXM7XG4gICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDEzKSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgdXJsOiBcIi9jYXRhbG9nL1wiLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RXaXRoVG9rZW4ob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTMuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlMTMsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBkZWxDYXRhbG9nSXRlbShfeDI0KSB7XG4gICAgICAgIHJldHVybiBfZGVsQ2F0YWxvZ0l0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRlbENhdGFsb2dJdGVtO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcInVwbG9hZE9uZUZpbGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF91cGxvYWRPbmVGaWxlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KGZpbGUsIGZpZWxkLCB1cmwpIHtcbiAgICAgICAgdmFyIGRhdGEsIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE0LnByZXYgPSBfY29udGV4dDE0Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZChmaWVsZCwgZmlsZSk7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSdcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA1O1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RXaXRoVG9rZW4ob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTQuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlMTQsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiB1cGxvYWRPbmVGaWxlKF94MjUsIF94MjYsIF94MjcpIHtcbiAgICAgICAgcmV0dXJuIF91cGxvYWRPbmVGaWxlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1cGxvYWRPbmVGaWxlO1xuICAgIH0oKVxuICB9LCB7XG4gICAga2V5OiBcImdldENhdGFsb2dJdGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfZ2V0Q2F0YWxvZ0l0ZW0gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoaWQpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMsIHJlcztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHtcbiAgICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICB1cmw6IFwiL2NhdGFsb2cvP2lkPVwiLmNvbmNhdChpZCksXG4gICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RXaXRoVG9rZW4ob3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0MTUuc2VudDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoXCJyZXR1cm5cIiwgcmVzKTtcblxuICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlMTUsIHRoaXMpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBnZXRDYXRhbG9nSXRlbShfeDI4KSB7XG4gICAgICAgIHJldHVybiBfZ2V0Q2F0YWxvZ0l0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdldENhdGFsb2dJdGVtO1xuICAgIH0oKVxuICB9XSk7XG5cbiAgcmV0dXJuIEFwaTtcbn0oKTtcblxuZXhwb3J0IHZhciBhcGkgPSBuZXcgQXBpKHByb2Nlc3MuZW52LkJBQ0tFTkRfSE9TVCk7IiwiaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3JcIjtcbmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiO1xuaW1wb3J0IHsgbWFrZUF1dG9PYnNlcnZhYmxlLCBydW5JbkFjdGlvbiB9IGZyb20gXCJtb2J4XCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vYXBpXCI7XG5leHBvcnQgdmFyIGNhdGFsb2dTdG9yZSA9IG1ha2VBdXRvT2JzZXJ2YWJsZSh7XG4gIGNhdGFsb2c6IG51bGwsXG4gIGVkaXRXaW5kb3c6IHtcbiAgICBpc09wZW46IGZhbHNlLFxuICAgIGNhdGFsb2dJZDogbnVsbCxcbiAgICBpbWc6ICcnLFxuICAgIHByZXZpZXdJbWc6ICcnLFxuICAgIHRpdGxlOiAnJyxcbiAgICBhbm9uczogJycsXG4gICAgcmVsYXRlZENhdGVnb3JpZXM6IFtdXG4gIH0sXG4gIHNldEVkaXRXaW5kb3c6IGZ1bmN0aW9uIHNldEVkaXRXaW5kb3coX3JlZikge1xuICAgIHZhciBpc09wZW4gPSBfcmVmLmlzT3BlbixcbiAgICAgICAgY2F0YWxvZ0lkID0gX3JlZi5jYXRhbG9nSWQsXG4gICAgICAgIGltZyA9IF9yZWYuaW1nLFxuICAgICAgICBwcmV2aWV3SW1nID0gX3JlZi5wcmV2aWV3SW1nLFxuICAgICAgICB0aXRsZSA9IF9yZWYudGl0bGUsXG4gICAgICAgIGFub25zID0gX3JlZi5hbm9ucyxcbiAgICAgICAgcmVsYXRlZENhdGVnb3JpZXMgPSBfcmVmLnJlbGF0ZWRDYXRlZ29yaWVzO1xuICAgIGlmIChpc09wZW4gPT09IHVuZGVmaW5lZCkgaXNPcGVuID0gY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuaXNPcGVuO1xuICAgIGlmIChjYXRhbG9nSWQgPT09IHVuZGVmaW5lZCkgY2F0YWxvZ0lkID0gY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuY2F0YWxvZ0lkO1xuICAgIGlmIChpbWcgPT09IHVuZGVmaW5lZCkgaW1nID0gY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuaW1nO1xuICAgIGlmIChwcmV2aWV3SW1nID09PSB1bmRlZmluZWQpIHByZXZpZXdJbWcgPSBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5wcmV2aWV3SW1nO1xuICAgIGlmICh0aXRsZSA9PT0gdW5kZWZpbmVkKSB0aXRsZSA9IGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnRpdGxlO1xuICAgIGlmIChhbm9ucyA9PT0gdW5kZWZpbmVkKSBhbm9ucyA9IGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LmFub25zO1xuICAgIGlmIChyZWxhdGVkQ2F0ZWdvcmllcyA9PT0gdW5kZWZpbmVkKSByZWxhdGVkQ2F0ZWdvcmllcyA9IGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnJlbGF0ZWRDYXRlZ29yaWVzO1xuXG4gICAgaWYgKGlzT3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgIGNhdGFsb2dJZCA9IG51bGw7XG4gICAgICBpbWcgPSAnJztcbiAgICAgIHByZXZpZXdJbWcgPSAnJztcbiAgICAgIHRpdGxlID0gJyc7XG4gICAgICBhbm9ucyA9ICcnO1xuICAgICAgcmVsYXRlZENhdGVnb3JpZXMgPSBbXTtcbiAgICB9XG5cbiAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5pc09wZW4gPSBpc09wZW47XG4gICAgICBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5jYXRhbG9nSWQgPSBjYXRhbG9nSWQ7XG4gICAgICBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5pbWcgPSBpbWc7XG4gICAgICBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5wcmV2aWV3SW1nID0gcHJldmlld0ltZztcbiAgICAgIGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnRpdGxlID0gdGl0bGU7XG4gICAgICBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5hbm9ucyA9IGFub25zO1xuICAgICAgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cucmVsYXRlZENhdGVnb3JpZXMgPSByZWxhdGVkQ2F0ZWdvcmllcztcbiAgICB9KTtcbiAgfSxcbiAgYWRkUmVsYXRlZENhdGVnb3JpZXM6IGZ1bmN0aW9uIGFkZFJlbGF0ZWRDYXRlZ29yaWVzKGNhdGVnb3J5SWQpIHtcbiAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cucmVsYXRlZENhdGVnb3JpZXMucHVzaChjYXRlZ29yeUlkKTtcbiAgICB9KTtcbiAgfSxcbiAgZGVsUmVsYXRlZENhdGVnb3JpZXM6IGZ1bmN0aW9uIGRlbFJlbGF0ZWRDYXRlZ29yaWVzKGNhdGVnb3J5SWQpIHtcbiAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cucmVsYXRlZENhdGVnb3JpZXMuc3BsaWNlKGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnJlbGF0ZWRDYXRlZ29yaWVzLmluZGV4T2YoY2F0ZWdvcnlJZCksIDEpO1xuICAgIH0pO1xuICB9LFxuICBzYXZlQ2F0YWxvZ0l0ZW06IGZ1bmN0aW9uIHNhdmVDYXRhbG9nSXRlbSgpIHtcbiAgICBpZiAoIWNhdGFsb2dTdG9yZS5lZGl0V2luZG93LmNhdGFsb2dJZCkge1xuICAgICAgY2F0YWxvZ1N0b3JlLmFkZENhdGFsb2dJdGVtKCk7XG4gICAgfSBlbHNlIGNhdGFsb2dTdG9yZS51cGRhdGVDYXRhbG9nSXRlbSgpO1xuICB9LFxuICB1cGRhdGVDYXRhbG9nSXRlbTogZnVuY3Rpb24gdXBkYXRlQ2F0YWxvZ0l0ZW0oKSB7XG4gICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICB2YXIgcmVzLCBjYXRhbG9nSXRlbTtcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLnVwZENhdGFsb2dJdGVtKGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LmNhdGFsb2dJZCwgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cudGl0bGUsIGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LmFub25zLCBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5pbWcsIGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnJlbGF0ZWRDYXRlZ29yaWVzKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50O1xuXG4gICAgICAgICAgICAgIGlmIChyZXMgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgPT09IDIwMCkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjYXRhbG9nU3RvcmUuc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgICAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7XG4gICAgICAgICAgICAgIHJldHVybiBhcGkuZ2V0Q2F0YWxvZ0l0ZW0ocmVzLmRhdGEuaWQpO1xuXG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgIGNhdGFsb2dJdGVtID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICBpZiAoIShjYXRhbG9nSXRlbSBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChjYXRhbG9nSXRlbS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYXRhbG9nU3RvcmUuY2F0YWxvZy5pdGVtc1tjYXRhbG9nSXRlbS5kYXRhLmlkXSA9IGNhdGFsb2dJdGVtLmRhdGE7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUpO1xuICAgIH0pKSgpO1xuICB9LFxuICBhZGRDYXRhbG9nSXRlbTogZnVuY3Rpb24gYWRkQ2F0YWxvZ0l0ZW0oKSB7XG4gICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkge1xuICAgICAgdmFyIHJlcywgY2F0YWxvZ0l0ZW07XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmFkZENhdGFsb2dJdGVtKGNhdGFsb2dTdG9yZS5lZGl0V2luZG93LnRpdGxlLCBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5hbm9ucywgY2F0YWxvZ1N0b3JlLmVkaXRXaW5kb3cuaW1nLCBjYXRhbG9nU3RvcmUuZWRpdFdpbmRvdy5yZWxhdGVkQ2F0ZWdvcmllcyk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKHJlcyBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgPT09IDIwMCkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY2F0YWxvZ1N0b3JlLnNldEVkaXRXaW5kb3coe1xuICAgICAgICAgICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXRDYXRhbG9nSXRlbShyZXMuZGF0YS5pZCk7XG5cbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgY2F0YWxvZ0l0ZW0gPSBfY29udGV4dDIuc2VudDtcblxuICAgICAgICAgICAgICBpZiAoIShjYXRhbG9nSXRlbSBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChjYXRhbG9nSXRlbS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYXRhbG9nU3RvcmUuY2F0YWxvZy5pdGVtc1tjYXRhbG9nSXRlbS5kYXRhLmlkXSA9IGNhdGFsb2dJdGVtLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNhdGFsb2dTdG9yZS5jYXRhbG9nLmxpc3QudW5zaGlmdChjYXRhbG9nSXRlbS5kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUyKTtcbiAgICB9KSkoKTtcbiAgfSxcbiAgZGVsZXRlSWQ6IG51bGwsXG4gIHNldERlbGV0ZUlkOiBmdW5jdGlvbiBzZXREZWxldGVJZChpZCkge1xuICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhdGFsb2dTdG9yZS5kZWxldGVJZCA9IGlkO1xuICAgIH0pO1xuICB9LFxuICBkZWxDYXRhbG9nSXRlbTogZnVuY3Rpb24gZGVsQ2F0YWxvZ0l0ZW0oKSB7XG4gICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0Mykge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7XG4gICAgICAgICAgICAgIHJldHVybiBhcGkuZGVsQ2F0YWxvZ0l0ZW0oY2F0YWxvZ1N0b3JlLmRlbGV0ZUlkKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDtcblxuICAgICAgICAgICAgICBpZiAoIShyZXMgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gY2F0YWxvZ1N0b3JlLmNhdGFsb2cubGlzdC5pbmRleE9mKHJlcy5kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgY2F0YWxvZ1N0b3JlLmNhdGFsb2cubGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjYXRhbG9nU3RvcmUuY2F0YWxvZy5pdGVtc1tyZXMuZGF0YS5pZF07XG4gICAgICAgICAgICAgICAgICAgIGNhdGFsb2dTdG9yZS5kZWxldGVJZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUzKTtcbiAgICB9KSkoKTtcbiAgfVxufSk7IiwiZXhwb3J0IGZ1bmN0aW9uIG1hcENhdGFsb2coY2F0YWxvZykge1xuICB2YXIgbm9ybWFsaXplZCA9IHtcbiAgICBpdGVtczoge30sXG4gICAgbGlzdDogW11cbiAgfTtcbiAgY2F0YWxvZy5mb3JFYWNoKGZ1bmN0aW9uIChjYXRhbG9nKSB7XG4gICAgbm9ybWFsaXplZC5pdGVtc1tjYXRhbG9nLmlkXSA9IHtcbiAgICAgIGlkOiBjYXRhbG9nLmlkLFxuICAgICAgdGl0bGU6IGNhdGFsb2cudGl0bGUsXG4gICAgICBhbm9uczogY2F0YWxvZy5hbm9ucyxcbiAgICAgIGltYWdlOiBjYXRhbG9nLmltYWdlLFxuICAgICAgY2F0ZWdvcmllczogY2F0YWxvZy5jYXRlZ29yaWVzXG4gICAgfTtcbiAgICBub3JtYWxpemVkLmxpc3QucHVzaChjYXRhbG9nLmlkKTtcbiAgfSk7XG4gIHJldHVybiBub3JtYWxpemVkO1xufSIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCI7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBlbnVtZXJhYmxlT25seSAmJiAoc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pKSwga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBudWxsICE9IGFyZ3VtZW50c1tpXSA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiO1xuaW1wb3J0IHsgY2F0YWxvZ1N0b3JlIH0gZnJvbSAnLi9jYXRhbG9nU3RvcmUnO1xuaW1wb3J0IHsgbWFrZUF1dG9PYnNlcnZhYmxlLCBydW5JbkFjdGlvbiB9IGZyb20gXCJtb2J4XCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vYXBpXCI7XG5pbXBvcnQgeyBtYXBDYXRhbG9nIH0gZnJvbSBcIi4uL2xpYnMvbWFwQ2F0YWxvZ1wiO1xuZXhwb3J0IHZhciBzZWFyY2hTdG9yZSA9IG1ha2VBdXRvT2JzZXJ2YWJsZSh7XG4gIGZvcm06IHtcbiAgICBzZWFyY2hTdHJpbmc6ICcnLFxuICAgIHNldFNlYXJjaFN0cmluZzogZnVuY3Rpb24gc2V0U2VhcmNoU3RyaW5nKHNlYXJjaFN0cmluZykge1xuICAgICAgc2VhcmNoU3RvcmUuZm9ybS5zZWFyY2hTdHJpbmcgPSBzZWFyY2hTdHJpbmc7XG4gICAgfSxcbiAgICBzZWxlY3RkZWRDYXRlZ29yaWVzOiBbXSxcbiAgICBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzOiBmdW5jdGlvbiBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzKGNhdGVnb3J5SWQpIHtcbiAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNlYXJjaFN0b3JlLmZvcm0uc2VsZWN0ZGVkQ2F0ZWdvcmllcy5wdXNoKGNhdGVnb3J5SWQpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzOiBmdW5jdGlvbiBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzKGNhdGVnb3J5SWQpIHtcbiAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNlYXJjaFN0b3JlLmZvcm0uc2VsZWN0ZGVkQ2F0ZWdvcmllcy5zcGxpY2Uoc2VhcmNoU3RvcmUuZm9ybS5zZWxlY3RkZWRDYXRlZ29yaWVzLmluZGV4T2YoY2F0ZWdvcnlJZCksIDEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICByZXF1ZXN0OiB7XG4gICAgc2VhcmNoU3RyaW5nOiAnJyxcbiAgICBzZWxlY3RkZWRDYXRlZ29yaWVzOiBbXVxuICB9LFxuICBzZXRSZXF1ZXN0UGFyYW1zOiBmdW5jdGlvbiBzZXRSZXF1ZXN0UGFyYW1zKCkge1xuICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlYXJjaFN0b3JlLnJlcXVlc3Quc2VhcmNoU3RyaW5nID0gc2VhcmNoU3RvcmUuZm9ybS5zZWFyY2hTdHJpbmc7XG4gICAgICBzZWFyY2hTdG9yZS5yZXF1ZXN0LnNlbGVjdGRlZENhdGVnb3JpZXMgPSBzZWFyY2hTdG9yZS5mb3JtLnNlbGVjdGRlZENhdGVnb3JpZXM7XG4gICAgfSk7XG4gIH0sXG4gIHNldFJlcXVlc3RQYXJhbXNGcm9tQm93c2VyU2VhcmNoU3RyaW5nOiBmdW5jdGlvbiBzZXRSZXF1ZXN0UGFyYW1zRnJvbUJvd3NlclNlYXJjaFN0cmluZyhzZWFyY2hTdHJpbmcsIGNhdGVnb3JpZXMpIHtcbiAgICBzZWFyY2hTdG9yZS5yZXF1ZXN0LnNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZztcbiAgICBzZWFyY2hTdG9yZS5yZXF1ZXN0LnNlbGVjdGRlZENhdGVnb3JpZXMgPSBjYXRlZ29yaWVzO1xuICB9LFxuICB0b3RhbFBhZ2VzOiBudWxsLFxuICBzZXRUb3RhbFBhZ2VzOiBmdW5jdGlvbiBzZXRUb3RhbFBhZ2VzKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmZpbmRUb3RhbFBhZ2VzKHNlYXJjaFN0b3JlLmZvcm0uc2VhcmNoU3RyaW5nLCBzZWFyY2hTdG9yZS5mb3JtLnNlbGVjdGRlZENhdGVnb3JpZXMpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWFyY2hTdG9yZS50b3RhbFBhZ2VzID0gcmVzLmRhdGEudG90YWxQYWdlcztcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlKTtcbiAgICB9KSkoKTtcbiAgfSxcbiAgY3VycmVudFBhZ2U6IDEsXG4gIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoKSB7XG4gICAgdmFyIGN1cnJlbnRQYWdlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxO1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmZpbmRDYXRhbG9nSXRlbXMoc2VhcmNoU3RvcmUucmVxdWVzdC5zZWFyY2hTdHJpbmcsIHNlYXJjaFN0b3JlLnJlcXVlc3Quc2VsZWN0ZGVkQ2F0ZWdvcmllcywgY3VycmVudFBhZ2UpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50O1xuXG4gICAgICAgICAgICAgIGlmICghKHJlcyBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhdGFsb2dTdG9yZS5jYXRhbG9nID0gbWFwQ2F0YWxvZyhyZXMuZGF0YS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBzZWFyY2hTdG9yZS5jdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGFsb2dTdG9yZS5jYXRhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMik7XG4gICAgfSkpKCk7XG4gIH0sXG4gIGZpbmROZXh0UGFnZTogZnVuY3Rpb24gZmluZE5leHRQYWdlKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHtcbiAgICAgIHZhciBuZXh0UGFnZSwgcmVzLCBtYXBlZENhdGFsb2c7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgbmV4dFBhZ2UgPSBzZWFyY2hTdG9yZS5jdXJyZW50UGFnZSArIDE7XG4gICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMztcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5maW5kQ2F0YWxvZ0l0ZW1zKHNlYXJjaFN0b3JlLnJlcXVlc3Quc2VhcmNoU3RyaW5nLCBzZWFyY2hTdG9yZS5yZXF1ZXN0LnNlbGVjdGRlZENhdGVnb3JpZXMsIG5leHRQYWdlKTtcblxuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDtcblxuICAgICAgICAgICAgICBpZiAoIShyZXMgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwICYmIHJlcy5kYXRhLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgbWFwZWRDYXRhbG9nID0gbWFwQ2F0YWxvZyhyZXMuZGF0YS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYXRhbG9nU3RvcmUuY2F0YWxvZy5pdGVtcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY2F0YWxvZ1N0b3JlLmNhdGFsb2cuaXRlbXMpLCBtYXBlZENhdGFsb2cuaXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBjYXRhbG9nU3RvcmUuY2F0YWxvZy5saXN0ID0gY2F0YWxvZ1N0b3JlLmNhdGFsb2cubGlzdC5jb25jYXQobWFwZWRDYXRhbG9nLmxpc3QpO1xuICAgICAgICAgICAgICAgICAgICBzZWFyY2hTdG9yZS5jdXJyZW50UGFnZSA9IG5leHRQYWdlO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGFsb2dTdG9yZS5jYXRhbG9nID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMyk7XG4gICAgfSkpKCk7XG4gIH1cbn0pOyIsImltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCI7XG5pbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIjtcbmltcG9ydCB7IG1ha2VBdXRvT2JzZXJ2YWJsZSwgcnVuSW5BY3Rpb24gfSBmcm9tIFwibW9ieFwiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2FwaVwiO1xuaW1wb3J0IHRva2Vuc1N0b3JhZ2UgZnJvbSBcIi4uL2xpYnMvbG9jYWxTdG9yYWdlXCI7XG5leHBvcnQgdmFyIGF1dGhTdG9yZSA9IG1ha2VBdXRvT2JzZXJ2YWJsZSh7XG4gIGxvZ2luOiAnZGVtbycsXG4gIHBhc3N3b3JkOiAnZGVtbzEyMycsXG4gIGVycm9yTG9naW46ICcnLFxuICBpc0F1dGg6IG51bGwsXG4gIHNldExvZ2luOiBmdW5jdGlvbiBzZXRMb2dpbihsb2dpbikge1xuICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhdXRoU3RvcmUubG9naW4gPSBsb2dpbjtcbiAgICB9KTtcbiAgfSxcbiAgc2V0UGFzc3dvcmQ6IGZ1bmN0aW9uIHNldFBhc3N3b3JkKHBhc3N3b3JkKSB7XG4gICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGF1dGhTdG9yZS5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgIH0pO1xuICB9LFxuICBsb2dpblJlcXVlc3Q6IGZ1bmN0aW9uIGxvZ2luUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5sb2dpbihhdXRoU3RvcmUubG9naW4sIGF1dGhTdG9yZS5wYXNzd29yZCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICBpZiAoIShyZXMgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRoU3RvcmUuZXJyb3JMb2dpbiA9IHJlcy5kYXRhLmVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEudG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgIHRva2Vuc1N0b3JhZ2Uuc2F2ZVRva2VuVG9TdG9yYWdlKHJlcy5kYXRhLnRva2VuKTtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhTdG9yZS5pc0F1dGggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRva2Vuc1N0b3JhZ2UuY2xlYXJUb2tlbkZyb21TdG9yYWdlKCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZSk7XG4gICAgfSkpKCk7XG4gIH0sXG4gIGxvZ291dFJlcXVlc3Q6IGZ1bmN0aW9uIGxvZ291dFJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0Mikge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7XG4gICAgICAgICAgICAgIHJldHVybiBhcGkubG9nb3V0KCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmlzTG9nb3V0KSB7XG4gICAgICAgICAgICAgICAgICB0b2tlbnNTdG9yYWdlLmNsZWFyVG9rZW5Gcm9tU3RvcmFnZSgpO1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aFN0b3JlLmlzQXV0aCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMik7XG4gICAgfSkpKCk7XG4gIH0sXG4gIGF1dGhSZXF1ZXN0OiBmdW5jdGlvbiBhdXRoUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7XG4gICAgICB2YXIgcmVzO1xuICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS51c2VyQ2hlY2tBdXRoKCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpICYmIHJlcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuaXNBdXRoKSB7XG4gICAgICAgICAgICAgICAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRoU3RvcmUuaXNBdXRoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0b2tlbnNTdG9yYWdlLmNsZWFyVG9rZW5Gcm9tU3RvcmFnZSgpO1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aFN0b3JlLmlzQXV0aCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMyk7XG4gICAgfSkpKCk7XG4gIH1cbn0pOyIsImV4cG9ydCBmdW5jdGlvbiBtYXBDYXRlZ29yaWVzKGNhdGVnb3JpZXMpIHtcbiAgdmFyIG5vcm1hbGl6ZWQgPSB7XG4gICAgaXRlbXM6IHt9LFxuICAgIGxpc3Q6IFtdXG4gIH07XG4gIGNhdGVnb3JpZXMuZm9yRWFjaChmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICBub3JtYWxpemVkLml0ZW1zW2NhdGVnb3J5LmlkXSA9IHtcbiAgICAgIGlkOiBjYXRlZ29yeS5pZCxcbiAgICAgIHRpdGxlOiBjYXRlZ29yeS50aXRsZVxuICAgIH07XG4gICAgbm9ybWFsaXplZC5saXN0LnB1c2goY2F0ZWdvcnkuaWQpO1xuICB9KTtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59IiwiaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3JcIjtcbmltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiO1xuaW1wb3J0IHsgbWFrZUF1dG9PYnNlcnZhYmxlLCBydW5JbkFjdGlvbiB9IGZyb20gXCJtb2J4XCI7XG5pbXBvcnQgeyBtYXBDYXRlZ29yaWVzIH0gZnJvbSBcIi4uL2xpYnMvbWFwQ2F0ZWdvcmllc1wiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2FwaVwiO1xuZXhwb3J0IHZhciBjYXRlZ29yaWVzU3RvcmUgPSBtYWtlQXV0b09ic2VydmFibGUoe1xuICBjYXRlZ29yaWVzOiBudWxsLFxuICBnZXRBbGxDYXRlZ29yaWVzOiBmdW5jdGlvbiBnZXRBbGxDYXRlZ29yaWVzKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmdldEFsbENhdGVnb3JpZXMoKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50O1xuXG4gICAgICAgICAgICAgIGlmICghKHJlcyBpbnN0YW5jZW9mIEVycm9yKSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yaWVzID0gbWFwQ2F0ZWdvcmllcyhyZXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3JpZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZSk7XG4gICAgfSkpKCk7XG4gIH1cbn0pOyIsImltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yXCI7XG5pbXBvcnQgX3JlZ2VuZXJhdG9yUnVudGltZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3JcIjtcbmltcG9ydCB7IG1ha2VBdXRvT2JzZXJ2YWJsZSwgcnVuSW5BY3Rpb24gfSBmcm9tIFwibW9ieFwiO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2FwaVwiO1xuaW1wb3J0IHsgY2F0ZWdvcmllc1N0b3JlIH0gZnJvbSBcIi4uL3N0b3JlL2NhdGVnb3JpZXNTdG9yZVwiO1xuZXhwb3J0IHZhciBzZXR1cFN0b3JlID0gbWFrZUF1dG9PYnNlcnZhYmxlKHtcbiAgY2F0ZWdvcnlUaXRsZTogJycsXG4gIHNldENhdGVnb3J5VGl0bGU6IGZ1bmN0aW9uIHNldENhdGVnb3J5VGl0bGUodGl0bGUpIHtcbiAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc2V0dXBTdG9yZS5jYXRlZ29yeVRpdGxlID0gdGl0bGU7XG4gICAgfSk7XG4gIH0sXG4gIGFkZENhdGVnb3J5SXRlbTogZnVuY3Rpb24gYWRkQ2F0ZWdvcnlJdGVtKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLmFkZENhdGVnb3J5SXRlbShzZXR1cFN0b3JlLmNhdGVnb3J5VGl0bGUpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcmllcy5pdGVtc1tyZXMuZGF0YS5pZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IHJlcy5kYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzZXR1cFN0b3JlLmNhdGVnb3J5VGl0bGVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3JpZXMubGlzdC5wdXNoKHJlcy5kYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0dXBTdG9yZS5jYXRlZ29yeVRpdGxlID0gJyc7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZSk7XG4gICAgfSkpKCk7XG4gIH0sXG4gIHVwZGF0ZUNhdGVnb3J5SXRlbTogZnVuY3Rpb24gdXBkYXRlQ2F0ZWdvcnlJdGVtKCkge1xuICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHtcbiAgICAgIHZhciByZXM7XG4gICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gYXBpLnVwZGF0ZUNhdGVnb3J5SXRlbShzZXR1cFN0b3JlLmVkaXRXaW5kb3cuaWQsIHNldHVwU3RvcmUuZWRpdFdpbmRvdy50aXRsZSk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcmllcy5pdGVtc1tyZXMuZGF0YS5pZF0udGl0bGUgPSBzZXR1cFN0b3JlLmVkaXRXaW5kb3cudGl0bGU7XG4gICAgICAgICAgICAgICAgICAgIHNldHVwU3RvcmUuc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUyKTtcbiAgICB9KSkoKTtcbiAgfSxcbiAgZGVsZXRlQ2F0ZWdvcnlJdGVtOiBmdW5jdGlvbiBkZWxldGVDYXRlZ29yeUl0ZW0oKSB7XG4gICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0Mykge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7XG4gICAgICAgICAgICAgIHJldHVybiBhcGkuZGVsZXRlQ2F0ZWdvcnlJdGVtKHNldHVwU3RvcmUuZWRpdFdpbmRvdy5pZCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7XG5cbiAgICAgICAgICAgICAgaWYgKCEocmVzIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YS5pZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yaWVzLmxpc3QuaW5kZXhPZihyZXMuZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNTdG9yZS5jYXRlZ29yaWVzLmxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2F0ZWdvcmllc1N0b3JlLmNhdGVnb3JpZXMuaXRlbXNbcmVzLmRhdGEuaWRdO1xuICAgICAgICAgICAgICAgICAgICBzZXR1cFN0b3JlLnNldEVkaXRXaW5kb3coe1xuICAgICAgICAgICAgICAgICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMyk7XG4gICAgfSkpKCk7XG4gIH0sXG4gIGVkaXRXaW5kb3c6IHtcbiAgICBpc09wZW46IGZhbHNlLFxuICAgIGlkOiBudWxsLFxuICAgIHRpdGxlOiAnJ1xuICB9LFxuICBzZXRFZGl0V2luZG93OiBmdW5jdGlvbiBzZXRFZGl0V2luZG93KF9yZWY0KSB7XG4gICAgdmFyIGlzT3BlbiA9IF9yZWY0LmlzT3BlbixcbiAgICAgICAgaWQgPSBfcmVmNC5pZCxcbiAgICAgICAgdGl0bGUgPSBfcmVmNC50aXRsZTtcbiAgICBpZiAoaXNPcGVuID09PSB1bmRlZmluZWQpIGlzT3BlbiA9IHNldHVwU3RvcmUuZWRpdFdpbmRvdy5pc09wZW47XG4gICAgaWYgKGlkID09PSB1bmRlZmluZWQpIGlkID0gc2V0dXBTdG9yZS5lZGl0V2luZG93LmlkO1xuICAgIGlmICh0aXRsZSA9PT0gdW5kZWZpbmVkKSB0aXRsZSA9IHNldHVwU3RvcmUuZWRpdFdpbmRvdy50aXRsZTtcbiAgICBydW5JbkFjdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICBzZXR1cFN0b3JlLmVkaXRXaW5kb3cgPSB7XG4gICAgICAgIGlzT3BlbjogaXNPcGVuLFxuICAgICAgICBpZDogaWQsXG4gICAgICAgIHRpdGxlOiB0aXRsZVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBzZWFyY2hTdG9yZSB9IGZyb20gXCIuL3NlYXJjaFN0b3JlXCI7XG5pbXBvcnQgeyBhdXRoU3RvcmUgfSBmcm9tIFwiLi9hdXRoU3RvcmVcIjtcbmltcG9ydCB7IHNldHVwU3RvcmUgfSBmcm9tIFwiLi9zZXR1cFN0b3JlXCI7XG5pbXBvcnQgeyBjYXRlZ29yaWVzU3RvcmUgfSBmcm9tIFwiLi9jYXRlZ29yaWVzU3RvcmVcIjtcbmltcG9ydCB7IGNhdGFsb2dTdG9yZSB9IGZyb20gXCIuL2NhdGFsb2dTdG9yZVwiO1xudmFyIHN0YXRlID0ge1xuICBzZWFyY2hTdG9yZTogc2VhcmNoU3RvcmUsXG4gIGF1dGhTdG9yZTogYXV0aFN0b3JlLFxuICBzZXR1cFN0b3JlOiBzZXR1cFN0b3JlLFxuICBjYXRlZ29yaWVzU3RvcmU6IGNhdGVnb3JpZXNTdG9yZSxcbiAgY2F0YWxvZ1N0b3JlOiBjYXRhbG9nU3RvcmVcbn07XG5leHBvcnQgdmFyIHN0b3JlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQoc3RhdGUpO1xuZXhwb3J0IHZhciBNb2JYUHJvdmlkZXIgPSBmdW5jdGlvbiBNb2JYUHJvdmlkZXIoX3JlZikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoc3RvcmUuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogc3RhdGVcbiAgfSwgXCIgXCIsIGNoaWxkcmVuLCBcIiBcIik7XG59OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuZXhwb3J0IHZhciBOYXZCdXR0b24gPSBmdW5jdGlvbiBOYXZCdXR0b24oX3JlZikge1xuICB2YXIgbmFtZSA9IF9yZWYubmFtZSxcbiAgICAgIGNhbGxiYWNrID0gX3JlZi5jYWxsYmFjaztcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwibmF2LWJ1dHRvblwiXG4gIH0sIG5hbWUpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmV4cG9ydCB2YXIgTmF2QnV0dG9uU2VhcmNoID0gZnVuY3Rpb24gTmF2QnV0dG9uU2VhcmNoKCkge1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIGNsYXNzTmFtZTogXCJuYXYtYnV0dG9uLXNlYXJjaFwiXG4gIH0sIFwiXFx1MDQxRlxcdTA0M0VcXHUwNDM4XFx1MDQ0MVxcdTA0M0FcIik7XG59OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tIFwiLi4vLi4vc3RvcmVcIjtcbmltcG9ydCB7IE5hdkxpbmsgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IHsgTmF2QnV0dG9uIH0gZnJvbSBcIi4uL25hdkJ1dHRvblwiO1xuaW1wb3J0IHsgTmF2QnV0dG9uU2VhcmNoIH0gZnJvbSBcIi4uL25hdkJ1dHRvblNlYXJjaFwiO1xuaW1wb3J0IHsgdXNlTG9jYXRpb24gfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuZXhwb3J0IHZhciBOYXYgPSBvYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoc3RvcmUpLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkYXV0ID0gX1JlYWN0JHVzZUNvbnRleHQuYXV0aFN0b3JlLFxuICAgICAgaXNBdXRoID0gX1JlYWN0JHVzZUNvbnRleHQkYXV0LmlzQXV0aCxcbiAgICAgIGxvZ291dFJlcXVlc3QgPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQubG9nb3V0UmVxdWVzdCxcbiAgICAgIHNldEVkaXRXaW5kb3cgPSBfUmVhY3QkdXNlQ29udGV4dC5jYXRhbG9nU3RvcmUuc2V0RWRpdFdpbmRvdztcblxuICB2YXIgbG9jYXRpb24gPSB1c2VMb2NhdGlvbigpLnBhdGhuYW1lO1xuXG4gIHZhciByZW5kZXJNZW51ID0gZnVuY3Rpb24gcmVuZGVyTWVudSgpIHtcbiAgICBpZiAoaXNBdXRoKSB7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGxvY2F0aW9uID09PSAnLycgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2QnV0dG9uLCB7XG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgICByZXR1cm4gc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgICAgICBpc09wZW46IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgbmFtZTogJ9CU0L7QsdCw0LLQuNGC0YwnXG4gICAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2TGluaywge1xuICAgICAgICBhY3RpdmVDbGFzc05hbWU6IFwibmF2LWxpbmtfYWN0aXZlXCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJuYXYtbGlua1wiLFxuICAgICAgICB0bzogJy9zZXR1cC8nXG4gICAgICB9LCBcIlxcdTA0MURcXHUwNDMwXFx1MDQ0MVxcdTA0NDJcXHUwNDQwXFx1MDQzRVxcdTA0MzlcXHUwNDNBXFx1MDQzOFwiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2QnV0dG9uLCB7XG4gICAgICAgIGNhbGxiYWNrOiBsb2dvdXRSZXF1ZXN0LFxuICAgICAgICBuYW1lOiAn0JLRi9GF0L7QtCdcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2TGluaywge1xuICAgICAgYWN0aXZlQ2xhc3NOYW1lOiBcIm5hdi1saW5rX2FjdGl2ZVwiLFxuICAgICAgY2xhc3NOYW1lOiBcIm5hdi1saW5rXCIsXG4gICAgICB0bzogJy9hdXRoLydcbiAgICB9LCBcIlxcdTA0MTJcXHUwNDNFXFx1MDQzOVxcdTA0NDJcXHUwNDM4XCIpO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcIm5hdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIm5hdlwiXG4gIH0sIGxvY2F0aW9uID09PSAnLycgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChOYXZCdXR0b25TZWFyY2gsIG51bGwpIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2TGluaywge1xuICAgIGNsYXNzTmFtZTogXCJuYXYtbGluay1zZWFyY2hcIixcbiAgICB0bzogJy8nXG4gIH0sIFwiXFx1MDQxRlxcdTA0M0VcXHUwNDM4XFx1MDQ0MVxcdTA0M0FcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwibmF2LXdyYXBcIlxuICB9LCByZW5kZXJNZW51KCkpKTtcbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuZXhwb3J0IHZhciBDYXRlZ29yaWVzQWRkQnV0dG9uID0gZnVuY3Rpb24gQ2F0ZWdvcmllc0FkZEJ1dHRvbihfcmVmKSB7XG4gIHZhciBjYWxsYmFjayA9IF9yZWYuY2FsbGJhY2s7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImNhdGVnb3J5cy1hZGQtYnV0dG9uXCJcbiAgfSwgXCJcXHUwNDFBXFx1MDQzMFxcdTA0NDJcXHUwNDM1XFx1MDQzM1xcdTA0M0VcXHUwNDQwXFx1MDQzOFxcdTA0MzhcIik7XG59OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuZXhwb3J0IHZhciBDYXRlZ29yaWVzSXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7XG4gIHZhciB0aXRsZSA9IF9yZWYudGl0bGUsXG4gICAgICBkZWxDYWxsYmFjayA9IF9yZWYuZGVsQ2FsbGJhY2s7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0ZWdvcnktaXRlbVwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0ZWdvcnktaXRlbV9fdGl0bGVcIlxuICB9LCB0aXRsZSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRlZ29yeS1pdGVtX19pbnB1dFwiLFxuICAgIHR5cGU6IFwiY2hlY2tib3hcIixcbiAgICBuYW1lOiBcImNhdGVnb3J5X2l0ZW1cIlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gZGVsQ2FsbGJhY2soKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJjYXRlZ29yeS1pdGVtX19jbG9zZVwiXG4gIH0sIFwiIFwiKSk7XG59LCBmdW5jdGlvbiAocHJldlByb3BzLCBuZXh0UHJvcHMpIHtcbiAgaWYgKHByZXZQcm9wcy50aXRsZSA9PT0gbmV4dFByb3BzLnRpdGxlKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufSk7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuZXhwb3J0IHZhciBTZWxlY3RDYXRlZ29yaWVzSXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7XG4gIHZhciB0aXRsZSA9IF9yZWYudGl0bGUsXG4gICAgICBpc0FjdGl2ZSA9IF9yZWYuaXNBY3RpdmUsXG4gICAgICBhZGRDYWxsYmFjayA9IF9yZWYuYWRkQ2FsbGJhY2ssXG4gICAgICBkZWxDYWxsYmFjayA9IF9yZWYuZGVsQ2FsbGJhY2s7XG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKGlzQWN0aXZlKSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgY2hlY2tlZCA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRDaGVja2VkID0gX1JlYWN0JHVzZVN0YXRlMlsxXTtcblxuICB2YXIgY2hlY2sgPSBmdW5jdGlvbiBjaGVjayhpc0NoZWNrZWQpIHtcbiAgICBzZXRDaGVja2VkKGlzQ2hlY2tlZCk7XG4gICAgaXNDaGVja2VkID8gYWRkQ2FsbGJhY2soKSA6IGRlbENhbGxiYWNrKCk7XG4gIH07XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZWxlY3QtY2F0ZWdvcnktaXRlbVwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZWxlY3QtY2F0ZWdvcnktaXRlbV9faW5wdXRcIixcbiAgICBuYW1lOiBcImNhdGVnb3J5X2l0ZW1cIixcbiAgICB0eXBlOiBcImNoZWNrYm94XCIsXG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge1xuICAgICAgcmV0dXJuIGNoZWNrKCFjaGVja2VkKTtcbiAgICB9LFxuICAgIGNoZWNrZWQ6IGNoZWNrZWRcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNlbGVjdC1jYXRlZ29yeS1pdGVtX190aXRsZVwiXG4gIH0sIHRpdGxlKSk7XG59LCBmdW5jdGlvbiAocHJldlByb3BzLCBuZXh0UHJvcHMpIHtcbiAgaWYgKHByZXZQcm9wcy5pc0FjdGl2ZSA9PT0gbmV4dFByb3BzLmlzQWN0aXZlKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5leHBvcnQgdmFyIFBvcHVwID0gZnVuY3Rpb24gUG9wdXAoX3JlZikge1xuICB2YXIgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjbG9zZUNhbGxiYWNrID0gX3JlZi5jbG9zZUNhbGxiYWNrLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJwb3B1cC13cmFwIFwiLmNvbmNhdChjbGFzc05hbWUpXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwicG9wdXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInBvcHVwX19jbG9zZS13cmFwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gY2xvc2VDYWxsYmFjaygpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcInBvcHVwX19jbG9zZVwiXG4gIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJwb3B1cF9fY29udGVudFwiXG4gIH0sIGNoaWxkcmVuKSkpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSAnLi4vLi4vc3RvcmUnO1xuaW1wb3J0IHsgU2VsZWN0Q2F0ZWdvcmllc0l0ZW0gfSBmcm9tICcuLi9zZWxlY3RDYXRlZ29yaWVzSXRlbSc7XG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4uL3BvcHVwJztcbmV4cG9ydCB2YXIgU2VsZWN0Q2F0ZWdvcmllcyA9IG9ic2VydmVyKGZ1bmN0aW9uIChfcmVmKSB7XG4gIHZhciBzZWxlY3RkZWRDYXRlZ29yaWVzID0gX3JlZi5zZWxlY3RkZWRDYXRlZ29yaWVzLFxuICAgICAgZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllcyA9IF9yZWYuZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICAgIGFkZFNlbGVjdGRlZENhdGVnb3JpZXMgPSBfcmVmLmFkZFNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgICBzZXRJc09wZW4gPSBfcmVmLnNldElzT3BlbjtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIGNhdGVnb3JpZXMgPSBfUmVhY3QkdXNlQ29udGV4dC5jYXRlZ29yaWVzU3RvcmUuY2F0ZWdvcmllcztcblxuICB2YXIgcmVuZGVyQ2F0ZWdvcmllcyA9IGZ1bmN0aW9uIHJlbmRlckNhdGVnb3JpZXMoKSB7XG4gICAgdmFyIGlzQWN0aXZlO1xuICAgIHJldHVybiBjYXRlZ29yaWVzLmxpc3QubWFwKGZ1bmN0aW9uIChpZCkge1xuICAgICAgaWYgKGNhdGVnb3JpZXMubGlzdC5pbmRleE9mKGlkKSAhPT0gLTEpIHtcbiAgICAgICAgc2VsZWN0ZGVkQ2F0ZWdvcmllcy5pbmRleE9mKGlkKSAhPT0gLTEgPyBpc0FjdGl2ZSA9IHRydWUgOiBpc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2VsZWN0Q2F0ZWdvcmllc0l0ZW0sIHtcbiAgICAgICAgICBrZXk6IGlkLFxuICAgICAgICAgIGlzQWN0aXZlOiBpc0FjdGl2ZSxcbiAgICAgICAgICB0aXRsZTogXCJcIi5jb25jYXQoY2F0ZWdvcmllcy5pdGVtc1tpZF0udGl0bGUpLFxuICAgICAgICAgIGFkZENhbGxiYWNrOiBmdW5jdGlvbiBhZGRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHJldHVybiBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzKGlkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlbENhbGxiYWNrOiBmdW5jdGlvbiBkZWxDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb3B1cCwge1xuICAgIGNsYXNzTmFtZTogXCJcIixcbiAgICBjbG9zZUNhbGxiYWNrOiBmdW5jdGlvbiBjbG9zZUNhbGxiYWNrKCkge1xuICAgICAgcmV0dXJuIHNldElzT3BlbihmYWxzZSk7XG4gICAgfVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNlbGVjdC1jYXRlZ29yeS1oZWFkZXJcIlxuICB9LCBcIlxcdTA0MUFcXHUwNDMwXFx1MDQ0MlxcdTA0MzVcXHUwNDMzXFx1MDQzRVxcdTA0NDBcXHUwNDM4XFx1MDQzOFwiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZWxlY3QtY2F0ZWdvcnkgc2VsZWN0LWNhdGVnb3J5X25vbmVcIlxuICB9LCByZW5kZXJDYXRlZ29yaWVzKCkpKTtcbn0pOyIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSAnLi4vLi4vc3RvcmUnO1xuaW1wb3J0IHsgQ2F0ZWdvcmllc0FkZEJ1dHRvbiB9IGZyb20gXCIuLi9jYXRlZ29yaWVzQWRkQnV0dG9uXCI7XG5pbXBvcnQgeyBDYXRlZ29yaWVzSXRlbSB9IGZyb20gXCIuLi9jYXRlZ29yaWVzSXRlbVwiO1xuaW1wb3J0IHsgU2VsZWN0Q2F0ZWdvcmllcyB9IGZyb20gXCIuLi9zZWxlY3RDYXRlZ29yaWVzXCI7XG5leHBvcnQgdmFyIENhdGVnb3JpZXMgPSBvYnNlcnZlcihmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgc2VsZWN0ZGVkQ2F0ZWdvcmllcyA9IF9yZWYuc2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICAgIGRlbFNlbGVjdGRlZENhdGVnb3JpZXMgPSBfcmVmLmRlbFNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgICBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzID0gX3JlZi5hZGRTZWxlY3RkZWRDYXRlZ29yaWVzO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoc3RvcmUpLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkY2F0ID0gX1JlYWN0JHVzZUNvbnRleHQuY2F0ZWdvcmllc1N0b3JlLFxuICAgICAgY2F0ZWdvcmllcyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5jYXRlZ29yaWVzLFxuICAgICAgZ2V0QWxsQ2F0ZWdvcmllcyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5nZXRBbGxDYXRlZ29yaWVzO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIGlzT3BlbiA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRJc09wZW4gPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNhdGVnb3JpZXMgPT09IG51bGwpIGdldEFsbENhdGVnb3JpZXMoKTtcbiAgfSwgW10pO1xuICBpZiAoY2F0ZWdvcmllcyA9PT0gbnVsbCkgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIFwiTG9hZGluZ1wiKTtcblxuICB2YXIgcmVuZGVyQ2F0ZWdvcmllcyA9IGZ1bmN0aW9uIHJlbmRlckNhdGVnb3JpZXMoKSB7XG4gICAgcmV0dXJuIHNlbGVjdGRlZENhdGVnb3JpZXMubWFwKGZ1bmN0aW9uIChjYXRlZ29yeUlkKSB7XG4gICAgICBpZiAoY2F0ZWdvcmllcy5saXN0LmluZGV4T2YoY2F0ZWdvcnlJZCkgIT09IC0xKSB7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDYXRlZ29yaWVzSXRlbSwge1xuICAgICAgICAgIGtleTogY2F0ZWdvcmllcy5pdGVtc1tjYXRlZ29yeUlkXS5pZCxcbiAgICAgICAgICB0aXRsZTogY2F0ZWdvcmllcy5pdGVtc1tjYXRlZ29yeUlkXS50aXRsZSxcbiAgICAgICAgICBkZWxDYWxsYmFjazogZnVuY3Rpb24gZGVsQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVsU2VsZWN0ZGVkQ2F0ZWdvcmllcyhjYXRlZ29yeUlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRlZ29yeXNcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDYXRlZ29yaWVzQWRkQnV0dG9uLCB7XG4gICAgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgcmV0dXJuIHNldElzT3Blbih0cnVlKTtcbiAgICB9XG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhdGVnb3J5cy1pdGVtcy13cmFwXCJcbiAgfSwgcmVuZGVyQ2F0ZWdvcmllcygpKSksIGlzT3BlbiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZWxlY3RDYXRlZ29yaWVzLCB7XG4gICAgc2VsZWN0ZGVkQ2F0ZWdvcmllczogc2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzOiBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzLFxuICAgIGRlbFNlbGVjdGRlZENhdGVnb3JpZXM6IGRlbFNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgc2V0SXNPcGVuOiBzZXRJc09wZW5cbiAgfSkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uL3N0b3JlJztcbmV4cG9ydCB2YXIgU2VhcmNoSW5wdXQgPSBvYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoc3RvcmUpLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkc2VhID0gX1JlYWN0JHVzZUNvbnRleHQuc2VhcmNoU3RvcmUuZm9ybSxcbiAgICAgIHNlYXJjaFN0cmluZyA9IF9SZWFjdCR1c2VDb250ZXh0JHNlYS5zZWFyY2hTdHJpbmcsXG4gICAgICBzZXRTZWFyY2hTdHJpbmcgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEuc2V0U2VhcmNoU3RyaW5nO1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgcmV0dXJuIHNldFNlYXJjaFN0cmluZyhlLnRhcmdldC52YWx1ZSk7XG4gICAgfSxcbiAgICB2YWx1ZTogc2VhcmNoU3RyaW5nLFxuICAgIGNsYXNzTmFtZTogXCJzZWFyY2gtZm9ybV9faW5wdXRcIixcbiAgICB0eXBlOiBcInRleHRcIixcbiAgICBuYW1lOiBcInRpdGxlXCIsXG4gICAgcGxhY2Vob2xkZXI6IFwiXFx1MDQxRFxcdTA0MzBcXHUwNDM3XFx1MDQzMlxcdTA0MzBcXHUwNDNEXFx1MDQzOFxcdTA0MzVcIlxuICB9KTtcbn0pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uL3N0b3JlJztcbmltcG9ydCB7IENhdGVnb3JpZXMgfSBmcm9tIFwiLi4vY2F0ZWdvcmllc1wiO1xuaW1wb3J0IHsgdXNlSGlzdG9yeSwgdXNlTG9jYXRpb24gfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xuaW1wb3J0IHsgU2VhcmNoSW5wdXQgfSBmcm9tIFwiLi4vc2VhcmNoSW5wdXRcIjtcbmV4cG9ydCB2YXIgU2VhcmNoRm9ybSA9IG9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChzdG9yZSksXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRzZWEgPSBfUmVhY3QkdXNlQ29udGV4dC5zZWFyY2hTdG9yZSxcbiAgICAgIGZpbmQgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEuZmluZCxcbiAgICAgIHNldFRvdGFsUGFnZXMgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEuc2V0VG90YWxQYWdlcyxcbiAgICAgIHNldFJlcXVlc3RQYXJhbXMgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEuc2V0UmVxdWVzdFBhcmFtcyxcbiAgICAgIHNldFJlcXVlc3RQYXJhbXNGcm9tQm93c2VyU2VhcmNoU3RyaW5nID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhLnNldFJlcXVlc3RQYXJhbXNGcm9tQm93c2VyU2VhcmNoU3RyaW5nLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkc2VhMiA9IF9SZWFjdCR1c2VDb250ZXh0JHNlYS5mb3JtLFxuICAgICAgc2VsZWN0ZGVkQ2F0ZWdvcmllcyA9IF9SZWFjdCR1c2VDb250ZXh0JHNlYTIuc2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICAgIGFkZFNlbGVjdGRlZENhdGVnb3JpZXMgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEyLmFkZFNlbGVjdGRlZENhdGVnb3JpZXMsXG4gICAgICBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhMi5kZWxTZWxlY3RkZWRDYXRlZ29yaWVzLFxuICAgICAgc2VhcmNoU3RyaW5nID0gX1JlYWN0JHVzZUNvbnRleHQkc2VhLnJlcXVlc3Quc2VhcmNoU3RyaW5nO1xuXG4gIHZhciBoaXN0b3J5ID0gdXNlSGlzdG9yeSgpO1xuICB2YXIgbG9jYXRpb24gPSB1c2VMb2NhdGlvbigpO1xuXG4gIHZhciBvbkNsaWNrRmluZCA9IGZ1bmN0aW9uIG9uQ2xpY2tGaW5kKCkge1xuICAgIHNldFJlcXVlc3RQYXJhbXMoKTtcbiAgICB2YXIgdXJsID0gZW5jb2RlVVJJKFwiLz9zZWFyY2g9XCIuY29uY2F0KHNlYXJjaFN0cmluZywgXCImY2F0ZWdvcmllcz1cIikuY29uY2F0KHNlbGVjdGRlZENhdGVnb3JpZXMpKTtcbiAgICBoaXN0b3J5LnB1c2godXJsKTtcbiAgICBzZXRUb3RhbFBhZ2VzKCk7XG4gICAgZmluZCgpO1xuICB9O1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTtcbiAgICB2YXIgc2VhcmNoU3RyaW5nID0gJycsXG4gICAgICAgIGNhdGVnb3JpZXMgPSAnJztcbiAgICBpZiAocGFyYW1zLmhhcygnc2VhcmNoJykpIHNlYXJjaFN0cmluZyA9IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbXMuZ2V0KCdzZWFyY2gnKSk7XG4gICAgaWYgKHBhcmFtcy5oYXMoJ2NhdGVnb3JpZXMnKSkgY2F0ZWdvcmllcyA9IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbXMuZ2V0KCdjYXRlZ29yaWVzJykpO1xuICAgIHZhciBjYXRlZ29yaWVzQXJyID0gY2F0ZWdvcmllcy5sZW5ndGggPiAwID8gY2F0ZWdvcmllcy5zcGxpdCgnLCcpLm1hcChOdW1iZXIpIDogJyc7XG4gICAgc2V0UmVxdWVzdFBhcmFtc0Zyb21Cb3dzZXJTZWFyY2hTdHJpbmcoc2VhcmNoU3RyaW5nLCBjYXRlZ29yaWVzQXJyKTtcbiAgICBzZXRUb3RhbFBhZ2VzKCk7XG4gICAgZmluZCgpO1xuICB9LCBbXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNlYXJjaC1mb3JtLXdyYXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImZvcm1cIiwge1xuICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChlKSB7XG4gICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcInNlYXJjaC1mb3JtXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJzZWFyY2gtZm9ybV9faW5wdXQtd3JhcFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlYXJjaElucHV0LCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gb25DbGlja0ZpbmQoKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJzZWFyY2gtZm9ybV9fYnV0dG9uXCIsXG4gICAgdHlwZTogXCJzdWJtaXRcIlxuICB9LCBcIlxcdTA0MURcXHUwNDMwXFx1MDQzOVxcdTA0NDJcXHUwNDM4XCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDYXRlZ29yaWVzLCB7XG4gICAgc2VsZWN0ZGVkQ2F0ZWdvcmllczogc2VsZWN0ZGVkQ2F0ZWdvcmllcyxcbiAgICBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzOiBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzLFxuICAgIGRlbFNlbGVjdGRlZENhdGVnb3JpZXM6IGRlbFNlbGVjdGRlZENhdGVnb3JpZXNcbiAgfSkpKSk7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSBcIi4uLy4uL3N0b3JlXCI7XG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuLi9wb3B1cFwiO1xuaW1wb3J0IHsgQ2F0ZWdvcmllcyB9IGZyb20gXCIuLi9jYXRlZ29yaWVzXCI7XG5leHBvcnQgdmFyIEVkaXRDYXRhbG9nSXRlbSA9IG9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChzdG9yZSksXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRjYXQgPSBfUmVhY3QkdXNlQ29udGV4dC5jYXRhbG9nU3RvcmUsXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRjYXQyID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0LmVkaXRXaW5kb3csXG4gICAgICBpc09wZW4gPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQyLmlzT3BlbixcbiAgICAgIHRpdGxlID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0Mi50aXRsZSxcbiAgICAgIGFub25zID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0Mi5hbm9ucyxcbiAgICAgIHJlbGF0ZWRDYXRlZ29yaWVzID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0Mi5yZWxhdGVkQ2F0ZWdvcmllcyxcbiAgICAgIHByZXZpZXdJbWcgPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQyLnByZXZpZXdJbWcsXG4gICAgICBzYXZlQ2F0YWxvZ0l0ZW0gPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQuc2F2ZUNhdGFsb2dJdGVtLFxuICAgICAgc2V0RWRpdFdpbmRvdyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5zZXRFZGl0V2luZG93LFxuICAgICAgYWRkUmVsYXRlZENhdGVnb3JpZXMgPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQuYWRkUmVsYXRlZENhdGVnb3JpZXMsXG4gICAgICBkZWxSZWxhdGVkQ2F0ZWdvcmllcyA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5kZWxSZWxhdGVkQ2F0ZWdvcmllcztcblxuICB2YXIgZmlsZUlucHV0ID0gUmVhY3QudXNlUmVmKG51bGwpO1xuXG4gIHZhciBoYW5kbGVJbWcgPSBmdW5jdGlvbiBoYW5kbGVJbWcoaW5wdXQpIHtcbiAgICBzZXRFZGl0V2luZG93KHtcbiAgICAgIGltZzogaW5wdXQuZmlsZXNbMF0sXG4gICAgICBwcmV2aWV3SW1nOiBVUkwuY3JlYXRlT2JqZWN0VVJMKGlucHV0LmZpbGVzWzBdKVxuICAgIH0pO1xuICAgIGZpbGVJbnB1dC5jdXJyZW50LnZhbHVlID0gbnVsbDtcbiAgfTtcblxuICByZXR1cm4gaXNPcGVuICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBvcHVwLCB7XG4gICAgY2xhc3NOYW1lOiBcIlwiLFxuICAgIGNsb3NlQ2FsbGJhY2s6IGZ1bmN0aW9uIGNsb3NlQ2FsbGJhY2soKSB7XG4gICAgICByZXR1cm4gc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgIGlzT3BlbjogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIsIHtcbiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZSkge1xuICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm1cIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImVkaXQtY2F0LWl0ZW0tZm9ybV9faW1nLXdyYXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImVkaXQtY2F0LWl0ZW0tZm9ybV9faW5wdXQtdGl0bGVcIlxuICB9LCBcIlxcdTA0MThcXHUwNDM3XFx1MDQzRVxcdTA0MzFcXHUwNDQwXFx1MDQzMFxcdTA0MzZcXHUwNDM1XFx1MDQzRFxcdTA0MzhcXHUwNDM1XCIpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiYnV0dG9uIGVkaXQtY2F0LWl0ZW0tZm9ybV9faW1nLWJ1dHRvblwiXG4gIH0sIFwiXFx1MDQxRVxcdTA0NDJcXHUwNDNBXFx1MDQ0MFxcdTA0NEJcXHUwNDQyXFx1MDQ0Q1wiLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICByZWY6IGZpbGVJbnB1dCxcbiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgcmV0dXJuIGhhbmRsZUltZyhlLnRhcmdldCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtX19pbWctaW5wdXRcIixcbiAgICBhY2NlcHQ6IFwiaW1hZ2UveC1wbmcsaW1hZ2UvZ2lmLGltYWdlL2pwZWdcIixcbiAgICB0eXBlOiBcImZpbGVcIixcbiAgICBuYW1lOiBcImltYWdlXCJcbiAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm1fX2ltZ1wiLFxuICAgIHN0eWxlOiB7XG4gICAgICBiYWNrZ3JvdW5kSW1hZ2U6IFwidXJsKFwiLmNvbmNhdChwcmV2aWV3SW1nLCBcIilcIilcbiAgICB9XG4gIH0sIHByZXZpZXdJbWcgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgIGltZzogJycsXG4gICAgICAgIHByZXZpZXdJbWc6ICcnXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm0tZGVsXCJcbiAgfSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm1fX2lucHV0LXdyYXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImVkaXQtY2F0LWl0ZW0tZm9ybV9faW5wdXQtdGl0bGVcIlxuICB9LCBcIlxcdTA0MTdcXHUwNDMwXFx1MDQzM1xcdTA0M0VcXHUwNDNCXFx1MDQzRVxcdTA0MzJcXHUwNDNFXFx1MDQzQVwiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHJldHVybiBzZXRFZGl0V2luZG93KHtcbiAgICAgICAgdGl0bGU6IGUudGFyZ2V0LnZhbHVlXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbHVlOiB0aXRsZSxcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtX19pbnB1dFwiLFxuICAgIHR5cGU6IFwidGV4dFwiLFxuICAgIG5hbWU6IFwidGl0bGVcIlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm1fX2lucHV0LXRpdGxlXCJcbiAgfSwgXCJcXHUwNDFFXFx1MDQzRlxcdTA0MzhcXHUwNDQxXFx1MDQzMFxcdTA0M0RcXHUwNDM4XFx1MDQzNVwiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiLCB7XG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHJldHVybiBzZXRFZGl0V2luZG93KHtcbiAgICAgICAgYW5vbnM6IGUudGFyZ2V0LnZhbHVlXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbHVlOiBhbm9ucyxcbiAgICBjbGFzc05hbWU6IFwiZWRpdC1jYXQtaXRlbS1mb3JtX190ZXh0YXJlYVwiLFxuICAgIG5hbWU6IFwiYW5vbnNcIlxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENhdGVnb3JpZXMsIHtcbiAgICBzZWxlY3RkZWRDYXRlZ29yaWVzOiByZWxhdGVkQ2F0ZWdvcmllcyxcbiAgICBhZGRTZWxlY3RkZWRDYXRlZ29yaWVzOiBhZGRSZWxhdGVkQ2F0ZWdvcmllcyxcbiAgICBkZWxTZWxlY3RkZWRDYXRlZ29yaWVzOiBkZWxSZWxhdGVkQ2F0ZWdvcmllc1xuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJlZGl0LWNhdC1pdGVtLWZvcm1fX3N1Ym1pdC13cmFwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gc2F2ZUNhdGFsb2dJdGVtKCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwiYnV0dG9uXCJcbiAgfSwgXCJcXHUwNDIxXFx1MDQzRVxcdTA0NDVcXHUwNDQwXFx1MDQzMFxcdTA0M0RcXHUwNDM4XFx1MDQ0MlxcdTA0NENcIikpKSk7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmV4cG9ydCB2YXIgQnV0dG9uID0gZnVuY3Rpb24gQnV0dG9uKF9yZWYpIHtcbiAgdmFyIG5hbWUgPSBfcmVmLm5hbWUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIGNhbGxiYWNrID0gX3JlZi5jYWxsYmFjaztcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwiYnV0dG9uIFwiLmNvbmNhdChjbGFzc05hbWUpXG4gIH0sIG5hbWUpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmV4cG9ydCB2YXIgQ2F0YWxvZ0NhdGVnb3J5SXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7XG4gIHZhciB0aXRsZSA9IF9yZWYudGl0bGU7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhdGFsb2ctaXRlbV9fY2F0ZWdvcnktaXRlbVwiXG4gIH0sIHRpdGxlKTtcbn0sIGZ1bmN0aW9uIChwcmV2UHJvcHMsIG5leHRQcm9wcykge1xuICBpZiAocHJldlByb3BzLnRpdGxlID09PSBuZXh0UHJvcHMudGl0bGUpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuLi9idXR0b25cIjtcbmltcG9ydCB7IENhdGFsb2dDYXRlZ29yeUl0ZW0gfSBmcm9tIFwiLi4vY2F0YWxvZ0NhdGVnb3J5SXRlbVwiO1xuZXhwb3J0IHZhciBDYXRhbG9nSXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7XG4gIHZhciBpc0F1dGggPSBfcmVmLmlzQXV0aCxcbiAgICAgIHRpdGxlID0gX3JlZi50aXRsZSxcbiAgICAgIGFub25zID0gX3JlZi5hbm9ucyxcbiAgICAgIGltYWdlID0gX3JlZi5pbWFnZSxcbiAgICAgIGNhdGVnb3JpZXMgPSBfcmVmLmNhdGVnb3JpZXMsXG4gICAgICBlZGl0Q2FsbGJhY2sgPSBfcmVmLmVkaXRDYWxsYmFjayxcbiAgICAgIGRlbENhbGxiYWNrID0gX3JlZi5kZWxDYWxsYmFjaztcblxuICB2YXIgcmVuZGVyQ2F0ZWdvcmllcyA9IGZ1bmN0aW9uIHJlbmRlckNhdGVnb3JpZXMoKSB7XG4gICAgcmV0dXJuIGNhdGVnb3JpZXMubWFwKGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgaWYgKGNhdGVnb3J5LmlkKSB7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDYXRhbG9nQ2F0ZWdvcnlJdGVtLCB7XG4gICAgICAgICAgdGl0bGU6IGNhdGVnb3J5LnRpdGxlLFxuICAgICAgICAgIGtleTogY2F0ZWdvcnkuaWRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0YWxvZy1pdGVtXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRhbG9nLWl0ZW1fX2ltZ19fd3JhcFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHtcbiAgICBhbHQ6IHRpdGxlLFxuICAgIGNsYXNzTmFtZTogXCJjYXRhbG9nLWl0ZW1fX2ltZ1wiLFxuICAgIHNyYzogXCJcIi5jb25jYXQoaW1hZ2UgPyBwcm9jZXNzLmVudi5CQUNLRU5EX0hPU1QgKyBpbWFnZSA6ICcnKVxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwiY2F0YWxvZy1pdGVtX190eHRcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhdGFsb2ctaXRlbV9faGVhZGVyXCJcbiAgfSwgdGl0bGUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNhdGFsb2ctaXRlbV9fY2F0ZWdvcnlzXCJcbiAgfSwgcmVuZGVyQ2F0ZWdvcmllcygpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRhbG9nLWl0ZW1fX2Fub25zXCJcbiAgfSwgYW5vbnMpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRhbG9nLWl0ZW1fX2N0cmwtYnV0dG9uc1wiXG4gIH0sIGlzQXV0aCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICBjbGFzc05hbWU6IFwiYnV0dG9uX2NhdGFsb2ctaXRlbVwiLFxuICAgIG5hbWU6IFwiXFx1MDQyMFxcdTA0MzVcXHUwNDM0XFx1MDQzMFxcdTA0M0FcXHUwNDQyXFx1MDQzOFxcdTA0NDBcXHUwNDNFXFx1MDQzMlxcdTA0MzBcXHUwNDQyXFx1MDQ0Q1wiLFxuICAgIGNhbGxiYWNrOiBlZGl0Q2FsbGJhY2tcbiAgfSksIGlzQXV0aCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICBjbGFzc05hbWU6IFwiYnV0dG9uX2NhdGFsb2ctaXRlbVwiLFxuICAgIG5hbWU6IFwiXFx1MDQyM1xcdTA0MzRcXHUwNDMwXFx1MDQzQlxcdTA0MzhcXHUwNDQyXFx1MDQ0Q1wiLFxuICAgIGNhbGxiYWNrOiBkZWxDYWxsYmFja1xuICB9KSkpO1xufSwgZnVuY3Rpb24gKHByZXZQcm9wcywgbmV4dFByb3BzKSB7XG4gIGlmIChwcmV2UHJvcHMudGl0bGUgPT09IG5leHRQcm9wcy50aXRsZSAmJiBwcmV2UHJvcHMuYW5vbnMgPT09IG5leHRQcm9wcy5hbm9ucyAmJiBwcmV2UHJvcHMuaW1hZ2UgPT09IG5leHRQcm9wcy5pbWFnZSAmJiBwcmV2UHJvcHMuaXNBdXRoID09PSBuZXh0UHJvcHMuaXNBdXRoICYmIEpTT04uc3RyaW5naWZ5KHByZXZQcm9wcy5jYXRlZ29yaWVzKSA9PT0gSlNPTi5zdHJpbmdpZnkobmV4dFByb3BzLmNhdGVnb3JpZXMpKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufSk7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcG9wdXBcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL2J1dHRvblwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQ29uZmlybWF0aW9uRGlhbG9nKF9yZWYpIHtcbiAgdmFyIGhlYWRlciA9IF9yZWYuaGVhZGVyLFxuICAgICAgY29uZmlybVRpdGxlID0gX3JlZi5jb25maXJtVGl0bGUsXG4gICAgICBjYW5jZWxUaXRsZSA9IF9yZWYuY2FuY2VsVGl0bGUsXG4gICAgICBvbkNvbmZpcm1DbGljayA9IF9yZWYub25Db25maXJtQ2xpY2s7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgaXNPcGVuID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldElzT3BlbiA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIG9uT3BlbiA9IGZ1bmN0aW9uIG9uT3BlbigpIHtcbiAgICByZXR1cm4gc2V0SXNPcGVuKCFpc09wZW4pO1xuICB9O1xuXG4gIHZhciBDb25maXJtYXRpb25EaWFsb2cgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGlzT3BlbiAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb3B1cCwge1xuICAgICAgY2xvc2VDYWxsYmFjazogb25PcGVuLFxuICAgICAgY2xhc3NOYW1lOiBcInBvcHVwLXdyYXBfZGVsZXRlLWNvbmZpcm1hdGlvblwiXG4gICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcInBvcHVwLWRlbGV0ZS1jb25maXJtYXRpb25fX2hlYWRlclwiXG4gICAgfSwgaGVhZGVyKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcInBvcHVwLWRlbGV0ZS1jb25maXJtYXRpb25fX2J1dHRvbnMtd3JhcFwiXG4gICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgICBuYW1lOiBjb25maXJtVGl0bGUsXG4gICAgICBjbGFzc05hbWU6ICcnLFxuICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4gb25Db25maXJtQ2xpY2soKTtcbiAgICAgIH1cbiAgICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgICBuYW1lOiBjYW5jZWxUaXRsZSxcbiAgICAgIGNsYXNzTmFtZTogJycsXG4gICAgICBjYWxsYmFjazogb25PcGVuXG4gICAgfSkpKTtcbiAgfSwgW2lzT3Blbl0pO1xuICByZXR1cm4ge1xuICAgIG9uT3Blbjogb25PcGVuLFxuICAgIENvbmZpcm1hdGlvbkRpYWxvZzogQ29uZmlybWF0aW9uRGlhbG9nXG4gIH07XG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uL3N0b3JlJztcbmltcG9ydCB7IENhdGFsb2dJdGVtIH0gZnJvbSAnLi4vY2F0YWxvZ0l0ZW0nO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4uL2J1dHRvblwiO1xuaW1wb3J0IHVzZUNvbmZpcm1hdGlvbkRpYWxvZyBmcm9tICcuLi8uLi9ob29rcy91c2VDb25maXJtYXRpb25EaWFsb2cnO1xuZXhwb3J0IHZhciBDYXRhbG9nID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIGlzQXV0aCA9IF9SZWFjdCR1c2VDb250ZXh0LmF1dGhTdG9yZS5pc0F1dGgsXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRjYXQgPSBfUmVhY3QkdXNlQ29udGV4dC5jYXRhbG9nU3RvcmUsXG4gICAgICBjYXRhbG9nID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0LmNhdGFsb2csXG4gICAgICBkZWxDYXRhbG9nSXRlbSA9IF9SZWFjdCR1c2VDb250ZXh0JGNhdC5kZWxDYXRhbG9nSXRlbSxcbiAgICAgIHNldEVkaXRXaW5kb3cgPSBfUmVhY3QkdXNlQ29udGV4dCRjYXQuc2V0RWRpdFdpbmRvdyxcbiAgICAgIHNldERlbGV0ZUlkID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0LnNldERlbGV0ZUlkLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkc2VhID0gX1JlYWN0JHVzZUNvbnRleHQuc2VhcmNoU3RvcmUsXG4gICAgICBjdXJyZW50UGFnZSA9IF9SZWFjdCR1c2VDb250ZXh0JHNlYS5jdXJyZW50UGFnZSxcbiAgICAgIHRvdGFsUGFnZXMgPSBfUmVhY3QkdXNlQ29udGV4dCRzZWEudG90YWxQYWdlcyxcbiAgICAgIGZpbmROZXh0UGFnZSA9IF9SZWFjdCR1c2VDb250ZXh0JHNlYS5maW5kTmV4dFBhZ2U7XG5cbiAgdmFyIF91c2VDb25maXJtYXRpb25EaWFsbyA9IHVzZUNvbmZpcm1hdGlvbkRpYWxvZyh7XG4gICAgaGVhZGVyOiAn0KPQtNCw0LvQuNGC0Yw/JyxcbiAgICBjb25maXJtVGl0bGU6ICfQlNCwJyxcbiAgICBjYW5jZWxUaXRsZTogJ9Cd0LXRgicsXG4gICAgb25Db25maXJtQ2xpY2s6IGZ1bmN0aW9uIG9uQ29uZmlybUNsaWNrKCkge1xuICAgICAgcmV0dXJuIGNvbmZpcm1EZWxldGUoKTtcbiAgICB9XG4gIH0pLFxuICAgICAgQ29uZmlybWF0aW9uRGlhbG9nID0gX3VzZUNvbmZpcm1hdGlvbkRpYWxvLkNvbmZpcm1hdGlvbkRpYWxvZyxcbiAgICAgIG9uT3BlbiA9IF91c2VDb25maXJtYXRpb25EaWFsby5vbk9wZW47XG5cbiAgaWYgKGNhdGFsb2cgPT09IG51bGwpIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBcIkxvYWRpbmdcIik7XG5cbiAgdmFyIGhhbmRsZURlbGV0ZSA9IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZShpZCkge1xuICAgIHNldERlbGV0ZUlkKGlkKTtcbiAgICBvbk9wZW4oKTtcbiAgfTtcblxuICB2YXIgY29uZmlybURlbGV0ZSA9IGZ1bmN0aW9uIGNvbmZpcm1EZWxldGUoKSB7XG4gICAgb25PcGVuKCk7XG4gICAgZGVsQ2F0YWxvZ0l0ZW0oKTtcbiAgfTtcblxuICB2YXIgcmVuZGVyQ2F0YWxvZ0l0ZW1zID0gZnVuY3Rpb24gcmVuZGVyQ2F0YWxvZ0l0ZW1zKCkge1xuICAgIHJldHVybiBjYXRhbG9nLmxpc3QubWFwKGZ1bmN0aW9uIChpZCkge1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENhdGFsb2dJdGVtLCB7XG4gICAgICAgIGtleTogaWQsXG4gICAgICAgIGlzQXV0aDogaXNBdXRoLFxuICAgICAgICB0aXRsZTogY2F0YWxvZy5pdGVtc1tpZF0udGl0bGUsXG4gICAgICAgIGFub25zOiBjYXRhbG9nLml0ZW1zW2lkXS5hbm9ucyxcbiAgICAgICAgaW1hZ2U6IGNhdGFsb2cuaXRlbXNbaWRdLmltYWdlLFxuICAgICAgICBjYXRlZ29yaWVzOiBjYXRhbG9nLml0ZW1zW2lkXS5jYXRlZ29yaWVzLFxuICAgICAgICBlZGl0Q2FsbGJhY2s6IGZ1bmN0aW9uIGVkaXRDYWxsYmFjaygpIHtcbiAgICAgICAgICByZXR1cm4gc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgICAgICBjYXRhbG9nSWQ6IGlkLFxuICAgICAgICAgICAgdGl0bGU6IGNhdGFsb2cuaXRlbXNbaWRdLnRpdGxlLFxuICAgICAgICAgICAgYW5vbnM6IGNhdGFsb2cuaXRlbXNbaWRdLmFub25zLFxuICAgICAgICAgICAgaW1nOiBjYXRhbG9nLml0ZW1zW2lkXS5pbWFnZSxcbiAgICAgICAgICAgIHByZXZpZXdJbWc6IGNhdGFsb2cuaXRlbXNbaWRdLmltYWdlLFxuICAgICAgICAgICAgcmVsYXRlZENhdGVnb3JpZXM6IGNhdGFsb2cuaXRlbXNbaWRdLmNhdGVnb3JpZXMubWFwKGZ1bmN0aW9uIChjYXRlZ29yeSkge1xuICAgICAgICAgICAgICByZXR1cm4gY2F0ZWdvcnkuaWQ7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWxDYWxsYmFjazogZnVuY3Rpb24gZGVsQ2FsbGJhY2soKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZURlbGV0ZShpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJjYXRhbG9nXCJcbiAgfSwgY2F0YWxvZy5saXN0Lmxlbmd0aCA+IDAgPyByZW5kZXJDYXRhbG9nSXRlbXMoKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIFwiXFx1MDQxRFxcdTA0MzhcXHUwNDQ3XFx1MDQzNVxcdTA0MzNcXHUwNDNFIFxcdTA0M0RcXHUwNDM1IFxcdTA0M0RcXHUwNDMwXFx1MDQzOVxcdTA0MzRcXHUwNDM1XFx1MDQzRFxcdTA0M0VcIiksIHRvdGFsUGFnZXMgPiAxICYmIGN1cnJlbnRQYWdlIDwgdG90YWxQYWdlcyAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICBuYW1lOiBcIlxcdTA0MTRcXHUwNDMwXFx1MDQzQlxcdTA0MzVcXHUwNDM1XCIsXG4gICAgY2xhc3NOYW1lOiBcImJ1dHRvbl9wYWdpbmdcIixcbiAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICByZXR1cm4gZmluZE5leHRQYWdlKCk7XG4gICAgfVxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbmZpcm1hdGlvbkRpYWxvZywgbnVsbCkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgTmF2IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9uYXYnO1xuaW1wb3J0IHsgU2VhcmNoRm9ybSB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvc2VhcmNoRm9ybSc7XG5pbXBvcnQgeyBFZGl0Q2F0YWxvZ0l0ZW0gfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2VkaXRDYXRhbG9nSXRlbSc7XG5pbXBvcnQgeyBDYXRhbG9nIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9jYXRhbG9nJztcbmV4cG9ydCB2YXIgSW5kZXhQYWdlID0gZnVuY3Rpb24gSW5kZXhQYWdlKCkge1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5hdiwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNlYXJjaEZvcm0sIG51bGwpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDYXRhbG9nLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRWRpdENhdGFsb2dJdGVtLCBudWxsKSk7XG59OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tIFwiLi4vLi4vc3RvcmVcIjtcbmV4cG9ydCB2YXIgQWRkTmV3Q2F0ZWdvcnlGb3JtID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JHNldCA9IF9SZWFjdCR1c2VDb250ZXh0LnNldHVwU3RvcmUsXG4gICAgICBjYXRlZ29yeVRpdGxlID0gX1JlYWN0JHVzZUNvbnRleHQkc2V0LmNhdGVnb3J5VGl0bGUsXG4gICAgICBzZXRDYXRlZ29yeVRpdGxlID0gX1JlYWN0JHVzZUNvbnRleHQkc2V0LnNldENhdGVnb3J5VGl0bGUsXG4gICAgICBhZGRDYXRlZ29yeUl0ZW0gPSBfUmVhY3QkdXNlQ29udGV4dCRzZXQuYWRkQ2F0ZWdvcnlJdGVtO1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImFkZC1jYXRlZ29yeS1mb3JtLXdyYXBcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImZvcm1cIiwge1xuICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChlKSB7XG4gICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImFkZC1jYXRlZ29yeS1mb3JtXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJhZGQtY2F0ZWdvcnktZm9ybV9faW5wdXQtd3JhcFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICByZXR1cm4gc2V0Q2F0ZWdvcnlUaXRsZShlLnRhcmdldC52YWx1ZSk7XG4gICAgfSxcbiAgICB2YWx1ZTogY2F0ZWdvcnlUaXRsZSxcbiAgICBjbGFzc05hbWU6IFwiYWRkLWNhdGVnb3J5LWZvcm1fX2lucHV0XCIsXG4gICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgbmFtZTogXCJ0aXRsZVwiLFxuICAgIHBsYWNlaG9sZGVyOiBcIlxcdTA0MURcXHUwNDMwXFx1MDQzN1xcdTA0MzJcXHUwNDMwXFx1MDQzRFxcdTA0MzhcXHUwNDM1XCJcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgcmV0dXJuIGFkZENhdGVnb3J5SXRlbSgpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImFkZC1jYXRlZ29yeS1mb3JtX19idXR0b25cIixcbiAgICB0eXBlOiBcInN1Ym1pdFwiXG4gIH0sIFwiXFx1MDQxNFxcdTA0M0VcXHUwNDMxXFx1MDQzMFxcdTA0MzJcXHUwNDM4XFx1MDQ0MlxcdTA0NENcIikpKSk7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuLi9idXR0b25cIjtcbmV4cG9ydCB2YXIgU2V0dXBDYXRlZ29yaWVzSXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5tZW1vKGZ1bmN0aW9uIChfcmVmKSB7XG4gIHZhciB0aXRsZSA9IF9yZWYudGl0bGUsXG4gICAgICBvcGVuRWRpdFdpbmRvdyA9IF9yZWYub3BlbkVkaXRXaW5kb3c7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNldHVwLWNhdGVnb3J5c19faXRlbVwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNldHVwLWNhdGVnb3J5c19faGVhZGVyXCJcbiAgfSwgdGl0bGUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChCdXR0b24sIHtcbiAgICBuYW1lOiBcIlxcdTA0MjBcXHUwNDM1XFx1MDQzNFxcdTA0MzBcXHUwNDNBXFx1MDQ0MlxcdTA0MzhcXHUwNDQwXFx1MDQzRVxcdTA0MzJcXHUwNDMwXFx1MDQ0MlxcdTA0NENcIixcbiAgICBjbGFzc05hbWU6IFwiYnV0dG9uX3NldHVwLWNhdGVnb3J5cy1pdGVtXCIsXG4gICAgY2FsbGJhY2s6IG9wZW5FZGl0V2luZG93XG4gIH0pKTtcbn0sIGZ1bmN0aW9uIChwcmV2UHJvcHMsIG5leHRQcm9wcykge1xuICBpZiAocHJldlByb3BzLnRpdGxlID09PSBuZXh0UHJvcHMudGl0bGUpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4uL3BvcHVwXCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gXCIuLi8uLi9zdG9yZVwiO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHVzZUNvbmZpcm1hdGlvbkRpYWxvZyBmcm9tIFwiLi4vLi4vaG9va3MvdXNlQ29uZmlybWF0aW9uRGlhbG9nXCI7XG5leHBvcnQgdmFyIFNldHVwQ2F0ZWdvcmllc0VkaXRXaW4gPSBvYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoc3RvcmUpLFxuICAgICAgX1JlYWN0JHVzZUNvbnRleHQkc2V0ID0gX1JlYWN0JHVzZUNvbnRleHQuc2V0dXBTdG9yZSxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JHNldDIgPSBfUmVhY3QkdXNlQ29udGV4dCRzZXQuZWRpdFdpbmRvdyxcbiAgICAgIGlzT3BlbiA9IF9SZWFjdCR1c2VDb250ZXh0JHNldDIuaXNPcGVuLFxuICAgICAgdGl0bGUgPSBfUmVhY3QkdXNlQ29udGV4dCRzZXQyLnRpdGxlLFxuICAgICAgc2V0RWRpdFdpbmRvdyA9IF9SZWFjdCR1c2VDb250ZXh0JHNldC5zZXRFZGl0V2luZG93LFxuICAgICAgdXBkYXRlQ2F0ZWdvcnlJdGVtID0gX1JlYWN0JHVzZUNvbnRleHQkc2V0LnVwZGF0ZUNhdGVnb3J5SXRlbSxcbiAgICAgIGRlbGV0ZUNhdGVnb3J5SXRlbSA9IF9SZWFjdCR1c2VDb250ZXh0JHNldC5kZWxldGVDYXRlZ29yeUl0ZW07XG5cbiAgdmFyIF91c2VDb25maXJtYXRpb25EaWFsbyA9IHVzZUNvbmZpcm1hdGlvbkRpYWxvZyh7XG4gICAgaGVhZGVyOiAn0KPQtNCw0LvQuNGC0Yw/JyxcbiAgICBjb25maXJtVGl0bGU6ICfQlNCwJyxcbiAgICBjYW5jZWxUaXRsZTogJ9Cd0LXRgicsXG4gICAgb25Db25maXJtQ2xpY2s6IGZ1bmN0aW9uIG9uQ29uZmlybUNsaWNrKCkge1xuICAgICAgcmV0dXJuIGNvbmZpcm1EZWxldGUoKTtcbiAgICB9XG4gIH0pLFxuICAgICAgQ29uZmlybWF0aW9uRGlhbG9nID0gX3VzZUNvbmZpcm1hdGlvbkRpYWxvLkNvbmZpcm1hdGlvbkRpYWxvZyxcbiAgICAgIG9uT3BlbiA9IF91c2VDb25maXJtYXRpb25EaWFsby5vbk9wZW47XG5cbiAgdmFyIGNvbmZpcm1EZWxldGUgPSBmdW5jdGlvbiBjb25maXJtRGVsZXRlKCkge1xuICAgIG9uT3BlbigpO1xuICAgIGRlbGV0ZUNhdGVnb3J5SXRlbSgpO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgaXNPcGVuICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBvcHVwLCB7XG4gICAgY2xvc2VDYWxsYmFjazogZnVuY3Rpb24gY2xvc2VDYWxsYmFjaygpIHtcbiAgICAgIHJldHVybiBzZXRFZGl0V2luZG93KHtcbiAgICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgIHRpdGxlOiAnJ1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwicG9wdXAtd3JhcF9zZXR1cC1jYXRlZ29yeXNcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNldHVwLWNhdGVnb3J5LWVkaXRcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICBjbGFzc05hbWU6IFwic2V0dXAtY2F0ZWdvcnktZWRpdF9fdGl0bGUtaW5wdXRcIixcbiAgICB0eXBlOiBcInRleHRcIixcbiAgICBuYW1lOiBcIm5ld190aXRsZVwiLFxuICAgIHZhbHVlOiB0aXRsZSxcbiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgcmV0dXJuIHNldEVkaXRXaW5kb3coe1xuICAgICAgICB0aXRsZTogZS50YXJnZXQudmFsdWVcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcGxhY2Vob2xkZXI6IFwiXFx1MDQxRFxcdTA0MzBcXHUwNDM3XFx1MDQzMlxcdTA0MzBcXHUwNDNEXFx1MDQzOFxcdTA0MzVcIlxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwic2V0dXAtY2F0ZWdvcnktZWRpdF9fYnV0dG9ucy13cmFwXCJcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gdXBkYXRlQ2F0ZWdvcnlJdGVtKCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwiYnV0dG9uIGJ1dHRvbl9jYXRhbG9nLWl0ZW1cIlxuICB9LCBcIlxcdTA0MjFcXHUwNDNFXFx1MDQ0NVxcdTA0NDBcXHUwNDMwXFx1MDQzRFxcdTA0MzhcXHUwNDQyXFx1MDQ0Q1wiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gb25PcGVuKCk7XG4gICAgfSxcbiAgICBjbGFzc05hbWU6IFwiYnV0dG9uIGJ1dHRvbl9jYXRhbG9nLWl0ZW1cIlxuICB9LCBcIlxcdTA0MjNcXHUwNDM0XFx1MDQzMFxcdTA0M0JcXHUwNDM4XFx1MDQ0MlxcdTA0NENcIikpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29uZmlybWF0aW9uRGlhbG9nLCBudWxsKSk7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAnLi9zdHlsZS5zYXNzJztcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7IFNldHVwQ2F0ZWdvcmllc0l0ZW0gfSBmcm9tIFwiLi4vc2V0dXBDYXRlZ29yaWVzSXRlbVwiO1xuaW1wb3J0IHsgU2V0dXBDYXRlZ29yaWVzRWRpdFdpbiB9IGZyb20gXCIuLi9zZXR1cENhdGVnb3JpZXNFZGl0V2luXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSBcIi4uLy4uL3N0b3JlXCI7XG5leHBvcnQgdmFyIFNldHVwQ2F0ZWdvcmllcyA9IG9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChzdG9yZSksXG4gICAgICBfUmVhY3QkdXNlQ29udGV4dCRjYXQgPSBfUmVhY3QkdXNlQ29udGV4dC5jYXRlZ29yaWVzU3RvcmUsXG4gICAgICBjYXRlZ29yaWVzID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0LmNhdGVnb3JpZXMsXG4gICAgICBnZXRBbGxDYXRlZ29yaWVzID0gX1JlYWN0JHVzZUNvbnRleHQkY2F0LmdldEFsbENhdGVnb3JpZXMsXG4gICAgICBzZXRFZGl0V2luZG93ID0gX1JlYWN0JHVzZUNvbnRleHQuc2V0dXBTdG9yZS5zZXRFZGl0V2luZG93O1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNhdGVnb3JpZXMgPT09IG51bGwpIHtcbiAgICAgIGdldEFsbENhdGVnb3JpZXMoKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICB2YXIgcmVuZGVyQ2F0ZWdvcmllcyA9IGZ1bmN0aW9uIHJlbmRlckNhdGVnb3JpZXMoKSB7XG4gICAgcmV0dXJuIGNhdGVnb3JpZXMubGlzdC5zbGljZSgpLnJldmVyc2UoKS5tYXAoZnVuY3Rpb24gKGNhdGVnb3J5SWQpIHtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTZXR1cENhdGVnb3JpZXNJdGVtLCB7XG4gICAgICAgIGtleTogY2F0ZWdvcnlJZCxcbiAgICAgICAgaWQ6IGNhdGVnb3J5SWQsXG4gICAgICAgIG9wZW5FZGl0V2luZG93OiBmdW5jdGlvbiBvcGVuRWRpdFdpbmRvdygpIHtcbiAgICAgICAgICByZXR1cm4gc2V0RWRpdFdpbmRvdyh7XG4gICAgICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgICAgICBpZDogY2F0ZWdvcnlJZCxcbiAgICAgICAgICAgIHRpdGxlOiBjYXRlZ29yaWVzLml0ZW1zW2NhdGVnb3J5SWRdLnRpdGxlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRpdGxlOiBjYXRlZ29yaWVzLml0ZW1zW2NhdGVnb3J5SWRdLnRpdGxlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBpZiAoY2F0ZWdvcmllcyA9PT0gbnVsbCkge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBcIkxvYWRpbmdcIik7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IFwic2V0dXAtY2F0ZWdvcnlzXCJcbiAgfSwgcmVuZGVyQ2F0ZWdvcmllcygpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2V0dXBDYXRlZ29yaWVzRWRpdFdpbiwgbnVsbCkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgTmF2IH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvbmF2XCI7XG5pbXBvcnQgeyBBZGROZXdDYXRlZ29yeUZvcm0gfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9hZGROZXdDYXRlZ29yeUZvcm1cIjtcbmltcG9ydCB7IFNldHVwQ2F0ZWdvcmllcyB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL3NldHVwQ2F0ZWdvcmllc1wiO1xuZXhwb3J0IHZhciBTZXR1cFBhZ2UgPSBmdW5jdGlvbiBTZXR1cFBhZ2UoKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2LCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQWRkTmV3Q2F0ZWdvcnlGb3JtLCBudWxsKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU2V0dXBDYXRlZ29yaWVzLCBudWxsKSk7XG59OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICcuLi8uLi9zdG9yZSc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi4vYnV0dG9uXCI7XG5pbXBvcnQgeyB1c2VIaXN0b3J5LCB1c2VMb2NhdGlvbiB9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmV4cG9ydCB2YXIgTG9naW5Gb3JtID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JGF1dCA9IF9SZWFjdCR1c2VDb250ZXh0LmF1dGhTdG9yZSxcbiAgICAgIGlzQXV0aCA9IF9SZWFjdCR1c2VDb250ZXh0JGF1dC5pc0F1dGgsXG4gICAgICBsb2dpbiA9IF9SZWFjdCR1c2VDb250ZXh0JGF1dC5sb2dpbixcbiAgICAgIHNldExvZ2luID0gX1JlYWN0JHVzZUNvbnRleHQkYXV0LnNldExvZ2luLFxuICAgICAgcGFzc3dvcmQgPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQucGFzc3dvcmQsXG4gICAgICBzZXRQYXNzd29yZCA9IF9SZWFjdCR1c2VDb250ZXh0JGF1dC5zZXRQYXNzd29yZCxcbiAgICAgIGVycm9yTG9naW4gPSBfUmVhY3QkdXNlQ29udGV4dCRhdXQuZXJyb3JMb2dpbixcbiAgICAgIGxvZ2luUmVxdWVzdCA9IF9SZWFjdCR1c2VDb250ZXh0JGF1dC5sb2dpblJlcXVlc3Q7XG5cbiAgdmFyIGhpc3RvcnkgPSB1c2VIaXN0b3J5KCk7XG4gIHZhciBsb2NhdGlvbiA9IHVzZUxvY2F0aW9uKCk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGlzQXV0aCkge1xuICAgICAgdmFyIF9yZWYgPSBsb2NhdGlvbi5zdGF0ZSB8fCB7XG4gICAgICAgIGZyb206IHtcbiAgICAgICAgICBwYXRobmFtZTogXCIvXCJcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICAgICBmcm9tID0gX3JlZi5mcm9tO1xuXG4gICAgICBoaXN0b3J5LnJlcGxhY2UoZnJvbSk7XG4gICAgfVxuICB9LCBbaXNBdXRoXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImxvZ2luLWZvcm0td3JhcFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaDFcIiwgbnVsbCwgXCJcXHUwNDEwXFx1MDQzMlxcdTA0NDJcXHUwNDNFXFx1MDQ0MFxcdTA0MzhcXHUwNDM3XFx1MDQzMFxcdTA0NDZcXHUwNDM4XFx1MDQ0RlwiKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJsb2dpbi1mb3JtX19lcnJvclwiXG4gIH0sIGVycm9yTG9naW4pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImZvcm1cIiwge1xuICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChlKSB7XG4gICAgICByZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBcImxvZ2luLWZvcm1cIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHtcbiAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuICAgICAgcmV0dXJuIHNldExvZ2luKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9LFxuICAgIHZhbHVlOiBsb2dpbixcbiAgICBjbGFzc05hbWU6IFwibG9naW4tZm9ybV9faW5wdXRcIixcbiAgICB0eXBlOiBcInRleHRcIixcbiAgICBuYW1lOiBcImxvZ2luXCIsXG4gICAgcGxhY2Vob2xkZXI6IFwiXFx1MDQxQlxcdTA0M0VcXHUwNDMzXFx1MDQzOFxcdTA0M0RcIlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgIHJldHVybiBzZXRQYXNzd29yZChlLnRhcmdldC52YWx1ZSk7XG4gICAgfSxcbiAgICB2YWx1ZTogcGFzc3dvcmQsXG4gICAgY2xhc3NOYW1lOiBcImxvZ2luLWZvcm1fX2lucHV0XCIsXG4gICAgdHlwZTogXCJwYXNzd29yZFwiLFxuICAgIG5hbWU6IFwicGFzc3dvcmRcIixcbiAgICBwbGFjZWhvbGRlcjogXCJcXHUwNDFGXFx1MDQzMFxcdTA0NDBcXHUwNDNFXFx1MDQzQlxcdTA0NENcIlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7XG4gICAgY2FsbGJhY2s6IGxvZ2luUmVxdWVzdCxcbiAgICBuYW1lOiAn0JLQvtC50YLQuCcsXG4gICAgY2xhc3NOYW1lOiAnbG9naW4tZm9ybV9fYnV0dG9uJ1xuICB9KSkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICcuL3N0eWxlLnNhc3MnO1xuaW1wb3J0IHsgTmF2IH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvbmF2XCI7XG5pbXBvcnQgeyBMb2dpbkZvcm0gfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9sb2dpbkZvcm1cIjtcbmV4cG9ydCB2YXIgTG9naW5QYWdlID0gZnVuY3Rpb24gTG9naW5QYWdlKCkge1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE5hdiwgbnVsbCksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExvZ2luRm9ybSwgbnVsbCkpO1xufTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgJy4vc3R5bGUuc2Fzcyc7XG5leHBvcnQgdmFyIFBhZ2VOb3RGb3VuZCA9IGZ1bmN0aW9uIFBhZ2VOb3RGb3VuZCgpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicFwiLCBudWxsLCBcIjQwNCBQYWdlIG5vdCBmb3VuZFwiKTtcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbnZhciBfZXhjbHVkZWQgPSBbXCJjaGlsZHJlblwiXTtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUm91dGUsIFJlZGlyZWN0IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gXCIuLi8uLi9zdG9yZVwiO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuZXhwb3J0IHZhciBQcml2YXRlUm91dGUgPSBvYnNlcnZlcihmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQpO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoc3RvcmUpLFxuICAgICAgaXNBdXRoID0gX1JlYWN0JHVzZUNvbnRleHQuYXV0aFN0b3JlLmlzQXV0aDtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIF9leHRlbmRzKHt9LCByZXN0LCB7XG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoX3JlZjIpIHtcbiAgICAgIHZhciBsb2NhdGlvbiA9IF9yZWYyLmxvY2F0aW9uO1xuICAgICAgcmV0dXJuIGlzQXV0aCA/IGNoaWxkcmVuIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVkaXJlY3QsIHtcbiAgICAgICAgdG86IHtcbiAgICAgICAgICBwYXRobmFtZTogXCIvYXV0aFwiLFxuICAgICAgICAgIHN0YXRlOiB7XG4gICAgICAgICAgICBmcm9tOiBsb2NhdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KSk7XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBCcm93c2VyUm91dGVyIGFzIFJvdXRlciwgUm91dGUsIFN3aXRjaCB9IGZyb20gXCJyZWFjdC1yb3V0ZXItZG9tXCI7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gXCIuL3N0b3JlXCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEluZGV4UGFnZSB9IGZyb20gXCIuL3BhZ2VzL2luZGV4XCI7XG5pbXBvcnQgeyBTZXR1cFBhZ2UgfSBmcm9tIFwiLi9wYWdlcy9zZXR1cFwiO1xuaW1wb3J0IHsgTG9naW5QYWdlIH0gZnJvbSBcIi4vcGFnZXMvbG9naW5cIjtcbmltcG9ydCB7IFBhZ2VOb3RGb3VuZCB9IGZyb20gXCIuL3BhZ2VzLzQwNFwiO1xuaW1wb3J0IHsgUHJpdmF0ZVJvdXRlIH0gZnJvbSBcIi4vY29tcG9uZW50cy9wcml2YXRlUm91dGVcIjtcbmV4cG9ydCB2YXIgUm91dGVzID0gb2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KHN0b3JlKSxcbiAgICAgIF9SZWFjdCR1c2VDb250ZXh0JGF1dCA9IF9SZWFjdCR1c2VDb250ZXh0LmF1dGhTdG9yZSxcbiAgICAgIGlzQXV0aCA9IF9SZWFjdCR1c2VDb250ZXh0JGF1dC5pc0F1dGgsXG4gICAgICBhdXRoUmVxdWVzdCA9IF9SZWFjdCR1c2VDb250ZXh0JGF1dC5hdXRoUmVxdWVzdDtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChpc0F1dGggIT09IHRydWUgJiYgaXNBdXRoICE9PSBmYWxzZSkge1xuICAgICAgYXV0aFJlcXVlc3QoKTtcbiAgICB9XG4gIH0sIFtpc0F1dGhdKTtcblxuICBpZiAoaXNBdXRoICE9PSB0cnVlICYmIGlzQXV0aCAhPT0gZmFsc2UpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgXCJMb2FkaW5nXCIpO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlciwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3dpdGNoLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZSwge1xuICAgIGV4YWN0OiB0cnVlLFxuICAgIHBhdGg6IFwiL1wiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEluZGV4UGFnZSwgbnVsbCkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQcml2YXRlUm91dGUsIHtcbiAgICBleGFjdDogdHJ1ZSxcbiAgICBwYXRoOiBcIi9zZXR1cFwiXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNldHVwUGFnZSwgbnVsbCkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZSwge1xuICAgIGV4YWN0OiB0cnVlLFxuICAgIHBhdGg6IFwiL2F1dGhcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMb2dpblBhZ2UsIG51bGwpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIHtcbiAgICBwYXRoOiBcIipcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYWdlTm90Rm91bmQsIG51bGwpKSkpO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCB7IE1vYlhQcm92aWRlciB9IGZyb20gXCIuL3N0b3JlXCI7XG5pbXBvcnQgeyBSb3V0ZXMgfSBmcm9tIFwiLi9yb3V0ZXNcIjtcbmltcG9ydCAnLi9jc3Mvc3R5bGUuc2Fzcyc7XG5cbnZhciBBcHAgPSBmdW5jdGlvbiBBcHAoKSB7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcImNvbnRlbnRcIlxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNb2JYUHJvdmlkZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlcywgbnVsbCkpKTtcbn07XG5cblJlYWN0RE9NLnJlbmRlciggLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQXBwLCBudWxsKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhcHBcIikpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///lTEZica8\n");

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [296], () => (__webpack_exec__("lTEZica8")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);